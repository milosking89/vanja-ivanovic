var dA=Object.defineProperty,fA=Object.defineProperties;var hA=Object.getOwnPropertyDescriptors;var ba=Object.getOwnPropertySymbols;var Sv=Object.prototype.hasOwnProperty,Av=Object.prototype.propertyIsEnumerable;var bv=(t,e,n)=>e in t?dA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e)=>{for(var n in e||={})Sv.call(e,n)&&bv(t,n,e[n]);if(ba)for(var n of ba(e))Av.call(e,n)&&bv(t,n,e[n]);return t},ce=(t,e)=>fA(t,hA(e));var ZV=(t,e)=>{var n={};for(var r in t)Sv.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ba)for(var r of ba(t))e.indexOf(r)<0&&Av.call(t,r)&&(n[r]=t[r]);return n};var md;function Sa(){return md}function Ot(t){let e=md;return md=t,e}var Nv=Symbol("NotFound");function Kr(t){return t===Nv||t?.name==="\u0275NotFound"}function xa(t,e){return Object.is(t,e)}var $e=null,Aa=!1,yd=1,pA=null,Ge=Symbol("SIGNAL");function q(t){let e=$e;return $e=t,e}function Pa(){return $e}var Qr={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Yr(t){if(Aa)throw new Error("");if($e===null)return;$e.consumerOnSignalRead(t);let e=$e.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=$e.recomputing;if(r&&(n=e!==void 0?e.nextProducer:$e.producers,n!==void 0&&n.producer===t)){$e.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===$e&&(!r||mA(i,$e)))return;let o=Jr($e),s={producer:t,consumer:$e,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};$e.producersTail=s,e!==void 0?e.nextProducer=s:$e.producers=s,o&&Rv(t,s)}function Mv(){yd++}function Oa(t){if(!(Jr(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===yd)){if(!t.producerMustRecompute(t)&&!Oo(t)){Ra(t);return}t.producerRecomputeValue(t),Ra(t)}}function vd(t){if(t.consumers===void 0)return;let e=Aa;Aa=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||gA(r)}}finally{Aa=e}}function _d(){return $e?.consumerAllowSignalWrites!==!1}function gA(t){t.dirty=!0,vd(t),t.consumerMarkedDirty?.(t)}function Ra(t){t.dirty=!1,t.lastCleanEpoch=yd}function Zr(t){return t&&(t.producersTail=void 0,t.recomputing=!0),q(t)}function Po(t,e){if(q(e),!t)return;t.recomputing=!1;let n=t.producersTail,r=n!==void 0?n.nextProducer:t.producers;if(r!==void 0){if(Jr(t))do r=Ed(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function Oo(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Oa(n),r!==n.version))return!0}return!1}function ko(t){if(Jr(t)){let e=t.producers;for(;e!==void 0;)e=Ed(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Rv(t,e){let n=t.consumersTail,r=Jr(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Rv(i.producer,i)}function Ed(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Jr(e)){let o=e.producers;for(;o!==void 0;)o=Ed(o)}return n}function Jr(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function ka(t){pA?.(t)}function mA(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Fa(t,e){let n=Object.create(yA);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Oa(n),Yr(n),n.value===xo)throw n.error;return n.value};return r[Ge]=n,ka(n),r}var Na=Symbol("UNSET"),Ma=Symbol("COMPUTING"),xo=Symbol("ERRORED"),yA=ce(H({},Qr),{value:Na,dirty:!0,error:null,equal:xa,kind:"computed",producerMustRecompute(t){return t.value===Na||t.value===Ma},producerRecomputeValue(t){if(t.value===Ma)throw new Error("");let e=t.value;t.value=Ma;let n=Zr(t),r,i=!1;try{r=t.computation(),q(null),i=e!==Na&&e!==xo&&r!==xo&&t.equal(e,r)}catch(o){r=xo,t.error=o}finally{Po(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function vA(){throw new Error}var xv=vA;function Pv(t){xv(t)}function Id(t){xv=t}var _A=null;function Dd(t,e){let n=Object.create(Va);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Ov(n);return r[Ge]=n,ka(n),[r,s=>Xr(n,s),s=>wd(n,s)]}function Ov(t){return Yr(t),t.value}function Xr(t,e){_d()||Pv(t),t.equal(t.value,e)||(t.value=e,EA(t))}function wd(t,e){_d()||Pv(t),Xr(t,e(t.value))}var Va=ce(H({},Qr),{equal:xa,value:void 0,kind:"signal"});function EA(t){t.version++,Mv(),vd(t),_A?.(t)}function z(t){return typeof t=="function"}function ei(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var La=ei(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Fo(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ne=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(z(r))try{r()}catch(o){e=o instanceof La?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{kv(o)}catch(s){e=e??[],s instanceof La?e=[...e,...s.errors]:e.push(s)}}if(e)throw new La(e)}}add(e){var n;if(e&&e!==this)if(this.closed)kv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Fo(n,e)}remove(e){let{_finalizers:n}=this;n&&Fo(n,e),e instanceof t&&e._removeParent(this)}};Ne.EMPTY=(()=>{let t=new Ne;return t.closed=!0,t})();var Cd=Ne.EMPTY;function ja(t){return t instanceof Ne||t&&"closed"in t&&z(t.remove)&&z(t.add)&&z(t.unsubscribe)}function kv(t){z(t)?t():t.unsubscribe()}var Ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ti={setTimeout(t,e,...n){let{delegate:r}=ti;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ti;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ba(t){ti.setTimeout(()=>{let{onUnhandledError:e}=Ct;if(e)e(t);else throw t})}function Vo(){}var Fv=Td("C",void 0,void 0);function Vv(t){return Td("E",void 0,t)}function Lv(t){return Td("N",t,void 0)}function Td(t,e,n){return{kind:t,value:e,error:n}}var er=null;function ni(t){if(Ct.useDeprecatedSynchronousErrorHandling){let e=!er;if(e&&(er={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=er;if(er=null,n)throw r}}else t()}function jv(t){Ct.useDeprecatedSynchronousErrorHandling&&er&&(er.errorThrown=!0,er.error=t)}var tr=class extends Ne{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ja(e)&&e.add(this)):this.destination=wA}static create(e,n,r){return new ri(e,n,r)}next(e){this.isStopped?Sd(Lv(e),this):this._next(e)}error(e){this.isStopped?Sd(Vv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sd(Fv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},IA=Function.prototype.bind;function bd(t,e){return IA.call(t,e)}var Ad=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ua(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ua(r)}else Ua(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ua(n)}}},ri=class extends tr{constructor(e,n,r){super();let i;if(z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Ct.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bd(e.next,o),error:e.error&&bd(e.error,o),complete:e.complete&&bd(e.complete,o)}):i=e}this.destination=new Ad(i)}};function Ua(t){Ct.useDeprecatedSynchronousErrorHandling?jv(t):Ba(t)}function DA(t){throw t}function Sd(t,e){let{onStoppedNotification:n}=Ct;n&&ti.setTimeout(()=>n(t,e))}var wA={closed:!0,next:Vo,error:DA,complete:Vo};var ii=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ot(t){return t}function CA(...t){return Nd(t)}function Nd(t){return t.length===0?ot:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=bA(n)?n:new ri(n,r,i);return ni(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Bv(r),new r((i,o)=>{let s=new ri({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ii](){return this}pipe(...n){return Nd(n)(this)}toPromise(n){return n=Bv(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Bv(t){var e;return(e=t??Ct.Promise)!==null&&e!==void 0?e:Promise}function TA(t){return t&&z(t.next)&&z(t.error)&&z(t.complete)}function bA(t){return t&&t instanceof tr||TA(t)&&ja(t)}function Md(t){return z(t?.lift)}function ne(t){return e=>{if(Md(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,r,i){return new Rd(t,e,n,r,i)}var Rd=class extends tr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function xd(){return ne((t,e)=>{let n=null;t._refCount++;let r=Y(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Pd=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Md(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ne;let n=this.getSubject();e.add(this.source.subscribe(Y(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ne.EMPTY)}return e}refCount(){return xd()(this)}};var Uv=ei(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Tt=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ha(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Uv}next(n){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Cd:(this.currentObservers=null,o.push(n),new Ne(()=>{this.currentObservers=null,Fo(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new Ha(e,n),t})(),Ha=class extends Tt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Cd}};var Lo=class extends Tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var jo=new oe(t=>t.complete());function Hv(t){return t&&z(t.schedule)}function $v(t){return t[t.length-1]}function $a(t){return z($v(t))?t.pop():void 0}function Nn(t){return Hv($v(t))?t.pop():void 0}function y2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function qv(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{d(r.next(h))}catch(g){s(g)}}function u(h){try{d(r.throw(h))}catch(g){s(g)}}function d(h){h.done?o(h.value):i(h.value).then(c,u)}d((r=r.apply(t,e||[])).next())})}function Gv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nr(t){return this instanceof nr?(this.v=t,this):new nr(t)}function zv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,g)}}function c(y,S){r[y]&&(i[y]=function(M){return new Promise(function(A,O){o.push([y,M,A,O])>1||u(y,M)})},S&&(i[y]=S(i[y])))}function u(y,S){try{d(r[y](S))}catch(M){m(o[0][3],M)}}function d(y){y.value instanceof nr?Promise.resolve(y.value.v).then(h,g):m(o[0][2],y)}function h(y){u("next",y)}function g(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Wv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Gv=="function"?Gv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(d){o({value:d,done:c})},s)}}var Ga=t=>t&&typeof t.length=="number"&&typeof t!="function";function qa(t){return z(t?.then)}function za(t){return z(t[ii])}function Wa(t){return Symbol.asyncIterator&&z(t?.[Symbol.asyncIterator])}function Ka(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function SA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Qa=SA();function Ya(t){return z(t?.[Qa])}function Za(t){return zv(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield nr(n.read());if(i)return yield nr(void 0);yield yield nr(r)}}finally{n.releaseLock()}})}function Ja(t){return z(t?.getReader)}function Ie(t){if(t instanceof oe)return t;if(t!=null){if(za(t))return AA(t);if(Ga(t))return NA(t);if(qa(t))return MA(t);if(Wa(t))return Kv(t);if(Ya(t))return RA(t);if(Ja(t))return xA(t)}throw Ka(t)}function AA(t){return new oe(e=>{let n=t[ii]();if(z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function NA(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function MA(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ba)})}function RA(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Kv(t){return new oe(e=>{PA(t,e).catch(n=>e.error(n))})}function xA(t){return Kv(Za(t))}function PA(t,e){var n,r,i,o;return qv(this,void 0,void 0,function*(){try{for(n=Wv(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function tt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Xa(t,e=0){return ne((n,r)=>{n.subscribe(Y(r,i=>tt(r,t,()=>r.next(i),e),()=>tt(r,t,()=>r.complete(),e),i=>tt(r,t,()=>r.error(i),e)))})}function ec(t,e=0){return ne((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Qv(t,e){return Ie(t).pipe(ec(e),Xa(e))}function Yv(t,e){return Ie(t).pipe(ec(e),Xa(e))}function Zv(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Jv(t,e){return new oe(n=>{let r;return tt(n,e,()=>{r=t[Qa](),tt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>z(r?.return)&&r.return()})}function tc(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{tt(n,e,()=>{let r=t[Symbol.asyncIterator]();tt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Xv(t,e){return tc(Za(t),e)}function e_(t,e){if(t!=null){if(za(t))return Qv(t,e);if(Ga(t))return Zv(t,e);if(qa(t))return Yv(t,e);if(Wa(t))return tc(t,e);if(Ya(t))return Jv(t,e);if(Ja(t))return Xv(t,e)}throw Ka(t)}function kt(t,e){return e?e_(t,e):Ie(t)}function OA(...t){let e=Nn(t);return kt(t,e)}function kA(t,e){let n=z(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function FA(t){return!!t&&(t instanceof oe||z(t.lift)&&z(t.subscribe))}var rr=ei(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function en(t,e){return ne((n,r)=>{let i=0;n.subscribe(Y(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:VA}=Array;function LA(t,e){return VA(e)?t(...e):t(e)}function nc(t){return en(e=>LA(t,e))}var{isArray:jA}=Array,{getPrototypeOf:BA,prototype:UA,keys:HA}=Object;function rc(t){if(t.length===1){let e=t[0];if(jA(e))return{args:e,keys:null};if($A(e)){let n=HA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function $A(t){return t&&typeof t=="object"&&BA(t)===UA}function ic(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function GA(...t){let e=Nn(t),n=$a(t),{args:r,keys:i}=rc(t);if(r.length===0)return kt([],e);let o=new oe(qA(r,e,i?s=>ic(i,s):ot));return n?o.pipe(nc(n)):o}function qA(t,e,n=ot){return r=>{t_(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)t_(e,()=>{let d=kt(t[u],e),h=!1;d.subscribe(Y(r,g=>{o[u]=g,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function t_(t,e,n){t?tt(n,t,e):e()}function n_(t,e,n,r,i,o,s,c){let u=[],d=0,h=0,g=!1,m=()=>{g&&!u.length&&!d&&e.complete()},y=M=>d<r?S(M):u.push(M),S=M=>{o&&e.next(M),d++;let A=!1;Ie(n(M,h++)).subscribe(Y(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{A=!0},void 0,()=>{if(A)try{for(d--;u.length&&d<r;){let O=u.shift();s?tt(e,s,()=>S(O)):S(O)}m()}catch(O){e.error(O)}}))};return t.subscribe(Y(e,y,()=>{g=!0,m()})),()=>{c?.()}}function ir(t,e,n=1/0){return z(e)?ir((r,i)=>en((o,s)=>e(r,o,i,s))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),ne((r,i)=>n_(r,i,t,n)))}function r_(t=1/0){return ir(ot,t)}function i_(){return r_(1)}function oc(...t){return i_()(kt(t,Nn(t)))}function zA(t){return new oe(e=>{Ie(t()).subscribe(e)})}function Od(...t){let e=$a(t),{args:n,keys:r}=rc(t),i=new oe(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,d=s;for(let h=0;h<s;h++){let g=!1;Ie(n[h]).subscribe(Y(o,m=>{g||(g=!0,d--),c[h]=m},()=>u--,void 0,()=>{(!u||!g)&&(d||o.next(r?ic(r,c):c),o.complete())}))}});return e?i.pipe(nc(e)):i}function Bo(t,e){return ne((n,r)=>{let i=0;n.subscribe(Y(r,o=>t.call(e,o,i++)&&r.next(o)))})}function o_(t){return ne((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Y(n,void 0,void 0,s=>{o=Ie(t(s,o_(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function s_(t,e,n,r,i){return(o,s)=>{let c=n,u=e,d=0;o.subscribe(Y(s,h=>{let g=d++;u=c?t(u,h,g):(c=!0,h),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function WA(t,e){return z(e)?ir(t,e,1):ir(t,1)}function Uo(t){return ne((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function kd(t){return t<=0?()=>jo:ne((e,n)=>{let r=0;e.subscribe(Y(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function sc(t=KA){return ne((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function KA(){return new rr}function QA(t){return ne((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function YA(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Bo((i,o)=>t(i,o,r)):ot,kd(1),n?Uo(e):sc(()=>new rr))}function Fd(t){return t<=0?()=>jo:ne((e,n)=>{let r=[];e.subscribe(Y(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ZA(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Bo((i,o)=>t(i,o,r)):ot,Fd(1),n?Uo(e):sc(()=>new rr))}function JA(t,e){return ne(s_(t,e,arguments.length>=2,!0))}function XA(...t){let e=Nn(t);return ne((n,r)=>{(e?oc(t,n,e):oc(t,n)).subscribe(r)})}function e0(t,e){return ne((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(Y(r,u=>{i?.unsubscribe();let d=0,h=o++;Ie(t(u,h)).subscribe(i=Y(r,g=>r.next(e?e(u,g,h,d++):g),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function t0(t){return ne((e,n)=>{Ie(t).subscribe(Y(n,()=>n.complete(),Vo)),!n.closed&&e.subscribe(n)})}function n0(t,e,n){let r=z(t)||e||n?{next:t,error:e,complete:n}:t;return r?ne((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(Y(o,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,u),o.error(u)},()=>{var u,d;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):ot}function a_(t){let e=q(null);try{return t()}finally{q(e)}}var Qd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",K=class extends Error{code;constructor(e,n){super(zo(e,n)),this.code=e}};function r0(t){return`NG0${Math.abs(t)}`}function zo(t,e){return`${r0(t)}${e?": "+e:""}`}function ue(t){for(let e in t)if(t[e]===ue)return e;throw Error("")}function l_(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function nn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(nn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Yd(t,e){return t?e?`${t} ${e}`:t:e||""}var i0=ue({__forward_ref__:ue});function yt(t){return t.__forward_ref__=yt,t.toString=function(){return nn(this())},t}function ke(t){return Zd(t)?t():t}function Zd(t){return typeof t=="function"&&t.hasOwnProperty(i0)&&t.__forward_ref__===yt}function d_(t,e){t==null&&Jd(e,t,null,"!=")}function Jd(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function le(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function xn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Wo(t){return s0(t,dc)}function o0(t){return Wo(t)!==null}function s0(t,e){return t.hasOwnProperty(e)&&t[e]||null}function a0(t){let e=t?.[dc]??null;return e||null}function Ld(t){return t&&t.hasOwnProperty(cc)?t[cc]:null}var dc=ue({\u0275prov:ue}),cc=ue({\u0275inj:ue}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=le({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Xd(t){return t&&!!t.\u0275providers}var ef=ue({\u0275cmp:ue}),tf=ue({\u0275dir:ue}),nf=ue({\u0275pipe:ue}),rf=ue({\u0275mod:ue}),Go=ue({\u0275fac:ue}),lr=ue({__NG_ELEMENT_ID__:ue}),c_=ue({__NG_ENV_ID__:ue});function fc(t){return typeof t=="string"?t:t==null?"":String(t)}function uc(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():fc(t)}var of=ue({ngErrorCode:ue}),f_=ue({ngErrorMessage:ue}),$o=ue({ngTokenPath:ue});function sf(t,e){return h_("",-200,e)}function hc(t,e){throw new K(-201,!1)}function c0(t,e){t[$o]??=[];let n=t[$o],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(d_(e.provide,"Token with multi: true should have a provide property"),r=uc(e.provide)):r=uc(e),n[0]!==r&&t[$o].unshift(r)}function u0(t,e){let n=t[$o],r=t[of],i=t[f_]||t.message;return t.message=d0(i,r,n,e),t}function h_(t,e,n){let r=new K(e,t);return r[of]=e,r[f_]=t,n&&(r[$o]=n),r}function l0(t){return t[of]}function d0(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return zo(e,`${t}${o}${i}`)}var jd;function p_(){return jd}function st(t){let e=jd;return jd=t,e}function af(t,e,n){let r=Wo(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;hc(t,"Injector")}var f0={},or=f0,Bd="__NG_DI_FLAG__",Ud=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=sr(n)||0;try{return this.injector.get(e,r&8?null:or,r)}catch(i){if(Kr(i))return i;throw i}}};function h0(t,e=0){let n=Sa();if(n===void 0)throw new K(-203,!1);if(n===null)return af(t,void 0,e);{let r=p0(e),i=n.retrieve(t,r);if(Kr(i)){if(r.optional)return null;throw i}return i}}function Fe(t,e=0){return(p_()||h0)(ke(t),e)}function k(t,e){return Fe(t,sr(e))}function sr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function p0(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Hd(t){let e=[];for(let n=0;n<t.length;n++){let r=ke(t[n]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=g0(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(Fe(i,o))}else e.push(Fe(r))}return e}function g_(t,e){return t[Bd]=e,t.prototype[Bd]=e,t}function g0(t){return t[Bd]}function ar(t,e){let n=t.hasOwnProperty(Go);return n?t[Go]:null}function pc(t,e){t.forEach(n=>Array.isArray(n)?pc(n,e):e(n))}function cf(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ko(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function m_(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function y_(t,e,n){let r=si(t,e);return r>=0?t[r|1]=n:(r=~r,m_(t,r,e,n)),r}function gc(t,e){let n=si(t,e);if(n>=0)return t[n|1]}function si(t,e){return m0(t,e,1)}function m0(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Pn={},at=[],Vt=new U(""),uf=new U("",-1),lf=new U(""),qo=class{get(e,n=or){if(n===or){let i=h_("",-201);throw i.name="\u0275NotFound",i}return n}};function df(t){return t[rf]||null}function on(t){return t[ef]||null}function mc(t){return t[tf]||null}function ff(t){return t[nf]||null}function ai(t){return{\u0275providers:t}}function v_(t){return ai([{provide:Vt,multi:!0,useValue:t}])}function __(...t){return{\u0275providers:yc(!0,t),\u0275fromNgModule:!0}}function yc(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return pc(e,s=>{let c=s;lc(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&E_(i,o),n}function E_(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];hf(i,o=>{e(o,r)})}}function lc(t,e,n,r){if(t=ke(t),!t)return!1;let i=null,o=Ld(t),s=!o&&on(t);if(!o&&!s){let u=t.ngModule;if(o=Ld(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of u)lc(d,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let d;try{pc(o.imports,h=>{lc(h,e,n,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&E_(d,e)}if(!c){let d=ar(i)||(()=>new i);e({provide:i,useFactory:d,deps:at},i),e({provide:lf,useValue:i,multi:!0},i),e({provide:Vt,useValue:()=>Fe(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let d=t;hf(u,h=>{e(h,d)})}}else return!1;return i!==t&&t.providers!==void 0}function hf(t,e){for(let n of t)Xd(n)&&(n=n.\u0275providers),Array.isArray(n)?hf(n,e):e(n)}var y0=ue({provide:String,useValue:ue});function I_(t){return t!==null&&typeof t=="object"&&y0 in t}function v0(t){return!!(t&&t.useExisting)}function _0(t){return!!(t&&t.useFactory)}function cr(t){return typeof t=="function"}function D_(t){return!!t.useClass}var pf=new U(""),ac={},u_={},Vd;function Qo(){return Vd===void 0&&(Vd=new qo),Vd}var ct=class{},ur=class extends ct{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Gd(e,s=>this.processProvider(s)),this.records.set(uf,oi(void 0,this)),i.has("environment")&&this.records.set(ct,oi(void 0,this));let o=this.records.get(pf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lf,at,{self:!0}))}retrieve(e,n){let r=sr(n)||0;try{return this.get(e,or,r)}catch(i){if(Kr(i))return i;throw i}}destroy(){Ho(this),this._destroyed=!0;let e=q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),q(e)}}onDestroy(e){return Ho(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ho(this);let n=Ot(this),r=st(void 0),i;try{return e()}finally{Ot(n),st(r)}}get(e,n=or,r){if(Ho(this),e.hasOwnProperty(c_))return e[c_](this);let i=sr(r),o,s=Ot(this),c=st(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=C0(e)&&Wo(e);h&&this.injectableDefInScope(h)?d=oi($d(e),ac):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let u=i&2?Qo():this.parent;return n=i&8&&n===or?null:n,u.get(e,n)}catch(u){let d=l0(u);throw d===-200||d===-201?new K(d,null):u}finally{st(c),Ot(s)}}resolveInjectorInitializers(){let e=q(null),n=Ot(this),r=st(void 0),i;try{let o=this.get(Vt,at,{self:!0});for(let s of o)s()}finally{Ot(n),st(r),q(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(nn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ke(e);let n=cr(e)?e:ke(e&&e.provide),r=I0(e);if(!cr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=oi(void 0,ac,!0),i.factory=()=>Hd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=q(null);try{if(n.value===u_)throw sf(nn(e));return n.value===ac&&(n.value=u_,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&w0(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ke(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function $d(t){let e=Wo(t),n=e!==null?e.factory:ar(t);if(n!==null)return n;if(t instanceof U)throw new K(204,!1);if(t instanceof Function)return E0(t);throw new K(204,!1)}function E0(t){if(t.length>0)throw new K(204,!1);let n=a0(t);return n!==null?()=>n.factory(t):()=>new t}function I0(t){if(I_(t))return oi(void 0,t.useValue);{let e=gf(t);return oi(e,ac)}}function gf(t,e,n){let r;if(cr(t)){let i=ke(t);return ar(i)||$d(i)}else if(I_(t))r=()=>ke(t.useValue);else if(_0(t))r=()=>t.useFactory(...Hd(t.deps||[]));else if(v0(t))r=(i,o)=>Fe(ke(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ke(t&&(t.useClass||t.provide));if(D0(t))r=()=>new i(...Hd(t.deps));else return ar(i)||$d(i)}return r}function Ho(t){if(t.destroyed)throw new K(205,!1)}function oi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function D0(t){return!!t.deps}function w0(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function C0(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Gd(t,e){for(let n of t)Array.isArray(n)?Gd(n,e):n&&Xd(n)?Gd(n.\u0275providers,e):e(n)}function vc(t,e){let n;t instanceof ur?(Ho(t),n=t):n=new Ud(t);let r,i=Ot(n),o=st(void 0);try{return e()}finally{Ot(i),st(o)}}function w_(){return p_()!==void 0||Sa()!=null}var Je=0,V=1,$=2,De=3,vt=4,_t=5,ut=6,ci=7,Ve=8,bt=9,sn=10,he=11,ui=12,mf=13,dr=14,nt=15,fr=16,hr=17,pr=18,Yo=19,yf=20,tn=21,_c=22,Zo=23,lt=24,gr=25,ge=26,C_=1,St=6,Lt=7,Jo=8,Xo=9,qe=10;function dt(t){return Array.isArray(t)&&typeof t[C_]=="object"}function ft(t){return Array.isArray(t)&&t[C_]===!0}function vf(t){return(t.flags&4)!==0}function an(t){return t.componentOffset>-1}function es(t){return(t.flags&1)===1}function jt(t){return!!t.template}function mr(t){return(t[$]&512)!==0}function On(t){return(t[$]&256)===256}var T_="svg",b_="math";function ht(t){for(;Array.isArray(t);)t=t[Je];return t}function _f(t,e){return ht(e[t])}function Et(t,e){return ht(e[t.index])}function yr(t,e){return t.data[e]}function S_(t,e){return t[e]}function It(t,e){let n=e[t];return dt(n)?n:n[Je]}function Ec(t){return(t[$]&128)===128}function A_(t){return ft(t[De])}function Bt(t,e){return e==null?null:t[e]}function Ef(t){t[hr]=0}function If(t){t[$]&1024||(t[$]|=1024,Ec(t)&&li(t))}function N_(t,e){for(;t>0;)e=e[dr],t--;return e}function ts(t){return!!(t[$]&9216||t[lt]?.dirty)}function Ic(t){t[sn].changeDetectionScheduler?.notify(8),t[$]&64&&(t[$]|=1024),ts(t)&&li(t)}function li(t){t[sn].changeDetectionScheduler?.notify(0);let e=Mn(t);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!Ec(e)));)e=Mn(e)}function Df(t,e){if(On(t))throw new K(911,!1);t[tn]===null&&(t[tn]=[]),t[tn].push(e)}function M_(t,e){if(t[tn]===null)return;let n=t[tn].indexOf(e);n!==-1&&t[tn].splice(n,1)}function Mn(t){let e=t[De];return ft(e)?e[De]:e}function R_(t){return t[ci]??=[]}function x_(t){return t.cleanup??=[]}var Q={lFrame:K_(null),bindingsEnabled:!0,skipHydrationRootTNode:null},ns=(function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t})(ns||{}),T0=0,qd=!1;function P_(){return Q.lFrame.elementDepthCount}function O_(){Q.lFrame.elementDepthCount++}function wf(){Q.lFrame.elementDepthCount--}function Cf(){return Q.bindingsEnabled}function Tf(){return Q.skipHydrationRootTNode!==null}function bf(t){return Q.skipHydrationRootTNode===t}function k_(t){Q.skipHydrationRootTNode=t}function Sf(){Q.skipHydrationRootTNode=null}function de(){return Q.lFrame.lView}function Xe(){return Q.lFrame.tView}function F_(t){return Q.lFrame.contextLView=t,t[Ve]}function V_(t){return Q.lFrame.contextLView=null,t}function ze(){let t=Af();for(;t!==null&&t.type===64;)t=t.parent;return t}function Af(){return Q.lFrame.currentTNode}function L_(){let t=Q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function di(t,e){let n=Q.lFrame;n.currentTNode=t,n.isParent=e}function Nf(){return Q.lFrame.isParent}function j_(){Q.lFrame.isParent=!1}function B_(){return Q.lFrame.contextLView}function Mf(t){Jd("Must never be called in production mode"),T0=t}function Rf(){return qd}function xf(t){let e=qd;return qd=t,e}function U_(t){return Q.lFrame.bindingIndex=t}function fi(){return Q.lFrame.bindingIndex++}function H_(t){let e=Q.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function $_(){return Q.lFrame.inI18n}function G_(t,e){let n=Q.lFrame;n.bindingIndex=n.bindingRootIndex=t,Dc(e)}function q_(){return Q.lFrame.currentDirectiveIndex}function Dc(t){Q.lFrame.currentDirectiveIndex=t}function z_(t){let e=Q.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Pf(t){Q.lFrame.currentQueryIndex=t}function b0(t){let e=t[V];return e.type===2?e.declTNode:e.type===1?t[_t]:null}function Of(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=b0(o),i===null||(o=o[dr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Q.lFrame=W_();return r.currentTNode=e,r.lView=t,!0}function wc(t){let e=W_(),n=t[V];Q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function W_(){let t=Q.lFrame,e=t===null?null:t.child;return e===null?K_(t):e}function K_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Q_(){let t=Q.lFrame;return Q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var kf=Q_;function Cc(){let t=Q_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Y_(t){return(Q.lFrame.contextLView=N_(t,Q.lFrame.contextLView))[Ve]}function vr(){return Q.lFrame.selectedIndex}function kn(t){Q.lFrame.selectedIndex=t}function Tc(){let t=Q.lFrame;return yr(t.tView,t.selectedIndex)}function Ff(){return Q.lFrame.currentNamespace}var Z_=!0;function bc(){return Z_}function cn(t){Z_=t}var S0={elements:void 0};function J_(){return S0}function zd(t,e=null,n=null,r){let i=Vf(t,e,n,r);return i.resolveInjectorInitializers(),i}function Vf(t,e=null,n=null,r,i=new Set){let o=[n||at,__(t)];return r=r||(typeof t=="object"?void 0:nn(t)),new ur(o,e||Qo(),r||null,i)}var rn=class t{static THROW_IF_NOT_FOUND=or;static NULL=new qo;static create(e,n){if(Array.isArray(e))return zd({name:""},n,e,"");{let r=e.name??"";return zd({name:r},e.parent,e.providers,r)}}static \u0275prov=le({token:t,providedIn:"any",factory:()=>Fe(uf)});static __NG_ELEMENT_ID__=-1},hi=new U(""),_r=(()=>{class t{static __NG_ELEMENT_ID__=A0;static __NG_ENV_ID__=n=>n}return t})(),Wd=class extends _r{_lView;constructor(e){super(),this._lView=e}get destroyed(){return On(this._lView)}onDestroy(e){let n=this._lView;return Df(n,e),()=>M_(n,e)}};function A0(){return new Wd(de())}var Rn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},At=new U("",{providedIn:"root",factory:()=>{let t=k(ct),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Rn),e.handleError(n))}}}),X_={provide:Vt,useValue:()=>void k(Rn),multi:!0},N0=new U("",{providedIn:"root",factory:()=>{let t=k(hi).defaultView;if(!t)return;let e=k(At),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),k(_r).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function M0(){return ai([v_(()=>void k(N0))])}function Lf(t){return typeof t=="function"&&t[Ge]!==void 0}function Fn(t,e){let[n,r,i]=Dd(t,e?.equal),o=n,s=o[Ge];return o.set=r,o.update=i,o.asReadonly=eE.bind(o),o}function eE(){let t=this[Ge];if(t.readonlyFn===void 0){let e=()=>this();e[Ge]=t,t.readonlyFn=e}return t.readonlyFn}function jf(t){return Lf(t)&&typeof t.set=="function"}var Ft=class{},rs=new U("",{providedIn:"root",factory:()=>!1});var Bf=new U(""),Sc=new U("");var Ac=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=R0}return t})();function R0(){return new Ac(de(),ze())}var un=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Lo(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new oe(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),Uf=(()=>{class t{internalPendingTasks=k(un);scheduler=k(Ft);errorHandler=k(At);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})();function is(...t){}var Hf=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>new Kd})}return t})(),Kd=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};var Nc={JSACTION:"jsaction"};function wi(t){return{toString:t}.toString()}var Mc="__parameters__";function H0(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function $0(t,e,n){return wi(()=>{let r=H0(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,d,h){let g=u.hasOwnProperty(Mc)?u[Mc]:Object.defineProperty(u,Mc,{value:[]})[Mc];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var G0=g_($0("Optional"),8);function q0(t){return typeof t=="function"}var Vc=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function LE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Tr=(()=>{let t=()=>jE;return t.ngInherit=!0,t})();function jE(t){return t.type.prototype.ngOnChanges&&(t.setInput=W0),z0}function z0(){let t=UE(this),e=t?.current;if(e){let n=t.previous;if(n===Pn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function W0(t,e,n,r,i){let o=this.declaredInputs[r],s=UE(t)||K0(t,{previous:Pn,current:null}),c=s.current||(s.current={}),u=s.previous,d=u[o];c[o]=new Vc(d&&d.currentValue,n,u===Pn),LE(t,e,i,n)}var BE="__ngSimpleChanges__";function UE(t){return t[BE]||null}function K0(t,e){return t[BE]=e}var tE=[];var ae=function(t,e=null,n){for(let r=0;r<tE.length;r++){let i=tE[r];i(t,e,n)}};function Q0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=jE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function HE(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function xc(t,e,n){$E(t,e,3,n)}function Pc(t,e,n,r){(t[$]&3)===n&&$E(t,e,n,r)}function $f(t,e){let n=t[$];(n&3)===e&&(n&=16383,n+=1,t[$]=n)}function $E(t,e,n,r){let i=r!==void 0?t[hr]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[hr]+=65536),(c<o||o==-1)&&(Y0(t,n,e,u),t[hr]=(t[hr]&4294901760)+u+2),u++}function nE(t,e){ae(4,t,e);let n=q(null);try{e.call(t)}finally{q(n),ae(5,t,e)}}function Y0(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[$]>>14<t[hr]>>16&&(t[$]&3)===e&&(t[$]+=16384,nE(c,o)):nE(c,o)}var gi=-1,Dr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Z0(t){return(t.flags&8)!==0}function J0(t){return(t.flags&16)!==0}function X0(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];tN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function eN(t){return t===3||t===4||t===6}function tN(t){return t.charCodeAt(0)===64}function vi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?rE(t,n,i,null,e[++r]):rE(t,n,i,null,null))}}return t}function rE(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function GE(t){return t!==gi}function Lc(t){return t&32767}function nN(t){return t>>16}function jc(t,e){let n=nN(t),r=e;for(;n>0;)r=r[dr],n--;return r}var nh=!0;function iE(t){let e=nh;return nh=t,e}var rN=256,qE=rN-1,zE=5,iN=0,Ut={};function oN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(lr)&&(r=n[lr]),r==null&&(r=n[lr]=iN++);let i=r&qE,o=1<<i;e.data[t+(i>>zE)]|=o}function Bc(t,e){let n=WE(t,e);if(n!==-1)return n;let r=e[V];r.firstCreatePass&&(t.injectorIndex=e.length,Gf(r.data,t),Gf(e,null),Gf(r.blueprint,null));let i=wh(t,e),o=t.injectorIndex;if(GE(i)){let s=Lc(i),c=jc(i,e),u=c[V].data;for(let d=0;d<8;d++)e[o+d]=c[s+d]|u[s+d]}return e[o+8]=i,o}function Gf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function WE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function wh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=JE(i),r===null)return gi;if(n++,i=i[dr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return gi}function rh(t,e,n){oN(t,e,n)}function KE(t,e,n){if(n&8||t!==void 0)return t;hc(e,"NodeInjector")}function QE(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[bt],o=st(void 0);try{return i?i.get(e,r,n&8):af(e,r,n&8)}finally{st(o)}}return KE(r,e,n)}function YE(t,e,n,r=0,i){if(t!==null){if(e[$]&2048&&!(r&2)){let s=lN(t,e,n,r,Ut);if(s!==Ut)return s}let o=ZE(t,e,n,r,Ut);if(o!==Ut)return o}return QE(e,n,r,i)}function ZE(t,e,n,r,i){let o=cN(n);if(typeof o=="function"){if(!Of(e,t,r))return r&1?KE(i,n,r):QE(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))hc(n);else return s}finally{kf()}}else if(typeof o=="number"){let s=null,c=WE(t,e),u=gi,d=r&1?e[nt][_t]:null;for((c===-1||r&4)&&(u=c===-1?wh(t,e):e[c+8],u===gi||!sE(r,!1)?c=-1:(s=e[V],c=Lc(u),e=jc(u,e)));c!==-1;){let h=e[V];if(oE(o,c,h.data)){let g=sN(c,e,n,s,r,d);if(g!==Ut)return g}u=e[c+8],u!==gi&&sE(r,e[V].data[c+8]===d)&&oE(o,c,e)?(s=h,c=Lc(u),e=jc(u,e)):c=-1}}return i}function sN(t,e,n,r,i,o){let s=e[V],c=s.data[t+8],u=r==null?an(c)&&nh:r!=s&&(c.type&3)!==0,d=i&1&&o===c,h=aN(c,s,n,u,d);return h!==null?Uc(e,s,h,c,i):Ut}function aN(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,d=t.directiveEnd,h=o>>20,g=r?c:c+h,m=i?c+h:d;for(let y=g;y<m;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&jt(y)&&y.type===n)return u}return null}function Uc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Dr){let c=o;if(c.resolving){let y=uc(s[n]);throw sf(y)}let u=iE(c.canSeeViewProviders);c.resolving=!0;let d=s[n].type||s[n],h,g=c.injectImpl?st(c.injectImpl):null,m=Of(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Q0(n,s[n],e)}finally{g!==null&&st(g),iE(u),c.resolving=!1,kf()}}return o}function cN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(lr)?t[lr]:void 0;return typeof e=="number"?e>=0?e&qE:uN:e}function oE(t,e,n){let r=1<<t;return!!(n[e+(t>>zE)]&r)}function sE(t,e){return!(t&2)&&!(t&1&&e)}var Ir=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return YE(this._tNode,this._lView,e,sr(r),n)}};function uN(){return new Ir(ze(),de())}function ps(t){return wi(()=>{let e=t.prototype.constructor,n=e[Go]||ih(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Go]||ih(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ih(t){return Zd(t)?()=>{let e=ih(ke(t));return e&&e()}:ar(t)}function lN(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[$]&2048&&!mr(s);){let c=ZE(o,s,n,r|2,Ut);if(c!==Ut)return c;let u=o.parent;if(!u){let d=s[yf];if(d){let h=d.get(n,Ut,r);if(h!==Ut)return h}u=JE(s),s=s[dr]}o=u}return i}function JE(t){let e=t[V],n=e.type;return n===2?e.declTNode:n===1?t[_t]:null}function dN(){return nu(ze(),de())}function nu(t,e){return new Ci(Et(t,e))}var Ci=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=dN}return t})();var XE="ngSkipHydration",fN="ngskiphydration";function eI(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===fN)return!0}return!1}function tI(t){return t.hasAttribute(XE)}function Hc(t){return(t.flags&128)===128}function nI(t){if(Hc(t))return!0;let e=t.parent;for(;e;){if(Hc(t)||eI(e))return!0;e=e.parent}return!1}var Ch=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Ch||{}),rI=new Map,hN=0;function pN(){return hN++}function gN(t){rI.set(t[Yo],t)}function oh(t){rI.delete(t[Yo])}var aE="__ngContext__";function _i(t,e){dt(e)?(t[aE]=e[Yo],gN(e)):t[aE]=e}function iI(t){return sI(t[ui])}function oI(t){return sI(t[vt])}function sI(t){for(;t!==null&&!ft(t);)t=t[vt];return t}var sh;function mN(t){sh=t}function gs(){if(sh!==void 0)return sh;if(typeof document<"u")return document;throw new K(210,!1)}var br=new U("",{providedIn:"root",factory:()=>yN}),yN="ng",aI=new U(""),vN=new U("",{providedIn:"platform",factory:()=>"unknown"});var _N=new U(""),EN=new U("",{providedIn:"root",factory:()=>gs().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function IN(){let t=new ms;return t.store=DN(gs(),k(br)),t}var ms=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:IN});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();function DN(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var cI="h",uI="b",wN="f",CN="n",lI="e",dI="t",ru="c",Th="x",as="r",fI="i",hI="n",bh="d";var pI="di",gI="s",mI="p";var ys=new U(""),yI=!1,Sh=new U("",{providedIn:"root",factory:()=>yI});var Ah=new U(""),vI=!1,_I=new U(""),Nh=new U("",{providedIn:"root",factory:()=>new Map});var vs="ngb";var EI=(t,e,n)=>{let r=t,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(n),i.set(e,o),r.__jsaction_fns=i},II=(t,e)=>{let n=t,r=n.getAttribute(vs)??"",i=e.get(r)??new Set;i.has(n)||i.add(n),e.set(r,i)};var DI=t=>{t.removeAttribute(Nc.JSACTION),t.removeAttribute(vs),t.__jsaction_fns=void 0},wI=new U("",{providedIn:"root",factory:()=>({})});function Mh(t,e){let n=e?.__jsaction_fns?.get(t.type);if(!(!n||!e?.isConnected))for(let r of n)r(t)}var ah=new Map;function CI(t,e){return ah.set(t,e),()=>ah.delete(t)}var cE=!1,TI=(t,e,n,r)=>{};function TN(t,e,n,r){TI(t,e,n,r)}function bI(){cE||(TI=(t,e,n,r)=>{let i=t[bt].get(br);ah.get(i)?.(e,n,r)},cE=!0)}var iu=new U("");function ou(t){return(t.flags&32)===32}var bN="__nghData__",Rh=bN,SN="__nghDeferData__",SI=SN;var Oc="ngh",AI="nghm",NI=()=>null;function AN(t,e,n=!1){let r=t.getAttribute(Oc);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",c=n?i:s,u={};if(r!==""){let h=e.get(ms,null,{optional:!0});h!==null&&(u=h.get(Rh,[])[Number(r)])}let d={data:u,firstChild:t.firstChild??null};return n&&(d.firstChild=t,su(d,0,t.nextSibling)),c?t.setAttribute(Oc,c):t.removeAttribute(Oc),d}function MI(){NI=AN}function RI(t,e,n=!1){return NI(t,e,n)}function xI(t){let e=t._lView;return e[V].type===2?null:(mr(e)&&(e=e[ge]),e)}function NN(t){return t.textContent?.replace(/\s/gm,"")}function MN(t){let e=gs(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=NN(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function su(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function ch(t,e){return t.segmentHeads?.[e]??null}function PI(t){return t.get(_I,!1,{optional:!0})}function RN(t,e){let n=t.data,r=n[lI]?.[e]??null;return r===null&&n[ru]?.[e]&&(r=xh(t,e)),r}function OI(t,e){return t.data[ru]?.[e]??null}function xh(t,e){let n=OI(t,e)??[],r=0;for(let i of n)r+=i[as]*(i[Th]??1);return r}function xN(t){if(typeof t.disconnectedNodes>"u"){let e=t.data[bh];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}function kI(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[bh];t.disconnectedNodes=n?new Set(n):null}return!!xN(t)?.has(e)}function au(t,e){let n=t[ut];return n!==null&&!Tf()&&!ou(e)&&!kI(n,e.index-ge)}function PN(t,e){let n=e.get(iu),i=e.get(ms).get(SI,{}),o=!1,s=t,c=null,u=[];for(;!o&&s;){o=n.has(s);let d=n.hydrating.get(s);if(c===null&&d!=null){c=d.promise;break}u.unshift(s),s=i[s][mI]}return{parentBlockPromise:c,hydrationQueue:u}}function qf(t){return!!t&&t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===AI}function uE(t){for(;t&&t.nodeType===Node.TEXT_NODE;)t=t.previousSibling;return t}function FI(t){for(let r of t.body.childNodes)if(qf(r))return;let e=uE(t.body.previousSibling);if(qf(e))return;let n=uE(t.head.lastChild);if(!qf(n))throw new K(-507,!1)}function VI(t,e){let n=t.contentQueries;if(n!==null){let r=q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Pf(o),c.contentQueries(2,e[s],s)}}}finally{q(r)}}}function uh(t,e,n){Pf(0);let r=q(null);try{e(t,n)}finally{q(r)}}function LI(t,e,n){if(vf(e)){let r=q(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{q(r)}}}var Ei=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Ei||{});var lh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qd})`}};function jI(t){return t instanceof lh?t.changingThisBreaksApplicationSecurity:t}var ON=/^>|^->|<!--|-->|--!>|<!-$/g,kN=/(<|>)/g,FN="\u200B$1\u200B";function VN(t){return t.replace(ON,e=>e.replace(kN,FN))}function BI(t){return t.ownerDocument.body}function UI(t){return t instanceof Function?t():t}function LN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var HI="ng-template";function jN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&LN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ph(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ph(t){return t.type===4&&t.value!==HI}function BN(t,e,n){let r=t.type===4&&!n?HI:t.value;return e===r}function UN(t,e,n){let r=4,i=t.attrs,o=i!==null?GN(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Nt(r)&&!Nt(u))return!1;if(s&&Nt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!BN(t,u,n)||u===""&&e.length===1){if(Nt(r))return!1;s=!0}}else if(r&8){if(i===null||!jN(t,i,u,n)){if(Nt(r))return!1;s=!0}}else{let d=e[++c],h=HN(u,i,Ph(t),n);if(h===-1){if(Nt(r))return!1;s=!0;continue}if(d!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(Nt(r))return!1;s=!0}}}}return Nt(r)||s}function Nt(t){return(t&1)===0}function HN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return qN(e,t)}function $N(t,e,n=!1){for(let r=0;r<e.length;r++)if(UN(t,e[r],n))return!0;return!1}function GN(t){for(let e=0;e<t.length;e++){let n=t[e];if(eN(n))return e}return t.length}function qN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function lE(t,e){return t?":not("+e.trim()+")":e}function zN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Nt(s)&&(e+=lE(o,i),i=""),r=s,o=o||!Nt(r);n++}return i!==""&&(e+=lE(o,i)),e}function WN(t){return t.map(zN).join(",")}function KN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Nt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var ln={};function $I(t,e){return t.createText(e)}function QN(t,e,n){t.setValue(e,n)}function GI(t,e){return t.createComment(VN(e))}function Oh(t,e,n){return t.createElement(e,n)}function $c(t,e,n,r,i){t.insertBefore(e,n,r,i)}function qI(t,e,n){t.appendChild(e,n)}function dE(t,e,n,r,i){r!==null?$c(t,e,n,r,i):qI(t,e,n)}function kh(t,e,n){t.removeChild(null,e,n)}function zI(t){t.textContent=""}function YN(t,e,n){t.setAttribute(e,"style",n)}function ZN(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function WI(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&X0(t,e,r),i!==null&&ZN(t,e,i),o!==null&&YN(t,e,o)}function Fh(t,e,n,r,i,o,s,c,u,d,h){let g=ge+r,m=g+i,y=JN(g,m),S=typeof d=="function"?d():d;return y[V]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function JN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ln);return n}function XN(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Fh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Vh(t,e,n,r,i,o,s,c,u,d,h){let g=e.blueprint.slice();return g[Je]=i,g[$]=r|4|128|8|64|1024,(d!==null||t&&t[$]&2048)&&(g[$]|=2048),Ef(g),g[De]=g[dr]=t,g[Ve]=n,g[sn]=s||t&&t[sn],g[he]=c||t&&t[he],g[bt]=u||t&&t[bt]||null,g[_t]=o,g[Yo]=pN(),g[ut]=h,g[yf]=d,g[nt]=e.type==2?t[nt]:g,g}function eM(t,e,n){let r=Et(e,t),i=XN(n),o=t[sn].rendererFactory,s=Lh(t,Vh(t,i,null,KI(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function KI(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function QI(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Lh(t,e){return t[ui]?t[mf][vt]=e:t[ui]=e,t[mf]=e,e}function tM(t=1){YI(Xe(),de(),vr()+t,!1)}function YI(t,e,n,r){if(!r)if((e[$]&3)===3){let o=t.preOrderCheckHooks;o!==null&&xc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Pc(e,o,0,n)}kn(n)}var cu=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(cu||{});function dh(t,e,n,r){let i=q(null);try{let[o,s,c]=t.inputs[n],u=null;(s&cu.SignalBased)!==0&&(u=e[o][Ge]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):LE(e,u,o,r)}finally{q(i)}}var cs=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(cs||{}),nM;function jh(t,e){return nM(t,e)}function pi(t,e,n,r,i){if(r!=null){let o,s=!1;ft(r)?o=r:dt(r)&&(s=!0,r=r[Je]);let c=ht(r);t===0&&n!==null?i==null?qI(e,n,c):$c(e,n,c,i||null,!0):t===1&&n!==null?$c(e,n,c,i||null,!0):t===2?kh(e,c,s):t===3&&e.destroyNode(c),o!=null&&pM(e,t,o,n,i)}}function rM(t,e){ZI(t,e),e[Je]=null,e[_t]=null}function iM(t,e,n,r,i,o){r[Je]=i,r[_t]=e,uu(t,r,n,1,i,o)}function ZI(t,e){e[sn].changeDetectionScheduler?.notify(9),uu(t,e,e[he],2,null,null)}function oM(t){let e=t[ui];if(!e)return zf(t[V],t);for(;e;){let n=null;if(dt(e))n=e[ui];else{let r=e[qe];r&&(n=r)}if(!n){for(;e&&!e[vt]&&e!==t;)dt(e)&&zf(e[V],e),e=e[De];e===null&&(e=t),dt(e)&&zf(e[V],e),n=e&&e[vt]}e=n}}function Bh(t,e){let n=t[Xo],r=n.indexOf(e);n.splice(r,1)}function Uh(t,e){if(On(e))return;let n=e[he];n.destroyNode&&uu(t,e,n,3,null,null),oM(e)}function zf(t,e){if(On(e))return;let n=q(null);try{e[$]&=-129,e[$]|=256,e[lt]&&ko(e[lt]),aM(t,e),sM(t,e),e[V].type===1&&e[he].destroy();let r=e[fr];if(r!==null&&ft(e[De])){r!==e[De]&&Bh(r,e);let i=e[pr];i!==null&&i.detachView(t)}oh(e)}finally{q(n)}}function sM(t,e){let n=t.cleanup,r=e[ci];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[ci]=null);let i=e[tn];if(i!==null){e[tn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Zo];if(o!==null){e[Zo]=null;for(let s of o)s.destroy()}}function aM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Dr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];ae(4,c,u);try{u.call(c)}finally{ae(5,c,u)}}else{ae(4,i,o);try{o.call(i)}finally{ae(5,i,o)}}}}}function cM(t,e,n){return uM(t,e.parent,n)}function uM(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Je];if(an(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ei.None||i===Ei.Emulated)return null}return Et(r,n)}function lM(t,e,n){return fM(t,e,n)}function dM(t,e,n){return t.type&40?Et(t,n):null}var fM=dM,fE;function Hh(t,e,n,r){let i=cM(t,r,e),o=e[he],s=r.parent||e[_t],c=lM(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)dE(o,i,n[u],c,!1);else dE(o,i,n,c,!1);fE!==void 0&&fE(o,r,e,n,i)}function os(t,e){if(e!==null){let n=e.type;if(n&3)return Et(e,t);if(n&4)return fh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return os(t,r);{let i=t[e.index];return ft(i)?fh(-1,i):ht(i)}}else{if(n&128)return os(t,e.next);if(n&32)return jh(e,t)()||ht(t[e.index]);{let r=JI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Mn(t[nt]);return os(i,r)}else return os(t,e.next)}}}return null}function JI(t,e){if(e!==null){let r=t[nt][_t],i=e.projection;return r.projection[i]}return null}function fh(t,e){let n=qe+t+1;if(n<e.length){let r=e[n],i=r[V].firstChild;if(i!==null)return os(r,i)}return e[Lt]}function $h(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&_i(ht(c),r),n.flags|=2),!ou(n))if(u&8)$h(t,e,n.child,r,i,o,!1),pi(e,t,i,c,o);else if(u&32){let d=jh(n,r),h;for(;h=d();)pi(e,t,i,h,o);pi(e,t,i,c,o)}else u&16?hM(t,e,r,n,i,o):pi(e,t,i,c,o);n=s?n.projectionNext:n.next}}function uu(t,e,n,r,i,o){$h(n,r,t.firstChild,e,i,o,!1)}function hM(t,e,n,r,i,o){let s=n[nt],u=s[_t].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let h=u[d];pi(e,t,i,h,o)}else{let d=u,h=s[De];Hc(r)&&(d.flags|=128),$h(t,e,d,h,i,o,!0)}}function pM(t,e,n,r,i){let o=n[Lt],s=ht(n);o!==s&&pi(e,t,r,o,i);for(let c=qe;c<n.length;c++){let u=n[c];uu(u[V],u,t,e,r,o)}}function gM(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:cs.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=cs.Important),t.setStyle(n,r,i,o))}}function XI(t,e,n,r,i){let o=vr(),s=r&2;try{kn(-1),s&&e.length>ge&&YI(t,e,ge,!1),ae(s?2:0,i,n),n(r,i)}finally{kn(o),ae(s?3:1,i,n)}}function Gh(t,e,n){DM(t,e,n),(n.flags&64)===64&&wM(t,e,n)}function lu(t,e,n=Et){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function mM(t,e,n,r){let o=r.get(Sh,yI)||n===Ei.ShadowDom,s=t.selectRootElement(e,o);return yM(s),s}function yM(t){eD(t)}var eD=()=>null;function vM(t){tI(t)?zI(t):MN(t)}function tD(){eD=vM}function _M(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function nD(t,e,n,r,i,o){let s=e[V];if(zh(t,s,e,n,r)){an(t)&&IM(e,t.index);return}t.type&3&&(n=_M(n)),EM(t,e,n,r,i,o)}function EM(t,e,n,r,i,o){if(t.type&3){let s=Et(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function IM(t,e){let n=It(e,t);n[$]&16||(n[$]|=64)}function DM(t,e,n){let r=n.directiveStart,i=n.directiveEnd;an(n)&&eM(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Bc(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=Uc(e,t,s,n);if(_i(u,e),o!==null&&SM(e,s-r,u,c,n,o),jt(c)){let d=It(n.index,e);d[Ve]=Uc(e,t,s,n)}}}function wM(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=q_();try{kn(o);for(let c=r;c<i;c++){let u=t.data[c],d=e[c];Dc(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&CM(u,d)}}finally{kn(-1),Dc(s)}}function CM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function rD(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];$N(e,o.selectors,!1)&&(r??=[],jt(o)?r.unshift(o):r.push(o))}return r}function TM(t,e,n,r,i,o){let s=Et(t,e);bM(e[he],s,o,t.value,n,r,i)}function bM(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let c=s==null?fc(o):s(o,r||"",i);t.setAttribute(e,i,c,n)}}function SM(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1];dh(r,n,u,d)}}function iD(t,e,n,r,i){let o=ge+n,s=e[V],c=i(s,e,t,r,n);e[o]=c,di(t,!0);let u=t.type===2;return u?(WI(e[he],c,t),(P_()===0||es(t))&&_i(c,e),O_()):_i(c,e),bc()&&(!u||!ou(t))&&Hh(s,e,c,t),t}function oD(t){let e=t;return Nf()?j_():(e=e.parent,di(e,!1)),e}function qh(t,e){let n=t[bt];if(!n)return;let r;try{r=n.get(At,null)}catch{r=null}r?.(e)}function zh(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let d=s[u],h=s[u+1],g=e.data[d];dh(g,n[d],h,i),c=!0}if(o)for(let u of o){let d=n[u],h=e.data[u];dh(h,d,r,i),c=!0}return c}function AM(t,e){let n=It(e,t),r=n[V];NM(r,n);let i=n[Je];i!==null&&n[ut]===null&&(n[ut]=RI(i,n[bt])),ae(18),Wh(r,n,n[Ve]),ae(19,n[Ve])}function NM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Wh(t,e,n){wc(e);try{let r=t.viewQuery;r!==null&&uh(1,r,n);let i=t.template;i!==null&&XI(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[pr]?.finishViewCreation(t),t.staticContentQueries&&VI(t,e),t.staticViewQueries&&uh(2,t.viewQuery,n);let o=t.components;o!==null&&MM(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[$]&=-5,Cc()}}function MM(t,e){for(let n=0;n<e.length;n++)AM(t,e[n])}function Kh(t,e,n,r){let i=q(null);try{let o=e.tView,c=t[$]&4096?4096:16,u=Vh(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=t[e.index];u[fr]=d;let h=t[pr];return h!==null&&(u[pr]=h.createEmbeddedView(o)),Wh(o,u,n),u}finally{q(i)}}function Gc(t,e){return!e||e.firstChild===null||Hc(t)}var hE=!1,RM=new U("");function us(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(ht(o)),ft(o)&&sD(o,r);let s=n.type;if(s&8)us(t,e,n.child,r);else if(s&32){let c=jh(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=JI(e,n);if(Array.isArray(c))r.push(...c);else{let u=Mn(e[nt]);us(u[V],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function sD(t,e){for(let n=qe;n<t.length;n++){let r=t[n],i=r[V].firstChild;i!==null&&us(r[V],r,i,e)}t[Lt]!==t[Je]&&e.push(t[Lt])}function aD(t){if(t[gr]!==null){for(let e of t[gr])e.impl.addSequence(e);t[gr].length=0}}var cD=[];function xM(t){return t[lt]??PM(t)}function PM(t){let e=cD.pop()??Object.create(kM);return e.lView=t,e}function OM(t){t.lView[lt]!==t&&(t.lView=null,cD.push(t))}var kM=ce(H({},Qr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{li(t.lView)},consumerOnSignalRead(){this.lView[lt]=this}});function FM(t){let e=t[lt]??Object.create(VM);return e.lView=t,e}var VM=ce(H({},Qr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Mn(t.lView);for(;e&&!uD(e[V]);)e=Mn(e);e&&If(e)},consumerOnSignalRead(){this.lView[lt]=this}});function uD(t){return t.type!==2}function lD(t){if(t[Zo]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Zo])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[$]&8192)}}var LM=100;function Qh(t,e=0){let r=t[sn].rendererFactory,i=!1;i||r.begin?.();try{jM(t,e)}finally{i||r.end?.()}}function jM(t,e){let n=Rf();try{xf(!0),hh(t,e);let r=0;for(;ts(t);){if(r===LM)throw new K(103,!1);r++,hh(t,1)}}finally{xf(n)}}function dD(t,e){Mf(e?ns.Exhaustive:ns.OnlyDirtyViews);try{Qh(t)}finally{Mf(ns.Off)}}function BM(t,e,n,r){if(On(e))return;let i=e[$],o=!1,s=!1;wc(e);let c=!0,u=null,d=null;o||(uD(t)?(d=xM(e),u=Zr(d)):Pa()===null?(c=!1,d=FM(e),u=Zr(d)):e[lt]&&(ko(e[lt]),e[lt]=null));try{Ef(e),U_(t.bindingStartIndex),n!==null&&XI(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&xc(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Pc(e,y,0,null),$f(e,0)}if(s||UM(e),lD(e),fD(e,0),t.contentQueries!==null&&VI(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&xc(e,y)}else{let y=t.contentHooks;y!==null&&Pc(e,y,1),$f(e,1)}$M(t,e);let g=t.components;g!==null&&pD(e,g,0);let m=t.viewQuery;if(m!==null&&uh(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&xc(e,y)}else{let y=t.viewHooks;y!==null&&Pc(e,y,2),$f(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[_c]){for(let y of e[_c])y();e[_c]=null}o||(aD(e),e[$]&=-73)}catch(h){throw o||li(e),h}finally{d!==null&&(Po(d,u),c&&OM(d)),Cc()}}function fD(t,e){for(let n=iI(t);n!==null;n=oI(n))for(let r=qe;r<n.length;r++){let i=n[r];hD(i,e)}}function UM(t){for(let e=iI(t);e!==null;e=oI(e)){if(!(e[$]&2))continue;let n=e[Xo];for(let r=0;r<n.length;r++){let i=n[r];If(i)}}}function HM(t,e,n){ae(18);let r=It(e,t);hD(r,n),ae(19,r[Ve])}function hD(t,e){Ec(t)&&hh(t,e)}function hh(t,e){let r=t[V],i=t[$],o=t[lt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Oo(o)),s||=!1,o&&(o.dirty=!1),t[$]&=-9217,s)BM(r,t,r.template,t[Ve]);else if(i&8192){let c=q(null);try{lD(t),fD(t,1);let u=r.components;u!==null&&pD(t,u,1),aD(t)}finally{q(c)}}}function pD(t,e,n){for(let r=0;r<e.length;r++)HM(t,e[r],n)}function $M(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)kn(~i);else{let o=i,s=n[++r],c=n[++r];G_(s,o);let u=e[o];ae(24,u),c(2,u),ae(25,u)}}}finally{kn(-1)}}function du(t,e){let n=Rf()?64:1088;for(t[sn].changeDetectionScheduler?.notify(e);t;){t[$]|=n;let r=Mn(t);if(mr(t)&&!r)return t;t=r}return null}function gD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function GM(t,e){let n=qe+e;if(n<t.length)return t[n]}function Yh(t,e,n,r=!0){let i=e[V];if(qM(i,e,t,n),r){let s=fh(n,t),c=e[he],u=c.parentNode(t[Lt]);u!==null&&iM(i,t[_t],c,e,u,s)}let o=e[ut];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function mD(t,e){let n=qc(t,e);return n!==void 0&&Uh(n[V],n),n}function qc(t,e){if(t.length<=qe)return;let n=qe+e,r=t[n];if(r){let i=r[fr];i!==null&&i!==t&&Bh(i,r),e>0&&(t[n-1][vt]=r[vt]);let o=Ko(t,qe+e);rM(r[V],r);let s=o[pr];s!==null&&s.detachView(o[V]),r[De]=null,r[vt]=null,r[$]&=-129}return r}function qM(t,e,n,r){let i=qe+r,o=n.length;r>0&&(n[i-1][vt]=e),r<o-qe?(e[vt]=n[i],cf(n,qe+r,e)):(n.push(e),e[vt]=null),e[De]=n;let s=e[fr];s!==null&&n!==s&&yD(s,e);let c=e[pr];c!==null&&c.insertView(t),Ic(e),e[$]|=128}function yD(t,e){let n=t[Xo],r=e[De];if(dt(r))t[$]|=2;else{let i=r[De][nt];e[nt]!==i&&(t[$]|=2)}n===null?t[Xo]=[e]:n.push(e)}var Vn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[V];return us(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Ve]}set context(e){this._lView[Ve]=e}get destroyed(){return On(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[De];if(ft(e)){let n=e[Jo],r=n?n.indexOf(this):-1;r>-1&&(qc(e,r),Ko(n,r))}this._attachedToViewContainer=!1}Uh(this._lView[V],this._lView)}onDestroy(e){Df(this._lView,e)}markForCheck(){du(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$]&=-129}reattach(){Ic(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,Qh(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=mr(this._lView),n=this._lView[fr];n!==null&&!e&&Bh(n,this._lView),ZI(this._lView[V],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let n=mr(this._lView),r=this._lView[fr];r!==null&&!n&&yD(r,this._lView),Ic(this._lView)}};var _s=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=zM;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Kh(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Vn(o)}}return t})();function zM(){return WM(ze(),de())}function WM(t,e){return t.type&4?new _s(e,t,nu(t,e)):null}function Es(t,e,n,r,i){let o=t.data[e];if(o===null)o=KM(t,e,n,r,i),$_()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=L_();o.injectorIndex=s===null?-1:s.injectorIndex}return di(o,!0),o}function KM(t,e,n,r,i){let o=Af(),s=Nf(),c=s?o:o&&o.parent,u=t.data[e]=YM(t,c,n,e,r,i);return QM(t,u,o,s),u}function QM(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function YM(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return Tf()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var ZM=new RegExp(`^(\\d+)*(${uI}|${cI})*(.*)`);function JM(t){let e=t.match(ZM),[n,r,i,o]=e,s=r?parseInt(r,10):i,c=[];for(let[u,d,h]of o.matchAll(/(f|n)(\d*)/g)){let g=parseInt(h,10)||1;c.push(d,g)}return[s,...c]}function XM(t){return!t.prev&&t.parent?.type===8}function Wf(t){return t.index-ge}function eR(t,e){let n=t.i18nNodes;if(n)return n.get(e)}function fu(t,e,n,r){let i=Wf(r),o=eR(t,i);if(o===void 0){let s=t.data[hI];if(s?.[i])o=nR(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{let c=r.prev===null,u=r.prev??r.parent;if(XM(r)){let d=Wf(r.parent);o=ch(t,d)}else{let d=Et(u,n);if(c)o=d.firstChild;else{let h=Wf(u),g=ch(t,h);if(u.type===2&&g){let y=xh(t,h)+1;o=hu(y,g)}else o=d.nextSibling}}}}return o}function hu(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function tR(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case wN:n=n.firstChild;break;case CN:n=n.nextSibling;break}}return n}function nR(t,e){let[n,...r]=JM(t),i;if(n===cI)i=e[nt][Je];else if(n===uI)i=BI(e[nt][Je]);else{let o=Number(n);i=ht(e[o+ge])}return tR(i,r)}var rR=!1;function vD(t){rR=t}function iR(t){let e=t[ut];if(e){let{i18nNodes:n,dehydratedIcuData:r}=e;if(n&&r){let i=t[he];for(let o of r.values())oR(i,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function oR(t,e,n){for(let r of n.node.cases[n.case]){let i=e.get(r.index-ge);i&&kh(t,i,!1)}}function Zh(t){let e=t[St]??[],r=t[De][he],i=[];for(let o of e)o.data[pI]!==void 0?i.push(o):_D(o,r);t[St]=i}function sR(t){let{lContainer:e}=t,n=e[St];if(n===null)return;let i=e[De][he];for(let o of n)_D(o,i)}function _D(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[as];for(;n<i;){let o=r.nextSibling;kh(e,r,!1),r=o,n++}}}function pu(t){Zh(t);let e=t[Je];dt(e)&&zc(e);for(let n=qe;n<t.length;n++)zc(t[n])}function zc(t){iR(t);let e=t[V];for(let n=ge;n<e.bindingStartIndex;n++)if(ft(t[n])){let r=t[n];pu(r)}else dt(t[n])&&zc(t[n])}function Jh(t){let e=t._views;for(let n of e){let r=xI(n);r!==null&&r[Je]!==null&&(dt(r)?zc(r):pu(r))}}function aR(t,e,n,r){t!==null&&(n.cleanup(e),pu(t.lContainer),Jh(r))}function cR(t,e){let n=[];for(let r of e)for(let i=0;i<(r[Th]??1);i++){let o={data:r,firstChild:null};r[as]>0&&(o.firstChild=t,t=hu(r[as],t)),n.push(o)}return[t,n]}var ED=()=>null,ID=()=>null;function DD(){ED=uR,ID=lR}function uR(t,e){return wD(t,e)?t[St].shift():(Zh(t),null)}function ph(t,e){return ED(t,e)}function lR(t,e,n){if(e.tView.ssrId===null)return null;let r=ph(t,e.tView.ssrId);return n[V].firstUpdatePass&&r===null&&fR(n,e),r}function dR(t,e,n){return ID(t,e,n)}function fR(t,e){let n=e;for(;n;){if(pE(t,n))return;if((n.flags&256)===256)break;n=n.prev}for(n=e.next;n&&(n.flags&512)===512;){if(pE(t,n))return;n=n.next}}function wD(t,e){let n=t[St];return!e||n===null||n.length===0?!1:n[0].data[fI]===e}function pE(t,e){let n=e.tView?.ssrId;if(n==null)return!1;let r=t[e.index];return ft(r)&&wD(r,n)?(Zh(r),!0):!1}var CD=class{},gu=class{},gh=class{resolveComponentFactory(e){throw new K(917,!1)}},Is=class{static NULL=new gh},ls=class{},Ds=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>hR()}return t})();function hR(){let t=de(),e=ze(),n=It(e.index,t);return(dt(n)?n:t)[he]}var TD=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>null})}return t})();var kc={},mi=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,kc,r);return i!==kc||n===kc?i:this.parentInjector.get(e,n,r)}};function Wc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Yd(i,c);else if(o==2){let u=c,d=e[++s];r=Yd(r,u+": "+d+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ee(t,e=0){let n=de();if(n===null)return Fe(t,e);let r=ze();return YE(r,n,ke(t),e)}function bD(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,d=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,d]=h.resolveHostDirectives(s);break}mR(t,e,n,c,o,u,d)}o!==null&&r!==null&&pR(n,r,o)}function pR(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new K(-301,!1);r.push(e[i],o)}}function gR(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function mR(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&jt(y)&&(u=!0,gR(t,n,m)),rh(Bc(n,e),t,y.type)}DR(n,t.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let d=!1,h=!1,g=QI(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=vi(n.mergedAttrs,y.hostAttrs),vR(t,n,e,g,y),IR(g,y,i),s!==null&&s.has(y)){let[M,A]=s.get(y);n.directiveToIndex.set(y.type,[g,M+n.directiveStart,A+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,g);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!d&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),d=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),g++}yR(t,n,o)}function yR(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))gE(0,e,i,r),gE(1,e,i,r),yE(e,r,!1);else{let o=n.get(i);mE(0,e,o,r),mE(1,e,o,r),yE(e,r,!0)}}}function gE(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),SD(e,o)}}function mE(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),SD(e,s)}}function SD(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function yE(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Ph(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let d=i[u];for(let h of d)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let d=o[u];for(let h=0;h<d.length;h+=2)if(d[h]===e){s??=[],s.push(d[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function vR(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ar(i.type,!0)),s=new Dr(o,jt(i),ee,null);t.blueprint[r]=s,n[r]=s,_R(t,e,r,QI(t,n,i.hostVars,ln),i)}function _R(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;ER(s)!=c&&s.push(c),s.push(n,r,o)}}function ER(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function IR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;jt(e)&&(n[""]=t)}}function DR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function AD(t,e,n,r,i,o,s,c){let u=e[V],d=u.consts,h=Bt(d,s),g=Es(u,t,n,r,h);return o&&bD(u,e,g,Bt(d,c),i),g.mergedAttrs=vi(g.mergedAttrs,g.attrs),g.attrs!==null&&Wc(g,g.attrs,!1),g.mergedAttrs!==null&&Wc(g,g.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,g),g}function ND(t,e){HE(t,e),vf(e)&&t.queries.elementEnd(e)}function wR(t,e,n,r,i,o){let s=e.consts,c=Bt(s,i),u=Es(e,t,n,r,c);if(u.mergedAttrs=vi(u.mergedAttrs,u.attrs),o!=null){let d=Bt(s,o);u.localNames=[];for(let h=0;h<d.length;h+=2)u.localNames.push(d[h],-1)}return u.attrs!==null&&Wc(u,u.attrs,!1),u.mergedAttrs!==null&&Wc(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Xh(t){return RD(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function MD(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function RD(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Ti(t,e,n){if(n===ln)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Kf(t,e,n){return function r(i){let o=an(t)?It(t.index,e):e;du(o,5);let s=e[Ve],c=vE(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=vE(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function vE(t,e,n,r){let i=q(null);try{return ae(6,e,n),n(r)!==!1}catch(o){return qh(t,o),!1}finally{ae(7,e,n),q(i)}}function CR(t,e,n,r,i,o,s,c){let u=es(t),d=!1,h=null;if(!r&&u&&(h=TR(e,n,o,t.index)),h!==null){let g=h.__ngLastListenerFn__||h;g.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,d=!0}else{let g=Et(t,n),m=r?r(g):g;TN(n,m,o,c);let y=i.listen(m,o,c),S=r?M=>r(ht(M[t.index])):t.index;xD(S,e,n,o,c,y,!1)}return d}function TR(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[ci],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function xD(t,e,n,r,i,o,s){let c=e.firstCreatePass?x_(e):null,u=R_(n),d=u.length;u.push(i,o),c&&c.push(r,t,d,(d+1)*(s?-1:1))}function _E(t,e,n,r,i,o){let s=e[n],c=e[V],d=c.data[n].outputs[r],g=s[d].subscribe(o);xD(t.index,c,e,i,o,g,!0)}var mh=Symbol("BINDING");var Kc=class extends Is{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=on(e);return new Ii(n,this.ngModule)}};function bR(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&cu.SignalBased)!==0};return i&&(o.transform=i),o})}function SR(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function AR(t,e,n){let r=e instanceof ct?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new mi(n,r):n}function NR(t){let e=t.get(ls,null);if(e===null)throw new K(407,!1);let n=t.get(TD,null),r=t.get(Ft,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function MR(t,e){let n=PD(t);return Oh(e,n,n==="svg"?T_:n==="math"?b_:null)}function PD(t){return(t.selectors[0][0]||"div").toLowerCase()}var Ii=class extends gu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=bR(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=SR(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=WN(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ae(22);let c=q(null);try{let u=this.componentDef,d=RR(r,u,s,o),h=AR(u,i||this.ngModule,e),g=NR(h),m=g.rendererFactory.createRenderer(null,u),y=r?mM(m,r,u.encapsulation,h):MR(u,m),S=s?.some(EE)||o?.some(O=>typeof O!="function"&&O.bindings.some(EE)),M=Vh(null,d,null,512|KI(u),null,null,g,m,h,null,RI(y,h,!0));M[ge]=y,wc(M);let A=null;try{let O=AD(ge,M,2,"#host",()=>d.directiveRegistry,!0,0);y&&(WI(m,y,O),_i(y,M)),Gh(d,M,O),LI(d,O,M),ND(d,O),n!==void 0&&PR(O,this.ngContentSelectors,n),A=It(O.index,M),M[Ve]=A[Ve],Wh(d,M,null)}catch(O){throw A!==null&&oh(A),oh(M),O}finally{ae(23),Cc()}return new Qc(this.componentType,M,!!S)}finally{q(c)}}};function RR(t,e,n,r){let i=t?["ng-version","20.2.4"]:KN(e.selectors[0]),o=null,s=null,c=0;if(n)for(let h of n)c+=h[mh].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let g=r[h];if(typeof g!="function")for(let m of g.bindings){c+=m[mh].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let g=typeof h=="function"?h:h.type,m=mc(g);u.push(m)}return Fh(0,null,xR(o,s),1,c,u,null,null,null,[i],null)}function xR(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function EE(t){let e=t[mh].kind;return e==="input"||e==="twoWay"}var Qc=class extends CD{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=yr(n[V],ge),this.location=nu(this._tNode,n),this.instance=It(this._tNode.index,n)[Ve],this.hostView=this.changeDetectorRef=new Vn(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=zh(r,i[V],i,e,n);this.previousInputValues.set(e,n);let s=It(r.index,i);du(s,1)}get injector(){return new Ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function PR(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ws=(()=>{class t{static __NG_ELEMENT_ID__=OR}return t})();function OR(){let t=ze();return FR(t,de())}var kR=ws,OD=class extends kR{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return nu(this._hostTNode,this._hostLView)}get injector(){return new Ir(this._hostTNode,this._hostLView)}get parentInjector(){let e=wh(this._hostTNode,this._hostLView);if(GE(e)){let n=jc(e,this._hostLView),r=Lc(e),i=n[V].data[r+8];return new Ir(i,n)}else return new Ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=IE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-qe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ph(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,Gc(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!q0(e),d;if(u)d=n;else{let A=n||{};d=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,c=A.bindings}let h=u?e:new Ii(on(e)),g=r||this.parentInjector;if(!o&&h.ngModule==null){let O=(u?g:this.parentInjector).get(ct,null);O&&(o=O)}let m=on(h.componentType??{}),y=ph(this._lContainer,m?.id??null),S=y?.firstChild??null,M=h.create(g,i,S,o,s,c);return this.insertImpl(M.hostView,d,Gc(this._hostTNode,y)),M}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(A_(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[De],d=new OD(u,u[_t],u[De]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Yh(s,i,o,r),e.attachToViewContainerRef(),cf(Qf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=IE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=qc(this._lContainer,n);r&&(Ko(Qf(this._lContainer),n),Uh(r[V],r))}detach(e){let n=this._adjustIndex(e,-1),r=qc(this._lContainer,n);return r&&Ko(Qf(this._lContainer),n)!=null?new Vn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function IE(t){return t[Jo]}function Qf(t){return t[Jo]||(t[Jo]=[])}function FR(t,e){let n,r=e[t.index];return ft(r)?n=r:(n=gD(r,e,null,t),e[t.index]=n,Lh(e,n)),kD(n,e,t,r),new OD(n,t,e)}function VR(t,e){let n=t[he],r=n.createComment(""),i=Et(e,t),o=n.parentNode(i);return $c(n,o,r,n.nextSibling(i),!1),r}var kD=FD,ep=()=>!1;function LR(t,e,n){return ep(t,e,n)}function FD(t,e,n,r){if(t[Lt])return;let i;n.type&8?i=ht(r):i=VR(e,n),t[Lt]=i}function jR(t,e,n){if(t[Lt]&&t[St])return!0;let r=n[ut],i=e.index-ge;if(!r||nI(e)||kI(r,i))return!1;let s=ch(r,i),c=r.data[ru]?.[i],[u,d]=cR(s,c);return t[Lt]=u,t[St]=d,!0}function BR(t,e,n,r){ep(t,n,e)||FD(t,e,n,r)}function VD(){kD=BR,ep=jR}var DE=new Set;function dn(t){DE.has(t)||(DE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var wr=class{},LD=class{};var Yc=class extends wr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Kc(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=df(e);this._bootstrapComponents=UI(o.bootstrap),this._r3Injector=Vf(e,n,[{provide:wr,useValue:this},{provide:Is,useValue:this.componentFactoryResolver},...r],nn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zc=class extends LD{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Yc(this.moduleType,e,[])}};var ds=class extends wr{injector;componentFactoryResolver=new Kc(this);instance=null;constructor(e){super();let n=new ur([...e.providers,{provide:wr,useValue:this},{provide:Is,useValue:this.componentFactoryResolver}],e.parent||Qo(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tp(t,e,n=null){return new ds({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var UR=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=yc(!1,n.type),i=r.length>0?tp([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=le({token:t,providedIn:"environment",factory:()=>new t(Fe(ct))})}return t})();function HR(t){return wi(()=>{let e=jD(t),n=ce(H({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ch.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(UR).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ei.Emulated,styles:t.styles||at,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&dn("NgStandalone"),BD(n);let r=t.dependencies;return n.directiveDefs=wE(r,$R),n.pipeDefs=wE(r,ff),n.id=zR(n),n})}function $R(t){return on(t)||mc(t)}function Sr(t){return wi(()=>({type:t.type,bootstrap:t.bootstrap||at,declarations:t.declarations||at,imports:t.imports||at,exports:t.exports||at,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function GR(t,e){if(t==null)return Pn;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=cu.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function qR(t){if(t==null)return Pn;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Me(t){return wi(()=>{let e=jD(t);return BD(e),e})}function jD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Pn,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||at,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:GR(t.inputs,e),outputs:qR(t.outputs),debugInfo:null}}function BD(t){t.features?.forEach(e=>e(t))}function wE(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function zR(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function WR(t){return Object.getPrototypeOf(t.prototype).constructor}function gt(t){let e=WR(t.type),n=!0,r=[t];for(;e;){let i;if(jt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Yf(t.inputs),s.declaredInputs=Yf(t.declaredInputs),s.outputs=Yf(t.outputs);let c=i.hostBindings;c&&JR(t,c);let u=i.viewQuery,d=i.contentQueries;if(u&&YR(t,u),d&&ZR(t,d),KR(t,i),l_(t.outputs,i.outputs),jt(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===gt&&(n=!1)}}e=Object.getPrototypeOf(e)}QR(r)}function KR(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function QR(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=vi(i.hostAttrs,n=vi(n,i.hostAttrs))}}function Yf(t){return t===Pn?{}:t===at?[]:t}function YR(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function ZR(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function JR(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function UD(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=vi(t.mergedAttrs,t.attrs);let h=t.tView=Fh(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),di(t,!1);let u=GD(n,e,t,r);bc()&&Hh(n,e,u,t),_i(u,e);let d=gD(u,e,u,t);e[r+ge]=d,Lh(e,d),LR(d,t,e)}function XR(t,e,n,r,i,o,s,c,u,d,h){let g=n+ge,m;return e.firstCreatePass?(m=Es(e,g,4,s||null,c||null),Cf()&&bD(e,t,m,Bt(e.consts,d),rD),HE(e,m)):m=e.data[g],UD(m,t,e,n,r,i,o,u),es(m)&&Gh(e,t,m),d!=null&&lu(t,m,h),m}function HD(t,e,n,r,i,o,s,c,u,d,h){let g=n+ge,m;if(e.firstCreatePass){if(m=Es(e,g,4,s||null,c||null),d!=null){let y=Bt(e.consts,d);m.localNames=[];for(let S=0;S<y.length;S+=2)m.localNames.push(y[S],-1)}}else m=e.data[g];return UD(m,t,e,n,r,i,o,u),d!=null&&lu(t,m,h),m}function $D(t,e,n,r,i,o,s,c){let u=de(),d=Xe(),h=Bt(d.consts,o);return XR(u,d,t,e,n,r,i,h,void 0,s,c),$D}var GD=qD;function qD(t,e,n,r){return cn(!0),e[he].createComment("")}function ex(t,e,n,r){let i=!au(e,n);cn(i);let o=e[ut]?.data[dI]?.[r]??null;if(o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o),i)return qD(t,e);let s=e[ut],c=fu(s,t,e,n);su(s,r,c);let u=xh(s,r);return hu(u,c)}function zD(){GD=ex}var pt=(function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t})(pt||{}),CE=0,tx=1,we=(function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t})(we||{});var nx=0,Cs=1;var rx=4,ix=5;var ox=7,yi=8,sx=9,np=(function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t})(np||{});function Fc(t,e){let n=cx(t),r=e[n];if(r!==null){for(let i of r)i();e[n]=null}}function ax(t){Fc(1,t),Fc(0,t),Fc(2,t)}function cx(t){let e=rx;return t===1?e=ix:t===2&&(e=sx),e}var mu=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(mu||{}),Ts=new U(""),WD=!1,yh=class extends Tt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,w_()&&(this.destroyRef=k(_r,{optional:!0})??void 0,this.pendingTasks=k(un,{optional:!0})??void 0)}emit(e){let n=q(null);try{super.next(e)}finally{q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ne&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},We=yh;function KD(t){let e,n;function r(){t=is;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function TE(t){return queueMicrotask(()=>t()),()=>{t=is}}var rp="isAngularZone",Jc=rp+"_ID",ux=0,et=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new We(!1);onMicrotaskEmpty=new We(!1);onStable=new We(!1);onError=new We(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=WD}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,fx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new K(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,lx,is,is);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},lx={};function ip(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function dx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){KD(()=>{t.callbackScheduled=!1,vh(t),t.isCheckStableRunning=!0,ip(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),vh(t)}function fx(t){let e=()=>{dx(t)},n=ux++;t._inner=t._inner.fork({name:"angular",properties:{[rp]:!0,[Jc]:n,[Jc+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(hx(u))return r.invokeTask(o,s,c,u);try{return bE(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),SE(t)}},onInvoke:(r,i,o,s,c,u,d)=>{try{return bE(t),r.invoke(o,s,c,u,d)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!px(u)&&e(),SE(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,vh(t),ip(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function vh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function bE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function SE(t){t._nesting--,ip(t)}var fs=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new We;onMicrotaskEmpty=new We;onStable=new We;onError=new We;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function hx(t){return QD(t,"__ignore_ng_zone__")}function px(t){return QD(t,"__scheduler_tick__")}function QD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var op=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),YD=[0,1,2,3],ZD=(()=>{class t{ngZone=k(et);scheduler=k(Ft);errorHandler=k(Rn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(Ts,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ae(16),this.executing=!0;for(let r of YD)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ae(17)}register(n){let{view:r}=n;r!==void 0?((r[gr]??=[]).push(n),li(r),r[$]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(mu.AFTER_NEXT_RENDER,n):n()}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),Xc=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[gr];e&&(this.view[gr]=e.filter(n=>n!==this))}};function sp(t,e){let n=e?.injector??k(rn);return dn("NgAfterNextRender"),mx(t,n,e,!0)}function gx(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function mx(t,e,n,r){let i=e.get(op);i.impl??=e.get(ZD);let o=e.get(Ts,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(_r):null,c=e.get(Ac,null,{optional:!0}),u=new Xc(i.impl,gx(t),c?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}function JD(t){return t+1}function bi(t,e){let n=t[V],r=JD(e.index);return t[r]}function bs(t,e){let n=JD(e.index);return t.data[n]}function yx(t,e,n){let r=e[V],i=bs(r,n);switch(t){case we.Complete:return i.primaryTmplIndex;case we.Loading:return i.loadingTmplIndex;case we.Error:return i.errorTmplIndex;case we.Placeholder:return i.placeholderTmplIndex;default:return null}}function AE(t,e){return e===we.Placeholder?t.placeholderBlockConfig?.[CE]??null:e===we.Loading?t.loadingBlockConfig?.[CE]??null:null}function vx(t){return t.loadingBlockConfig?.[tx]??null}function NE(t,e){if(!t||t.length===0)return e;let n=new Set(t);for(let r of e)n.add(r);return t.length===n.size?t:Array.from(n)}function _x(t,e){let n=e.primaryTmplIndex+ge;return yr(t,n)}var Ex=(()=>{class t{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?tp(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=le({token:t,providedIn:"environment",factory:()=>new t})}return t})();var XD=new U("");function Zf(t,e,n){return t.get(Ex).getOrCreateInjector(e,t,n,"")}function Ix(t,e,n){if(t instanceof mi){let i=t.injector,o=t.parentInjector,s=Zf(o,e,n);return new mi(i,s)}let r=t.get(ct);if(r!==t){let i=Zf(r,e,n);return new mi(t,i)}return Zf(t,e,n)}function Er(t,e,n,r=!1){let i=n[De],o=i[V];if(On(i))return;let s=bi(i,e),c=s[Cs],u=s[ox];if(!(u!==null&&t<u)&&ME(c,t)&&ME(s[nx]??-1,t)){let d=bs(o,e),g=!r&&!0&&(vx(d)!==null||AE(d,we.Loading)!==null||AE(d,we.Placeholder))?Cx:wx;try{g(t,s,n,e,i)}catch(m){qh(i,m)}}}function Dx(t,e){let n=t[St]?.findIndex(i=>i.data[gI]===e[Cs])??-1;return{dehydratedView:n>-1?t[St][n]:null,dehydratedViewIx:n}}function wx(t,e,n,r,i){ae(20);let o=yx(t,i,r);if(o!==null){e[Cs]=t;let s=i[V],c=o+ge,u=yr(s,c),d=0;mD(n,d);let h;if(t===we.Complete){let S=bs(s,r),M=S.providers;M&&M.length>0&&(h=Ix(i[bt],S,M))}let{dehydratedView:g,dehydratedViewIx:m}=Dx(n,e),y=Kh(i,u,null,{injector:h,dehydratedView:g});if(Yh(n,y,d,Gc(u,g)),du(y,2),m>-1&&n[St]?.splice(m,1),(t===we.Complete||t===we.Error)&&Array.isArray(e[yi])){for(let S of e[yi])S();e[yi]=null}}ae(21)}function ME(t,e){return t<e}function RE(t,e,n){t.loadingPromise.then(()=>{t.loadingState===pt.COMPLETE?Er(we.Complete,e,n):t.loadingState===pt.FAILED&&Er(we.Error,e,n)})}var Cx=null;var Tx=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var ew=new U("");function Si(t){return!!t&&typeof t.then=="function"}function ap(t){return!!t&&typeof t.subscribe=="function"}var tw=new U("");var cp=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=k(tw,{optional:!0})??[];injector=k(rn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=vc(this.injector,i);if(Si(o))n.push(o);else if(ap(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yu=new U("");function nw(){Id(()=>{let t="";throw new K(600,t)})}function rw(t){return t.isBoundToModule}var bx=10;var Ht=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(At);afterRenderManager=k(op);zonelessEnabled=k(rs);rootEffectScheduler=k(Hf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Tt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(un);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(en(n=>!n))}constructor(){k(Ts,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=k(ct);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=rn.NULL){return this._injector.get(et).run(()=>{ae(10);let s=n instanceof gu;if(!this._injector.get(cp).done){let S="";throw new K(405,S)}let u;s?u=n:u=this._injector.get(Is).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let d=rw(u)?void 0:this._injector.get(wr),h=r||u.selector,g=u.create(i,[],h,d),m=g.location.nativeElement,y=g.injector.get(ew,null);return y?.registerApplication(m),g.onDestroy(()=>{this.detachView(g.hostView),ss(this.components,g),y?.unregisterApplication(m)}),this._loadComponent(g),ae(11,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ae(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(mu.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new K(101,!1);let n=q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,q(n),this.afterTick.next(),ae(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ls,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<bx;)ae(14),this.synchronizeOnce(),ae(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ts(i))continue;let o=r&&!this.zonelessEnabled?0:1;Qh(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ts(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ss(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(yu,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ss(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new K(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ss(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function iw(t,e,n){let r=e[bt],i=e[V];if(t.loadingState!==pt.NOT_STARTED)return t.loadingPromise??Promise.resolve();let o=bi(e,n),s=_x(i,t);t.loadingState=pt.IN_PROGRESS,Fc(1,o);let c=t.dependencyResolverFn,u=r.get(Uf).add();return c?(t.loadingPromise=Promise.allSettled(c()).then(d=>{let h=!1,g=[],m=[];for(let y of d)if(y.status==="fulfilled"){let S=y.value,M=on(S)||mc(S);if(M)g.push(M);else{let A=ff(S);A&&m.push(A)}}else{h=!0;break}if(h){if(t.loadingState=pt.FAILED,t.errorTmplIndex===null){let S=new K(-750,!1);qh(e,S)}}else{t.loadingState=pt.COMPLETE;let y=s.tView;if(g.length>0){y.directiveRegistry=NE(y.directiveRegistry,g);let S=g.map(A=>A.type),M=yc(!1,...S);t.providers=M}m.length>0&&(y.pipeRegistry=NE(y.pipeRegistry,m))}}),t.loadingPromise.finally(()=>{t.loadingPromise=null,u()})):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=pt.COMPLETE,u()}),t.loadingPromise)}function Sx(t,e){return e[bt].get(XD,null,{optional:!0})?.behavior!==np.Manual}function Ax(t,e,n){let r=e[V],i=e[n.index];if(!Sx(t,e))return;let o=bi(e,n),s=bs(r,n);switch(ax(o),s.loadingState){case pt.NOT_STARTED:Er(we.Loading,n,i),iw(s,e,n),s.loadingState===pt.IN_PROGRESS&&RE(s,n,i);break;case pt.IN_PROGRESS:Er(we.Loading,n,i),RE(s,n,i);break;case pt.COMPLETE:Er(we.Complete,n,i);break;case pt.FAILED:Er(we.Error,n,i);break;default:}}async function ow(t,e,n){let r=t.get(iu);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=PN(e,t);if(s.length===0)return;o!==null&&s.shift(),Rx(r,s),o!==null&&await o;let c=s[0];r.has(c)?await xE(t,s,n):r.awaitParentBlock(c,async()=>await xE(t,s,n))}async function xE(t,e,n){let r=t.get(iu),i=r.hydrating,o=t.get(un),s=o.add();for(let u=0;u<e.length;u++){let d=e[u],h=r.get(d);if(h!=null){if(await Px(h),await xx(t),Nx(h)){sR(h),PE(e.slice(u),r);break}i.get(d).resolve()}else{Mx(u,e,r),PE(e.slice(u),r);break}}let c=e[e.length-1];await i.get(c)?.promise,o.remove(s),n&&n(e),aR(r.get(c),e,r,t.get(Ht))}function Nx(t){return bi(t.lView,t.tNode)[Cs]===we.Error}function Mx(t,e,n){let r=t-1,i=r>-1?n.get(e[r]):null;i&&pu(i.lContainer)}function PE(t,e){let n=e.hydrating;for(let r in t)n.get(r)?.reject();e.cleanup(t)}function Rx(t,e){for(let n of e)t.hydrating.set(n,Promise.withResolvers())}function xx(t){return new Promise(e=>sp(e,{injector:t}))}async function Px(t){let{tNode:e,lView:n}=t,r=bi(n,e);return new Promise(i=>{Ox(r,i),Ax(2,n,e)})}function Ox(t,e){Array.isArray(t[yi])||(t[yi]=[]),t[yi].push(e)}function Ss(t,e,n,r){let i=de(),o=fi();if(Ti(i,o,e)){let s=Xe(),c=Tc();TM(c,i,t,e,n,r)}return Ss}var kx=new U("",{providedIn:"root",factory:()=>!1}),Fx=new U("",{providedIn:"root",factory:()=>Vx}),Vx=4e3;var C4=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Lx(t,e,n,r,i,o,s,c){dn("NgControlFlow");let u=de(),d=Xe(),h=Bt(d.consts,o);return HD(u,d,t,e,n,r,i,h,256,s,c),up}function up(t,e,n,r,i,o,s,c){dn("NgControlFlow");let u=de(),d=Xe(),h=Bt(d.consts,o);return HD(u,d,t,e,n,r,i,h,512,s,c),up}function jx(t,e){dn("NgControlFlow");let n=de(),r=fi(),i=n[r]!==ln?n[r]:-1,o=i!==-1?OE(n,ge+i):void 0,s=0;if(Ti(n,r,t)){let c=q(null);try{if(o!==void 0&&mD(o,s),t!==-1){let u=ge+t,d=OE(n,u),h=Bx(n[V],u),g=dR(d,h,n),m=Kh(n,h,e,{dehydratedView:g});Yh(d,m,s,Gc(h,g))}}finally{q(c)}}else if(o!==void 0){let c=GM(o,s);c!==void 0&&(c[Ve]=e)}}function OE(t,e){return t[e]}function Bx(t,e){return yr(t,e)}function sw(t,e,n){let r=de(),i=fi();if(Ti(r,i,e)){let o=Xe(),s=Tc();nD(s,r,t,e,r[he],n)}return sw}function kE(t,e,n,r,i){zh(e,t,n,i?"class":"style",r)}function lp(t,e,n,r){let i=de(),o=i[V],s=t+ge,c=o.firstCreatePass?AD(s,i,2,e,rD,Cf(),n,r):o.data[s];if(iD(c,i,t,e,fp),es(c)){let u=i[V];Gh(u,i,c),LI(u,c,i)}return r!=null&&lu(i,c),lp}function dp(){let t=Xe(),e=ze(),n=oD(e);return t.firstCreatePass&&ND(t,n),bf(n)&&Sf(),wf(),n.classesWithoutHost!=null&&Z0(n)&&kE(t,n,de(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&J0(n)&&kE(t,n,de(),n.stylesWithoutHost,!1),dp}function aw(t,e,n,r){return lp(t,e,n,r),dp(),aw}function cw(t,e,n,r){let i=de(),o=i[V],s=t+ge,c=o.firstCreatePass?wR(s,o,2,e,n,r):o.data[s];return iD(c,i,t,e,fp),r!=null&&lu(i,c),cw}function uw(){let t=ze(),e=oD(t);return bf(e)&&Sf(),wf(),uw}var fp=(t,e,n,r,i)=>(cn(!0),Oh(e[he],r,Ff()));function Ux(t,e,n,r,i){let o=!au(e,n);if(cn(o),o)return Oh(e[he],r,Ff());let s=e[ut],c=fu(s,t,e,n);return OI(s,i)&&su(s,i,c.nextSibling),s&&(eI(n)||tI(c))&&an(n)&&(k_(n),zI(c)),c}function lw(){fp=Ux}var Hx=(t,e,n,r,i)=>(cn(!0),GI(e[he],""));function $x(t,e,n,r,i){let o,s=!au(e,n);if(cn(s),s)return GI(e[he],"");let c=e[ut],u=fu(c,t,e,n),d=RN(c,i);return su(c,i,u),o=hu(d,u),o}function dw(){Hx=$x}function Gx(){return de()}var As="en-US";var qx=As;function fw(t){typeof t=="string"&&(qx=t.toLowerCase().replace(/_/g,"-"))}function Ai(t,e,n){let r=de(),i=Xe(),o=ze();return hw(i,r,r[he],o,t,e,n),Ai}function hw(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=Kf(r,e,o),CR(r,t,e,s,n,i,o,u)&&(c=!1)),c){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let g=0;g<h.length;g+=2){let m=h[g],y=h[g+1];u??=Kf(r,e,o),_E(r,e,m,y,i,u)}if(d&&d.length)for(let g of d)u??=Kf(r,e,o),_E(r,e,g,i,i,u)}}function zx(t=1){return Y_(t)}function Wx(t){let e=B_();return S_(e,ge+t)}function Rc(t,e){return t<<17|e<<2}function Cr(t){return t>>17&32767}function Kx(t){return(t&2)==2}function Qx(t,e){return t&131071|e<<17}function _h(t){return t|2}function Di(t){return(t&131068)>>2}function Jf(t,e){return t&-131069|e<<2}function Yx(t){return(t&1)===1}function Eh(t){return t|1}function Zx(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Cr(s),u=Di(s);t[r]=n;let d=!1,h;if(Array.isArray(n)){let g=n;h=g[1],(h===null||si(g,h)>0)&&(d=!0)}else h=n;if(i)if(u!==0){let m=Cr(t[c+1]);t[r+1]=Rc(m,c),m!==0&&(t[m+1]=Jf(t[m+1],r)),t[c+1]=Qx(t[c+1],r)}else t[r+1]=Rc(c,0),c!==0&&(t[c+1]=Jf(t[c+1],r)),c=r;else t[r+1]=Rc(u,0),c===0?c=r:t[u+1]=Jf(t[u+1],r),u=r;d&&(t[r+1]=_h(t[r+1])),FE(t,h,r,!0),FE(t,h,r,!1),Jx(e,h,t,r,o),s=Rc(c,u),o?e.classBindings=s:e.styleBindings=s}function Jx(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&si(o,e)>=0&&(n[r+1]=Eh(n[r+1]))}function FE(t,e,n,r){let i=t[n+1],o=e===null,s=r?Cr(i):Di(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],d=t[s+1];Xx(u,e)&&(c=!0,t[s+1]=r?Eh(d):_h(d)),s=r?Cr(d):Di(d)}c&&(t[n+1]=r?_h(i):Eh(i))}function Xx(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?si(t,e)>=0:!1}function Ns(t,e){return e1(t,e,null,!0),Ns}function e1(t,e,n,r){let i=de(),o=Xe(),s=H_(2);if(o.firstUpdatePass&&n1(o,t,s,r),e!==ln&&Ti(i,s,e)){let c=o.data[vr()];a1(o,c,i,i[he],t,i[s+1]=c1(e,n),r,s)}}function t1(t,e){return e>=t.expandoStartIndex}function n1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[vr()],s=t1(t,n);u1(o,r)&&e===null&&!s&&(e=!1),e=r1(i,o,e,r),Zx(i,o,e,n,s,r)}}function r1(t,e,n,r){let i=z_(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Xf(null,t,e,n,r),n=hs(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Xf(i,t,e,n,r),o===null){let u=i1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Xf(null,t,e,u[1],r),u=hs(u,e.attrs,r),o1(t,e,r,u))}else o=s1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function i1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Di(r)!==0)return t[Cr(r)]}function o1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Cr(i)]=r}function s1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=hs(r,s,n)}return hs(r,e.attrs,n)}function Xf(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=hs(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function hs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),y_(t,s,n?!0:e[++o]))}return t===void 0?null:t}function a1(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,d=u[c+1],h=Yx(d)?VE(u,e,n,i,Di(d),s):void 0;if(!eu(h)){eu(o)||Kx(d)&&(o=VE(u,null,n,i,c,s));let g=_f(vr(),n);gM(r,s,g,i,o)}}function VE(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],d=Array.isArray(u),h=d?u[1]:u,g=h===null,m=n[i+1];m===ln&&(m=g?at:void 0);let y=g?gc(m,r):h===r?m:void 0;if(d&&!eu(y)&&(y=gc(u,r)),eu(y)&&(c=y,s))return c;let S=t[i+1];i=s?Cr(S):Di(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=gc(u,r))}return c}function eu(t){return t!==void 0}function c1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=nn(jI(t)))),t}function u1(t,e){return(t.flags&(e?8:16))!==0}function l1(t,e=""){let n=de(),r=Xe(),i=t+ge,o=r.firstCreatePass?Es(r,i,1,e,null):r.data[i],s=pw(r,n,o,e,t);n[i]=s,bc()&&Hh(r,n,s,o),di(o,!1)}var pw=(t,e,n,r,i)=>(cn(!0),$I(e[he],r));function d1(t,e,n,r,i){let o=!au(e,n);if(cn(o),o)return $I(e[he],r);let s=e[ut];return fu(s,t,e,n)}function gw(){pw=d1}function f1(t,e,n,r=""){return Ti(t,fi(),n)?e+fc(n)+r:ln}function mw(t){return hp("",t),mw}function hp(t,e,n){let r=de(),i=f1(r,t,e,n);return i!==ln&&h1(r,vr(),i),hp}function h1(t,e,n){let r=_f(e,t);QN(t[he],r,n)}function yw(t,e,n){jf(e)&&(e=e());let r=de(),i=fi();if(Ti(r,i,e)){let o=Xe(),s=Tc();nD(s,r,t,e,r[he],n)}return yw}function p1(t,e){let n=jf(t);return n&&t.set(e),n}function vw(t,e){let n=de(),r=Xe(),i=ze();return hw(r,n,n[he],i,t,e),vw}function g1(t,e,n){let r=Xe();if(r.firstCreatePass){let i=jt(t);Ih(n,r.data,r.blueprint,i,!0),Ih(e,r.data,r.blueprint,i,!1)}}function Ih(t,e,n,r,i){if(t=ke(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ih(t[o],e,n,r,i);else{let o=Xe(),s=de(),c=ze(),u=cr(t)?t:ke(t.provide),d=gf(t),h=c.providerIndexes&1048575,g=c.directiveStart,m=c.providerIndexes>>20;if(cr(t)||!t.multi){let y=new Dr(d,i,ee,null),S=th(u,e,i?h:h+m,g);S===-1?(rh(Bc(c,s),o,u),eh(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(y),s.push(y)):(n[S]=y,s[S]=y)}else{let y=th(u,e,h+m,g),S=th(u,e,h,h+m),M=y>=0&&n[y],A=S>=0&&n[S];if(i&&!A||!i&&!M){rh(Bc(c,s),o,u);let O=v1(i?y1:m1,n.length,i,r,d,t);!i&&A&&(n[S].providerFactory=O),eh(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(O),s.push(O)}else{let O=_w(n[i?S:y],d,!i&&r);eh(o,t,y>-1?y:S,O)}!i&&r&&A&&n[S].componentProviders++}}}function eh(t,e,n,r){let i=cr(e),o=D_(e);if(i||o){let u=(o?ke(e.useClass):e).prototype.ngOnDestroy;if(u){let d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(n);h===-1?d.push(n,[r,u]):d[h+1].push(r,u)}else d.push(n,u)}}}function _w(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function th(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function m1(t,e,n,r,i){return Dh(this.multi,[])}function y1(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=Uc(r,r[V],this.providerFactory.index,i);s=u.slice(0,c),Dh(o,s);for(let d=c;d<u.length;d++)s.push(u[d])}else s=[],Dh(o,s);return s}function Dh(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function v1(t,e,n,r,i,o){let s=new Dr(t,n,ee,null);return s.multi=[],s.index=e,s.componentProviders=0,_w(s,i,r&&!n),s}function fn(t,e=[]){return n=>{n.providersResolver=(r,i)=>g1(r,i?i(t):t,e)}}var tu=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},_1=(()=>{class t{compileModuleSync(n){return new Zc(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=df(n),o=UI(i.declarations).reduce((s,c)=>{let u=on(c);return u&&s.push(new Ii(u)),s},[]);return new tu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var E1=(()=>{class t{zone=k(et);changeDetectionScheduler=k(Ft);applicationRef=k(Ht);applicationErrorHandler=k(At);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ew({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new et(ce(H({},Iw()),{scheduleInRootZone:n})),[{provide:et,useFactory:t},{provide:Vt,multi:!0,useFactory:()=>{let r=k(E1,{optional:!0});return()=>r.initialize()}},{provide:Vt,multi:!0,useFactory:()=>{let r=k(I1);return()=>{r.initialize()}}},e===!0?{provide:Bf,useValue:!0}:[],{provide:Sc,useValue:n??WD},{provide:At,useFactory:()=>{let r=k(et),i=k(ct),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Rn),o.handleError(s))})}}}]}function Iw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var I1=(()=>{class t{subscription=new Ne;initialized=!1;zone=k(et);pendingTasks=k(un);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{et.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{et.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var pp=(()=>{class t{applicationErrorHandler=k(At);appRef=k(Ht);taskService=k(un);ngZone=k(et);zonelessEnabled=k(rs);tracing=k(Ts,{optional:!0});disableScheduling=k(Bf,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ne;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Jc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Sc,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof fs||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?TE:KD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Jc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,TE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function D1(){return dn("NgZoneless"),ai([{provide:Ft,useExisting:pp},{provide:et,useClass:fs},{provide:rs,useValue:!0},{provide:Sc,useValue:!1},[]])}function w1(){return typeof $localize<"u"&&$localize.locale||As}var vu=new U("",{providedIn:"root",factory:()=>k(vu,{optional:!0,skipSelf:!0})||w1()});function Mt(t){return a_(t)}function Ar(t,e){return Fa(t,e?.equal)}var Dw=class{[Ge];constructor(e){this[Ge]=e}destroy(){this[Ge].destroy()}};var _p={JSACTION:"__jsaction",OWNER:"__owner"},bw={};function C1(t){return t[_p.JSACTION]}function ww(t,e){t[_p.JSACTION]=e}function T1(t){return bw[t]}function b1(t,e){bw[t]=e}var L={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},S1=[L.MOUSEENTER,L.MOUSELEAVE,"pointerenter","pointerleave"],L4=[L.CLICK,L.DBLCLICK,L.FOCUSIN,L.FOCUSOUT,L.KEYDOWN,L.KEYUP,L.KEYPRESS,L.MOUSEOVER,L.MOUSEOUT,L.SUBMIT,L.TOUCHSTART,L.TOUCHEND,L.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],A1=[L.FOCUS,L.BLUR,L.ERROR,L.LOAD,L.TOGGLE],Ep=t=>A1.indexOf(t)>=0;function N1(t){return t===L.MOUSEENTER?L.MOUSEOVER:t===L.MOUSELEAVE?L.MOUSEOUT:t===L.POINTERENTER?L.POINTEROVER:t===L.POINTERLEAVE?L.POINTEROUT:t}function M1(t,e,n,r){let i=!1;Ep(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return t.addEventListener(e,n,o),{eventType:e,handler:n,capture:i,passive:r}}function R1(t,e){if(t.removeEventListener){let n=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;t.removeEventListener(e.eventType,e.handler,n)}else t.detachEvent&&t.detachEvent(`on${e.eventType}`,e.handler)}function x1(t){t.preventDefault?t.preventDefault():t.returnValue=!1}var Cw=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function P1(t){return t.which===2||t.which==null&&t.button===4}function O1(t){return Cw&&t.metaKey||!Cw&&t.ctrlKey||P1(t)||t.shiftKey}function k1(t,e,n){let r=t.relatedTarget;return(t.type===L.MOUSEOVER&&e===L.MOUSEENTER||t.type===L.MOUSEOUT&&e===L.MOUSELEAVE||t.type===L.POINTEROVER&&e===L.POINTERENTER||t.type===L.POINTEROUT&&e===L.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function F1(t,e){let n={};for(let r in t){if(r==="srcElement"||r==="target")continue;let i=r,o=t[i];typeof o!="function"&&(n[i]=o)}return t.type===L.MOUSEOVER?n.type=L.MOUSEENTER:t.type===L.MOUSEOUT?n.type=L.MOUSELEAVE:t.type===L.POINTEROVER?n.type=L.POINTERENTER:n.type=L.POINTERLEAVE,n.target=n.srcElement=e,n.bubbles=!1,n._originalEvent=t,n}var V1=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Du=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,n,r){V1&&(this.element.style.cursor="pointer"),this.handlerInfos.push(M1(this.element,e,n(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)R1(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},L1={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function Ln(t){return t.eventType}function Ip(t,e){t.eventType=e}function Eu(t){return t.event}function Sw(t,e){t.event=e}function Aw(t){return t.targetElement}function Nw(t,e){t.targetElement=e}function Mw(t){return t.eic}function j1(t,e){t.eic=e}function B1(t){return t.timeStamp}function U1(t,e){t.timeStamp=e}function Iu(t){return t.eia}function Rw(t,e,n){t.eia=[e,n]}function gp(t){t.eia=void 0}function _u(t){return t[1]}function H1(t){return t.eirp}function xw(t,e){t.eirp=e}function Pw(t){return t.eir}function Ow(t,e){t.eir=e}function kw(t){return{eventType:t.eventType,event:t.event,targetElement:t.targetElement,eic:t.eic,eia:t.eia,timeStamp:t.timeStamp,eirp:t.eirp,eiack:t.eiack,eir:t.eir}}function $1(t,e,n,r,i,o,s,c){return{eventType:t,event:e,targetElement:n,eic:r,timeStamp:i,eia:o,eirp:s,eiack:c}}var mp=class t{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return Ln(this.eventInfo)}setEventType(e){Ip(this.eventInfo,e)}getEvent(){return Eu(this.eventInfo)}setEvent(e){Sw(this.eventInfo,e)}getTargetElement(){return Aw(this.eventInfo)}setTargetElement(e){Nw(this.eventInfo,e)}getContainer(){return Mw(this.eventInfo)}setContainer(e){j1(this.eventInfo,e)}getTimestamp(){return B1(this.eventInfo)}setTimestamp(e){U1(this.eventInfo,e)}getAction(){let e=Iu(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){gp(this.eventInfo);return}Rw(this.eventInfo,e.name,e.element)}getIsReplay(){return H1(this.eventInfo)}setIsReplay(e){xw(this.eventInfo,e)}getResolved(){return Pw(this.eventInfo)}setResolved(e){Ow(this.eventInfo,e)}clone(){return new t(kw(this.eventInfo))}},G1={},q1=/\s*;\s*/,z1=L.CLICK,yp=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=n}resolveEventType(e){this.clickModSupport&&Ln(e)===L.CLICK&&O1(Eu(e))?Ip(e,L.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){Pw(e)||(this.populateAction(e,Aw(e)),Ow(e,!0))}resolveParentAction(e){let n=Iu(e),r=n&&_u(n);gp(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,n){let r=n;for(;r&&r!==Mw(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Iu(e));)r=this.getParentNode(r);let i=Iu(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(Ln(e)===L.MOUSEENTER||Ln(e)===L.MOUSELEAVE||Ln(e)===L.POINTERENTER||Ln(e)===L.POINTERLEAVE)))if(k1(Eu(e),Ln(e),_u(i))){let o=F1(Eu(e),_u(i));Sw(e,o),Nw(e,_u(i))}else gp(e)}getParentNode(e){let n=e[_p.OWNER];if(n)return n;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,n){let r=this.parseActions(e),i=r[Ln(n)];i!==void 0&&Rw(n,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,n,r)}parseActions(e){let n=C1(e);if(!n){let r=e.getAttribute(Nc.JSACTION);if(!r)n=G1,ww(e,n);else{if(n=T1(r),!n){n={};let i=r.split(q1);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let c=s.indexOf(L1.EVENT_ACTION_SEPARATOR),u=c!==-1,d=u?s.substr(0,c).trim():z1,h=u?s.substr(c+1).trim():s;n[d]=h}b1(r,n)}ww(e,n)}}return n}addA11yClickSupport(e,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},Fw=(function(t){return t[t.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",t})(Fw||{}),vp=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=n,this.eventReplayer=r}dispatch(e){let n=new mp(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=n.getAction();if(r&&W1(r.element,n)&&x1(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function W1(t,e){return t.tagName==="A"&&(e.getEventType()===L.CLICK||e.getEventType()===L.CLICKMOD)}var Vw=Symbol.for("propagationStopped"),Dp={REPLAY:101};var K1="`preventDefault` called during event replay.";var Q1="`composedPath` called during event replay.",wu=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,n=!0){this.dispatchDelegate=e,this.clickModSupport=n,this.actionResolver=new yp({clickModSupport:n}),this.dispatcher=new vp(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&J1(e),Y1(e);e.getAction();){if(X1(e),Ep(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),Z1(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function Y1(t){let e=t.getEvent(),n=t.getEvent().stopPropagation.bind(e),r=()=>{e[Vw]=!0,n()};Nr(e,"stopPropagation",r),Nr(e,"stopImmediatePropagation",r)}function Z1(t){return!!t.getEvent()[Vw]}function J1(t){let e=t.getEvent(),n=t.getTargetElement(),r=e.preventDefault.bind(e);Nr(e,"target",n),Nr(e,"eventPhase",Dp.REPLAY),Nr(e,"preventDefault",()=>{throw r(),new Error(K1+"")}),Nr(e,"composedPath",()=>{throw new Error(Q1+"")})}function X1(t){let e=t.getEvent(),n=t.getAction()?.element;n&&Nr(e,"currentTarget",n,{configurable:!0})}function Nr(t,e,n,{configurable:r=!1}={}){Object.defineProperty(t,e,{value:n,configurable:r})}function Lw(t,e){t.ecrd(n=>{e.dispatch(n)},Fw.I_AM_THE_JSACTION_FRAMEWORK)}function eP(t){return t?.q??[]}function tP(t){t&&(Tw(t.c,t.et,t.h),Tw(t.c,t.etc,t.h,!0))}function Tw(t,e,n,r){for(let i=0;i<e.length;i++)t.removeEventListener(e[i],n,r)}var nP=!1,jw=(()=>{class t{static MOUSE_SPECIAL_SUPPORT=nP;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let o=$1(n,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){xw(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!t.MOUSE_SPECIAL_SUPPORT&&S1.indexOf(n)>=0)return;let o=(c,u,d)=>{this.handleEvent(c,u,d)};this.eventHandlers[n]=o;let s=N1(r||n);if(s!==n){let c=this.browserEventTypeToExtraEventTypes[s]||[];c.push(n),this.browserEventTypeToExtraEventTypes[s]=c}this.containerManager.addEventListener(s,c=>u=>{o(n,u,c)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),tP(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let c=kw(i);Ip(c,o[s]),this.handleEventInfo(c)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return t})();function Bw(t,e=window){return eP(e._ejsas?.[t])}function wp(t,e=window){e._ejsas&&(e._ejsas[t]=void 0)}var Ww=Symbol("InputSignalNode#UNSET"),hP=ce(H({},Va),{transformFn:void 0,applyValueToInputSignal(t,e){Xr(t,e)}});function Kw(t,e){let n=Object.create(hP);n.value=t,n.transformFn=e?.transform;function r(){if(Yr(n),n.value===Ww){let i=null;throw new K(-950,i)}return n.value}return r[Ge]=n,r}var pP=new U("");pP.__NG_ELEMENT_ID__=t=>{let e=ze();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new K(204,!1)};function Uw(t,e){return Kw(t,e)}function gP(t){return Kw(Ww,t)}var pq=(Uw.required=gP,Uw);var Su=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},gq=new Su("20.2.4");var Cp=new U(""),mP=new U("");function Ms(t){return!t.moduleRef}function yP(t){let e=Ms(t)?t.r3Injector:t.moduleRef.injector,n=e.get(et);return n.run(()=>{Ms(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(At),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Ms(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Cp);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Cp);s.add(o),t.moduleRef.onDestroy(()=>{ss(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return _P(r,n,()=>{let o=e.get(un),s=o.add(),c=e.get(cp);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(vu,As);if(fw(u||As),!e.get(mP,!0))return Ms(t)?e.get(Ht):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ms(t)){let h=e.get(Ht);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return vP?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var vP;function _P(t,e,n){try{let r=n();return Si(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Tu=null;function EP(t=[],e){return rn.create({name:e,providers:[{provide:pf,useValue:"platform"},{provide:Cp,useValue:new Set([()=>Tu=null])},...t]})}function IP(t=[]){if(Tu)return Tu;let e=EP(t);return Tu=e,nw(),DP(e),e}function DP(t){let e=t.get(aI,null);vc(t,()=>{e?.forEach(n=>n())})}var Np=(()=>{class t{static __NG_ELEMENT_ID__=wP}return t})();function wP(t){return CP(ze(),de(),(t&16)===16)}function CP(t,e,n){if(an(t)&&!n){let r=It(t.index,e);return new Vn(r,r)}else if(t.type&175){let r=e[nt];return new Vn(r,e)}return null}var Tp=class{constructor(){}supports(e){return Xh(e)}create(e){return new bp(e)}},TP=(t,e)=>e,bp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||TP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Hw(r,i,o)?n:r,c=Hw(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let d=c-i,h=u-i;if(d!=h){for(let m=0;m<d;m++){let y=m<o.length?o[m]:o[m]=0,S=y+m;h<=S&&S<d&&(o[m]=y+1)}let g=s.previousIndex;o[g]=h-d}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Xh(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,c),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,c)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,MD(e,c=>{s=this._trackByFn(i,c),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,c,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,s,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Sp(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Au),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Au),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Sp=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Ap=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Au=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Ap,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Hw(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function $w(){return new Mp([new Tp])}var Mp=(()=>{class t{factories;static \u0275prov=le({token:t,providedIn:"root",factory:$w});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=k(t,{optional:!0,skipSelf:!0});return t.create(n,r||$w())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new K(901,!1)}}return t})();function mq(t){ae(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=IP(r),o=[Ew({}),{provide:Ft,useExisting:pp},X_,...n||[]],s=new ds({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return yP({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ae(9)}}var Cu=new WeakSet,Gw="",bu=[];function qw(t){return t.get(Ah,vI)}function yq(){let t=[{provide:Ah,useFactory:()=>{let e=!0;{let n=k(br);e=!!window._ejsas?.[n]}return e&&dn("NgEventReplay"),e}}];return t.push({provide:Vt,useValue:()=>{let e=k(Ht),{injector:n}=e;if(!Cu.has(e)){let r=k(Nh);if(qw(n)){bI();let i=n.get(br),o=CI(i,(s,c,u)=>{s.nodeType===Node.ELEMENT_NODE&&(EI(s,c,u),II(s,r))});e.onDestroy(o)}}},multi:!0},{provide:yu,useFactory:()=>{let e=k(Ht),{injector:n}=e;return()=>{if(!qw(n)||Cu.has(e))return;Cu.add(e);let r=n.get(br);e.onDestroy(()=>{Cu.delete(e),wp(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=n.get(wI);bP(i,n);let o=n.get(Nh);o.get(Gw)?.forEach(DI),o.delete(Gw);let s=i.instance;PI(n)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),t}var bP=(t,e)=>{let n=e.get(br),r=window._ejsas[n],i=t.instance=new jw(new Du(r.c));for(let c of r.et)i.addEvent(c);for(let c of r.etc)i.addEvent(c);let o=Bw(n);i.replayEarlyEventInfos(o),wp(n);let s=new wu(c=>{SP(e,c,c.currentTarget)});Lw(i,s)};function SP(t,e,n){let r=(n&&n.getAttribute(vs))??"";/d\d+/.test(r)?AP(r,t,e,n):e.eventPhase===Dp.REPLAY&&Mh(e,n)}function AP(t,e,n,r){bu.push({event:n,currentTarget:r}),ow(e,t,NP)}function NP(t){let e=[...bu],n=new Set(t);bu=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(vs);n.has(o)?Mh(r,i):bu.push({event:r,currentTarget:i})}}var zw=!1;function MP(){zw||(zw=!0,MI(),lw(),gw(),dw(),zD(),VD(),DD(),tD())}function RP(t){return t.whenStable()}function vq(){let t=[{provide:ys,useFactory:()=>{let e=!0;return e=!!k(ms,{optional:!0})?.get(Rh,null),e&&dn("NgHydration"),e}},{provide:Vt,useValue:()=>{vD(!1),k(ys)&&(FI(gs()),MP())},multi:!0}];return t.push({provide:Sh,useFactory:()=>k(ys)},{provide:yu,useFactory:()=>{if(k(ys)){let e=k(Ht);return()=>{RP(e).then(()=>{e.destroyed||Jh(e)})}}return()=>{}},multi:!0}),ai(t)}function Rp(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Zw=null;function Mr(){return Zw}function xP(t){Zw??=t}var Pp=class{},Op=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:()=>k(Jw),providedIn:"platform"})}return t})();var Jw=(()=>{class t extends Op{_location;_history;_doc=k(hi);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mr().getBaseHref(this._doc)}onPopState(n){let r=Mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Xw(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function Qw(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function jn(t){return t&&t[0]!=="?"?`?${t}`:t}var Nu=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:()=>k(tC),providedIn:"root"})}return t})(),eC=new U(""),tC=(()=>{class t extends Nu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(hi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Xw(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+jn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+jn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+jn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Fe(Op),Fe(eC,8))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nC=(()=>{class t{_subject=new Tt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=kP(Qw(Yw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+jn(r))}normalize(n){return t.stripTrailingSlash(OP(this._basePath,Yw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=jn;static joinWithSlash=Xw;static stripTrailingSlash=Qw;static \u0275fac=function(r){return new(r||t)(Fe(Nu))};static \u0275prov=le({token:t,factory:()=>PP(),providedIn:"root"})}return t})();function PP(){return new nC(Fe(Nu))}function OP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Yw(t){return t.replace(/\/index.html$/,"")}function kP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Mu=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},oC=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Mu(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),rC(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);rC(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(ee(ws),ee(_s),ee(Mp))};static \u0275dir=Me({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function rC(t,e){t.context.$implicit=e.item}var FP=(()=>{class t{_viewContainer;_context=new Ru;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){iC(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){iC(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(ee(ws),ee(_s))};static \u0275dir=Me({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Ru=class{$implicit=null;ngIf=null};function iC(t,e){if(t&&!t.createEmbeddedView)throw new K(2020,!1)}var VP=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Sr({type:t});static \u0275inj=xn({})}return t})();function LP(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var kp=class{};var jP="browser";function Q5(t){return t===jP}var gC=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(ee(Ds),ee(Ci))};static \u0275dir=Me({type:t})}return t})(),BP=(()=>{class t extends gC{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ps(t)))(i||t)}})();static \u0275dir=Me({type:t,features:[gt]})}return t})(),jp=new U("");var UP={provide:jp,useExisting:yt(()=>mC),multi:!0};function HP(){let t=Mr()?Mr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var $P=new U(""),mC=(()=>{class t extends gC{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!HP())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(ee(Ds),ee(Ci),ee($P,8))};static \u0275dir=Me({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ai("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[fn([UP]),gt]})}return t})();function Bp(t){return t==null||Up(t)===0}function Up(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Pi=new U(""),$u=new U(""),GP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,sC=class{static min(e){return qP(e)}static max(e){return zP(e)}static required(e){return yC(e)}static requiredTrue(e){return WP(e)}static email(e){return KP(e)}static minLength(e){return QP(e)}static maxLength(e){return vC(e)}static pattern(e){return YP(e)}static nullValidator(e){return Pu()}static compose(e){return CC(e)}static composeAsync(e){return TC(e)}};function qP(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function zP(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function yC(t){return Bp(t.value)?{required:!0}:null}function WP(t){return t.value===!0?null:{required:!0}}function KP(t){return Bp(t.value)||GP.test(t.value)?null:{email:!0}}function QP(t){return e=>{let n=e.value?.length??Up(e.value);return n===null||n===0?null:n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}function vC(t){return e=>{let n=e.value?.length??Up(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function YP(t){if(!t)return Pu;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Bp(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Pu(t){return null}function _C(t){return t!=null}function EC(t){return Si(t)?kt(t):t}function IC(t){let e={};return t.forEach(n=>{e=n!=null?H(H({},e),n):e}),Object.keys(e).length===0?null:e}function DC(t,e){return e.map(n=>n(t))}function ZP(t){return!t.validate}function wC(t){return t.map(e=>ZP(e)?e:n=>e.validate(n))}function CC(t){if(!t)return null;let e=t.filter(_C);return e.length==0?null:function(n){return IC(DC(n,e))}}function Hp(t){return t!=null?CC(wC(t)):null}function TC(t){if(!t)return null;let e=t.filter(_C);return e.length==0?null:function(n){let r=DC(n,e).map(EC);return Od(r).pipe(en(IC))}}function $p(t){return t!=null?TC(wC(t)):null}function aC(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function bC(t){return t._rawValidators}function SC(t){return t._rawAsyncValidators}function Fp(t){return t?Array.isArray(t)?t:[t]:[]}function Ou(t,e){return Array.isArray(t)?t.includes(e):t===e}function cC(t,e){let n=Fp(e);return Fp(t).forEach(i=>{Ou(n,i)||n.push(i)}),n}function uC(t,e){return Fp(e).filter(n=>!Ou(t,n))}var ku=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Hp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$p(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},hn=class extends ku{name;get formDirective(){return null}get path(){return null}},Rr=class extends ku{_parent=null;name=null;valueAccessor=null},Fu=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},JP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},yz=ce(H({},JP),{"[class.ng-submitted]":"isSubmitted"}),vz=(()=>{class t extends Fu{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ee(Rr,2))};static \u0275dir=Me({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ns("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[gt]})}return t})(),_z=(()=>{class t extends Fu{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ee(hn,10))};static \u0275dir=Me({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ns("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[gt]})}return t})();var Rs="VALID",xu="INVALID",Ni="PENDING",xs="DISABLED",Bn=class{},Vu=class extends Bn{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Os=class extends Bn{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},ks=class extends Bn{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Mi=class extends Bn{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Lu=class extends Bn{source;constructor(e){super(),this.source=e}},ju=class extends Bn{source;constructor(e){super(),this.source=e}};function Gp(t){return(Gu(t)?t.validators:t)||null}function XP(t){return Array.isArray(t)?Hp(t):t||null}function qp(t,e){return(Gu(e)?e.asyncValidators:t)||null}function eO(t){return Array.isArray(t)?$p(t):t||null}function Gu(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function AC(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new K(1e3,"");if(!r[n])throw new K(1001,"")}function NC(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new K(1002,"")})}var Ri=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Mt(this.statusReactive)}set status(e){Mt(()=>this.statusReactive.set(e))}_status=Ar(()=>this.statusReactive());statusReactive=Fn(void 0);get valid(){return this.status===Rs}get invalid(){return this.status===xu}get pending(){return this.status==Ni}get disabled(){return this.status===xs}get enabled(){return this.status!==xs}errors;get pristine(){return Mt(this.pristineReactive)}set pristine(e){Mt(()=>this.pristineReactive.set(e))}_pristine=Ar(()=>this.pristineReactive());pristineReactive=Fn(!0);get dirty(){return!this.pristine}get touched(){return Mt(this.touchedReactive)}set touched(e){Mt(()=>this.touchedReactive.set(e))}_touched=Ar(()=>this.touchedReactive());touchedReactive=Fn(!1);get untouched(){return!this.touched}_events=new Tt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(cC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uC(e,this._rawAsyncValidators))}hasValidator(e){return Ou(this._rawValidators,e)}hasAsyncValidator(e){return Ou(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ks(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new ks(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Os(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Os(!0,r))}markAsPending(e={}){this.status=Ni;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mi(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(H({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xs,this.errors=null,this._forEachChild(i=>{i.disable(ce(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vu(this.value,r)),this._events.next(new Mi(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Rs,this._forEachChild(r=>{r.enable(ce(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rs||this.status===Ni)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vu(this.value,n)),this._events.next(new Mi(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(H({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xs:Rs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ni,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=EC(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Mi(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?xs:this.errors?xu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ni)?Ni:this._anyControlsHaveStatus(xu)?xu:Rs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Os(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new ks(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=XP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=eO(this._rawAsyncValidators)}},xi=class extends Ri{constructor(e,n,r){super(Gp(n),qp(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){NC(this,!0,e),Object.keys(e).forEach(r=>{AC(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Vp=class extends xi{};var Vs=new U("",{providedIn:"root",factory:()=>qu}),qu="always";function MC(t,e){return[...e.path,t]}function Bu(t,e,n=qu){zp(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),nO(t,e),iO(t,e),rO(t,e),tO(t,e)}function lC(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Hu(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Uu(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function tO(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function zp(t,e){let n=bC(t);e.validator!==null?t.setValidators(aC(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=SC(t);e.asyncValidator!==null?t.setAsyncValidators(aC(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Uu(e._rawValidators,i),Uu(e._rawAsyncValidators,i)}function Hu(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=bC(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=SC(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Uu(e._rawValidators,r),Uu(e._rawAsyncValidators,r),n}function nO(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&RC(t,e)})}function rO(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&RC(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function RC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function iO(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function xC(t,e){t==null,zp(t,e)}function oO(t,e){return Hu(t,e)}function PC(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function sO(t){return Object.getPrototypeOf(t.constructor)===BP}function OC(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function kC(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===mC?n=o:sO(o)?r=o:i=o}),i||r||n||null}function aO(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var cO={provide:hn,useExisting:yt(()=>uO)},Ps=Promise.resolve(),uO=(()=>{class t extends hn{callSetDisabledState;get submitted(){return Mt(this.submittedReactive)}_submitted=Ar(()=>this.submittedReactive());submittedReactive=Fn(!1);_directives=new Set;form;ngSubmit=new We;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new xi({},Hp(n),$p(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Ps.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Bu(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Ps.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Ps.then(()=>{let r=this._findContainer(n.path),i=new xi({});xC(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Ps.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Ps.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),OC(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Lu(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new ju(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(ee(Pi,10),ee($u,10),ee(Vs,8))};static \u0275dir=Me({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ai("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[fn([cO]),gt]})}return t})();function dC(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function fC(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Fs=class extends Ri{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(Gp(n),qp(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(fC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var lO=t=>t instanceof Fs;var dO={provide:Rr,useExisting:yt(()=>fO)},hC=Promise.resolve(),fO=(()=>{class t extends Rr{_changeDetectorRef;callSetDisabledState;control=new Fs;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new We;constructor(n,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kC(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),PC(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Bu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){hC.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Rp(r);hC.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?MC(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(ee(hn,9),ee(Pi,10),ee($u,10),ee(jp,10),ee(Np,8),ee(Vs,8))};static \u0275dir=Me({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[fn([dO]),gt,Tr]})}return t})();var Iz=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Me({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var FC=new U("");var hO={provide:hn,useExisting:yt(()=>pO)},pO=(()=>{class t extends hn{callSetDisabledState;get submitted(){return Mt(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=Ar(()=>this._submittedReactive());_submittedReactive=Fn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new We;constructor(n,r,i){super(),this.callSetDisabledState=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return Bu(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){lC(n.control||null,n,!1),aO(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),OC(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new Lu(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,r={}){this.form.reset(n,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new ju(this.form))}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(lC(r||null,n),lO(i)&&(Bu(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);xC(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&oO(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zp(this.form,this),this._oldForm&&Hu(this._oldForm,this)}static \u0275fac=function(r){return new(r||t)(ee(Pi,10),ee($u,10),ee(Vs,8))};static \u0275dir=Me({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Ai("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[fn([hO]),gt,Tr]})}return t})();var gO={provide:Rr,useExisting:yt(()=>mO)},mO=(()=>{class t extends Rr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new We;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kC(this,o)}ngOnChanges(n){this._added||this._setUpControl(),PC(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return MC(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||t)(ee(hn,13),ee(Pi,10),ee($u,10),ee(jp,10),ee(FC,8))};static \u0275dir=Me({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[fn([gO]),gt,Tr]})}return t})();function yO(t){return typeof t=="number"?t:parseInt(t,10)}var VC=(()=>{class t{_validator=Pu;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Pu,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Me({type:t,features:[Tr]})}return t})();var vO={provide:Pi,useExisting:yt(()=>_O),multi:!0};var _O=(()=>{class t extends VC{required;inputName="required";normalizeInput=Rp;createValidator=n=>yC;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ps(t)))(i||t)}})();static \u0275dir=Me({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ss("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[fn([vO]),gt]})}return t})();var EO={provide:Pi,useExisting:yt(()=>IO),multi:!0},IO=(()=>{class t extends VC{maxlength;inputName="maxlength";normalizeInput=n=>yO(n);createValidator=n=>vC(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=ps(t)))(i||t)}})();static \u0275dir=Me({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ss("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[fn([EO]),gt]})}return t})();var LC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Sr({type:t});static \u0275inj=xn({})}return t})(),Lp=class extends Ri{constructor(e,n,r){super(Gp(n),qp(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){NC(this,!1,e),e.forEach((r,i)=>{AC(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function pC(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Dz=(()=>{class t{useNonNullable=!1;get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return pC(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new xi(i,o)}record(n,r=null){let i=this._reduceControls(n);return new Vp(i,r)}control(n,r,i){let o={};return this.useNonNullable?(pC(r)?o=r:(o.validators=r,o.asyncValidators=i),new Fs(n,ce(H({},o),{nonNullable:!0}))):new Fs(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new Lp(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof Fs)return n;if(n instanceof Ri)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var wz=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Vs,useValue:n.callSetDisabledState??qu}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Sr({type:t});static \u0275inj=xn({imports:[LC]})}return t})(),Cz=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:FC,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Vs,useValue:n.callSetDisabledState??qu}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Sr({type:t});static \u0275inj=xn({imports:[LC]})}return t})();var jC=()=>{};var HC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},$C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=o>>2,g=(o&3)<<4|c>>4,m=(c&15)<<2|d>>6,y=d&63;u||(y=64,s||(m=64)),r.push(n[h],n[g],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let d=i<t.length?n[t.charAt(i)]:64;++i;let g=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||d==null||g==null)throw new Wp;let m=o<<2|c>>4;if(r.push(m),d!==64){let y=c<<4&240|d>>2;if(r.push(y),g!==64){let S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Wp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},wO=function(t){let e=HC(t);return $C.encodeByteArray(e,!0)},js=function(t){return wO(t).replace(/\./g,"")},GC=function(t){try{return $C.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var CO=()=>qC().__FIREBASE_DEFAULTS__,TO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&GC(t[1]);return e&&JSON.parse(e)},Kp=()=>{try{return jC()||CO()||TO()||bO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SO=t=>Kp()?.emulatorHosts?.[t],zC=t=>{let e=SO(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Qp=()=>Kp()?.config;var zu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Wu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WC(t){return(await fetch(t,{credentials:"include"})).ok}function KC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=H({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[js(JSON.stringify(n)),js(JSON.stringify(s)),""].join(".")}var Ls={};function AO(){let t={prod:[],emulator:[]};for(let e of Object.keys(Ls))Ls[e]?t.emulator.push(e):t.prod.push(e);return t}function NO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var BC=!1;function QC(t,e){if(typeof window>"u"||typeof document>"u"||!Wu(window.location.host)||Ls[t]===e||Ls[t]||BC)return;Ls[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=AO().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{BC=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){let m=NO(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),M=n("learnmore"),A=document.getElementById(M)||document.createElement("a"),O=n("preprendIcon"),X=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let te=m.element;c(te),h(A,M);let Pe=d();u(X,O),te.append(X,S,A,Pe),document.body.appendChild(te)}o?(S.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function YC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MO(){let t=Kp()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZC(){return!MO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yp(){try{return typeof indexedDB=="object"}catch{return!1}}function JC(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var RO="FirebaseError",pn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bs.prototype.create)}},Bs=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?xO(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new pn(i,c,r)}};function xO(t,e){return t.replace(PO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var PO=/\{\$([^}]+)}/g;function Oi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(UC(o)&&UC(s)){if(!Oi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function UC(t){return t!==null&&typeof t=="object"}var Nz=14400*1e3;function ki(t){return t&&t._delegate?t._delegate:t}var gn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var xr="[DEFAULT]";var Zp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new zu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kO(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xr){return this.instances.has(e)}getOptions(e=xr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xr){return this.component?this.component.multipleInstances?e:xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function OO(t){return t===xr?void 0:t}function kO(t){return t.instantiationMode==="EAGER"}var Ku=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Zp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var FO=[],re=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(re||{}),VO={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},LO=re.INFO,jO={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},BO=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=jO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Fi=class{constructor(e){this.name=e,this._logLevel=LO,this._logHandler=BO,this._userLogHandler=null,FO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}};var UO=(t,e)=>e.some(n=>t instanceof n),XC,eT;function HO(){return XC||(XC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $O(){return eT||(eT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var tT=new WeakMap,Xp=new WeakMap,nT=new WeakMap,Jp=new WeakMap,tg=new WeakMap;function GO(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n($t(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&tT.set(n,t)}).catch(()=>{}),tg.set(e,t),e}function qO(t){if(Xp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Xp.set(t,e)}var eg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $t(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rT(t){eg=t(eg)}function zO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Qu(this),e,...n);return nT.set(r,e.sort?e.sort():[e]),$t(r)}:$O().includes(t)?function(...e){return t.apply(Qu(this),e),$t(tT.get(this))}:function(...e){return $t(t.apply(Qu(this),e))}}function WO(t){return typeof t=="function"?zO(t):(t instanceof IDBTransaction&&qO(t),UO(t,HO())?new Proxy(t,eg):t)}function $t(t){if(t instanceof IDBRequest)return GO(t);if(Jp.has(t))return Jp.get(t);let e=WO(t);return e!==t&&(Jp.set(t,e),tg.set(e,t)),e}var Qu=t=>tg.get(t);function oT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=$t(s);return r&&s.addEventListener("upgradeneeded",u=>{r($t(s.result),u.oldVersion,u.newVersion,$t(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var KO=["get","getKey","getAll","getAllKeys","count"],QO=["put","add","delete","clear"],ng=new Map;function iT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ng.get(e))return ng.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=QO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KO.includes(n)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return ng.set(e,o),o}rT(t=>ce(H({},t),{get:(e,n,r)=>iT(e,n)||t.get(e,n,r),has:(e,n)=>!!iT(e,n)||t.has(e,n)}));var ig=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YO(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function YO(t){return t.getComponent()?.type==="VERSION"}var og="@firebase/app",sT="0.14.2";var mn=new Fi("@firebase/app"),ZO="@firebase/app-compat",JO="@firebase/analytics-compat",XO="@firebase/analytics",ek="@firebase/app-check-compat",tk="@firebase/app-check",nk="@firebase/auth",rk="@firebase/auth-compat",ik="@firebase/database",ok="@firebase/data-connect",sk="@firebase/database-compat",ak="@firebase/functions",ck="@firebase/functions-compat",uk="@firebase/installations",lk="@firebase/installations-compat",dk="@firebase/messaging",fk="@firebase/messaging-compat",hk="@firebase/performance",pk="@firebase/performance-compat",gk="@firebase/remote-config",mk="@firebase/remote-config-compat",yk="@firebase/storage",vk="@firebase/storage-compat",_k="@firebase/firestore",Ek="@firebase/ai",Ik="@firebase/firestore-compat",Dk="firebase",wk="12.2.0";var sg="[DEFAULT]",Ck={[og]:"fire-core",[ZO]:"fire-core-compat",[XO]:"fire-analytics",[JO]:"fire-analytics-compat",[tk]:"fire-app-check",[ek]:"fire-app-check-compat",[nk]:"fire-auth",[rk]:"fire-auth-compat",[ik]:"fire-rtdb",[ok]:"fire-data-connect",[sk]:"fire-rtdb-compat",[ak]:"fire-fn",[ck]:"fire-fn-compat",[uk]:"fire-iid",[lk]:"fire-iid-compat",[dk]:"fire-fcm",[fk]:"fire-fcm-compat",[hk]:"fire-perf",[pk]:"fire-perf-compat",[gk]:"fire-rc",[mk]:"fire-rc-compat",[yk]:"fire-gcs",[vk]:"fire-gcs-compat",[_k]:"fire-fst",[Ik]:"fire-fst-compat",[Ek]:"fire-vertex","fire-js":"fire-js",[Dk]:"fire-js-all"};var Yu=new Map,Tk=new Map,ag=new Map;function aT(t,e){try{t.container.addComponent(e)}catch(n){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Us(t){let e=t.name;if(ag.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;ag.set(e,t);for(let n of Yu.values())aT(n,t);for(let n of Tk.values())aT(n,t);return!0}function dT(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fT(t){return t==null?!1:t.settings!==void 0}var bk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Un=new Bs("app","Firebase",bk);var cg=class{constructor(e,n,r){this._isDeleted=!1,this._options=H({},e),this._config=H({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}};var hT=wk;function Sk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=H({name:sg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Un.create("bad-app-name",{appName:String(i)});if(n||(n=Qp()),!n)throw Un.create("no-options");let o=Yu.get(i);if(o){if(Oi(n,o.options)&&Oi(r,o.config))return o;throw Un.create("duplicate-app",{appName:i})}let s=new Ku(i);for(let u of ag.values())s.addComponent(u);let c=new cg(n,r,s);return Yu.set(i,c),c}function pT(t=sg){let e=Yu.get(t);if(!e&&t===sg&&Qp())return Sk();if(!e)throw Un.create("no-app",{appName:t});return e}function Hn(t,e,n){let r=Ck[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(s.join(" "));return}Us(new gn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Ak="firebase-heartbeat-database",Nk=1,Hs="firebase-heartbeat-store",rg=null;function gT(){return rg||(rg=oT(Ak,Nk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hs)}catch(n){console.warn(n)}}}}).catch(t=>{throw Un.create("idb-open",{originalErrorMessage:t.message})})),rg}async function Mk(t){try{let n=(await gT()).transaction(Hs),r=await n.objectStore(Hs).get(mT(t));return await n.done,r}catch(e){if(e instanceof pn)mn.warn(e.message);else{let n=Un.create("idb-get",{originalErrorMessage:e?.message});mn.warn(n.message)}}}async function cT(t,e){try{let r=(await gT()).transaction(Hs,"readwrite");await r.objectStore(Hs).put(e,mT(t)),await r.done}catch(n){if(n instanceof pn)mn.warn(n.message);else{let r=Un.create("idb-set",{originalErrorMessage:n?.message});mn.warn(r.message)}}}function mT(t){return`${t.name}!${t.options.appId}`}var Rk=1024,xk=30,ug=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new lg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=uT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>xk){let i=Ok(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=uT(),{heartbeatsToSend:n,unsentEntries:r}=Pk(this._heartbeatsCache.heartbeats),i=js(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return mn.warn(e),""}}};function uT(){return new Date().toISOString().substring(0,10)}function Pk(t,e=Rk){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),lT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var lg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yp()?JC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await Mk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return cT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return cT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function lT(t){return js(JSON.stringify({version:2,heartbeats:t})).length}function Ok(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function kk(t){Us(new gn("platform-logger",e=>new ig(e),"PRIVATE")),Us(new gn("heartbeat",e=>new ug(e),"PRIVATE")),Hn(og,sT,t),Hn(og,sT,"esm2020"),Hn("fire-js","")}kk("");var Fk="firebase",Vk="12.2.1";Hn(Fk,Vk,"app");var yT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vT={};var yn,dg;(function(){var t;function e(C,v){function E(){}E.prototype=v.prototype,C.D=v.prototype,C.prototype=new E,C.prototype.constructor=C,C.C=function(I,D,T){for(var _=Array(arguments.length-2),Zt=2;Zt<arguments.length;Zt++)_[Zt-2]=arguments[Zt];return v.prototype[D].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)I[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=C.g[0],E=C.g[1],D=C.g[2];var T=C.g[3],_=v+(T^E&(D^T))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=T+(D^v&(E^D))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(E^T&(v^E))+I[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=E+(v^D&(T^v))+I[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(T^E&(D^T))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(D^v&(E^D))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(E^T&(v^E))+I[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=E+(v^D&(T^v))+I[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(T^E&(D^T))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(D^v&(E^D))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(E^T&(v^E))+I[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=E+(v^D&(T^v))+I[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(T^E&(D^T))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(D^v&(E^D))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(E^T&(v^E))+I[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=E+(v^D&(T^v))+I[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^T&(E^D))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^D&(v^E))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(T^v))+I[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(D^T))+I[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(E^D))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^D&(v^E))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(T^v))+I[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(D^T))+I[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(E^D))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^D&(v^E))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(T^v))+I[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(D^T))+I[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(E^D))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^D&(v^E))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(T^v))+I[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(D^T))+I[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^T)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^D)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^E)+I[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=E+(D^T^v)+I[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^T)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^D)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^E)+I[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=E+(D^T^v)+I[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^T)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^D)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^E)+I[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=E+(D^T^v)+I[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^T)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^D)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^E)+I[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=E+(D^T^v)+I[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~T))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~D))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~E))+I[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=E+(T^(D|~v))+I[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~T))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~D))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~E))+I[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=E+(T^(D|~v))+I[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~T))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~D))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~E))+I[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=E+(T^(D|~v))+I[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~T))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~D))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~E))+I[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=E+(T^(D|~v))+I[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+T&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var E=v-this.blockSize,I=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=E;)i(this,C,T),T+=this.blockSize;if(typeof C=="string"){for(;T<v;)if(I[D++]=C.charCodeAt(T++),D==this.blockSize){i(this,I),D=0;break}}else for(;T<v;)if(I[D++]=C[T++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var E=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=E&255,E/=256;for(this.u(C),C=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)C[E++]=this.g[v]>>>I&255;return C};function o(C,v){var E=c;return Object.prototype.hasOwnProperty.call(E,C)?E[C]:E[C]=v(C)}function s(C,v){this.h=v;for(var E=[],I=!0,D=C.length-1;0<=D;D--){var T=C[D]|0;I&&T==v||(E[D]=T,I=!1)}this.g=E}var c={};function u(C){return-128<=C&&128>C?o(C,function(v){return new s([v|0],0>v?-1:0)}):new s([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return g;if(0>C)return A(d(-C));for(var v=[],E=1,I=0;C>=E;I++)v[I]=C/E|0,E*=4294967296;return new s(v,0)}function h(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return A(h(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(v,8)),I=g,D=0;D<C.length;D+=8){var T=Math.min(8,C.length-D),_=parseInt(C.substring(D,D+T),v);8>T?(T=d(Math.pow(v,T)),I=I.j(T).add(d(_))):(I=I.j(E),I=I.add(d(_)))}return I}var g=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(M(this))return-A(this).m();for(var C=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);C+=(0<=I?I:4294967296+I)*v,v*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(M(this))return"-"+A(this).toString(C);for(var v=d(Math.pow(C,6)),E=this,I="";;){var D=Pe(E,v).g;E=O(E,D.j(v));var T=((0<E.g.length?E.g[0]:E.h)>>>0).toString(C);if(E=D,S(E))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function M(C){return C.h==-1}t.l=function(C){return C=O(this,C),M(C)?-1:S(C)?0:1};function A(C){for(var v=C.g.length,E=[],I=0;I<v;I++)E[I]=~C.g[I];return new s(E,~C.h).add(m)}t.abs=function(){return M(this)?A(this):this},t.add=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],I=0,D=0;D<=v;D++){var T=I+(this.i(D)&65535)+(C.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);I=_>>>16,T&=65535,_&=65535,E[D]=_<<16|T}return new s(E,E[E.length-1]&-2147483648?-1:0)};function O(C,v){return C.add(A(v))}t.j=function(C){if(S(this)||S(C))return g;if(M(this))return M(C)?A(this).j(A(C)):A(A(this).j(C));if(M(C))return A(this.j(A(C)));if(0>this.l(y)&&0>C.l(y))return d(this.m()*C.m());for(var v=this.g.length+C.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<C.g.length;D++){var T=this.i(I)>>>16,_=this.i(I)&65535,Zt=C.i(D)>>>16,ho=C.i(D)&65535;E[2*I+2*D]+=_*ho,X(E,2*I+2*D),E[2*I+2*D+1]+=T*ho,X(E,2*I+2*D+1),E[2*I+2*D+1]+=_*Zt,X(E,2*I+2*D+1),E[2*I+2*D+2]+=T*Zt,X(E,2*I+2*D+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function X(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function te(C,v){this.g=C,this.h=v}function Pe(C,v){if(S(v))throw Error("division by zero");if(S(C))return new te(g,g);if(M(C))return v=Pe(A(C),v),new te(A(v.g),A(v.h));if(M(v))return v=Pe(C,A(v)),new te(A(v.g),v.h);if(30<C.g.length){if(M(C)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(C);)E=Pt(E),I=Pt(I);var D=Le(E,1),T=Le(I,1);for(I=Le(I,2),E=Le(E,2);!S(I);){var _=T.add(I);0>=_.l(C)&&(D=D.add(E),T=_),I=Le(I,1),E=Le(E,1)}return v=O(C,D.j(v)),new te(D,v)}for(D=g;0<=C.l(v);){for(E=Math.max(1,Math.floor(C.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=d(E),_=T.j(v);M(_)||0<_.l(C);)E-=I,T=d(E),_=T.j(v);S(T)&&(T=m),D=D.add(T),C=O(C,_)}return new te(D,C)}t.A=function(C){return Pe(this,C).h},t.and=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&C.i(I);return new s(E,this.h&C.h)},t.or=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|C.i(I);return new s(E,this.h|C.h)},t.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^C.i(I);return new s(E,this.h^C.h)};function Pt(C){for(var v=C.g.length+1,E=[],I=0;I<v;I++)E[I]=C.i(I)<<1|C.i(I-1)>>>31;return new s(E,C.h)}function Le(C,v){var E=v>>5;v%=32;for(var I=C.g.length-E,D=[],T=0;T<I;T++)D[T]=0<v?C.i(T+E)>>>v|C.i(T+E+1)<<32-v:C.i(T+E);return new s(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dg=vT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,yn=vT.Integer=s}).apply(typeof yT<"u"?yT:typeof self<"u"?self:typeof window<"u"?window:{});var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vn={};var fg,Lk,Vi,hg,$s,Ju,pg,gg,mg;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,f){return a==Array.prototype||a==Object.prototype||(a[l]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zu=="object"&&Zu];for(var l=0;l<a.length;++l){var f=a[l];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,l){if(l)e:{var f=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var w=a[p];if(!(w in f))break e;f=f[w]}a=a[a.length-1],p=f[a],l=l(p),l!=p&&l!=null&&e(f,a,{configurable:!0,writable:!0,value:l})}}function o(a,l){a instanceof String&&(a+="");var f=0,p=!1,w={next:function(){if(!p&&f<a.length){var b=f++;return{value:l(b,a[b]),done:!1}}return p=!0,{done:!0,value:void 0}}};return w[Symbol.iterator]=function(){return w},w}i("Array.prototype.values",function(a){return a||function(){return o(this,function(l,f){return f})}});var s=s||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function h(a,l,f){return a.call.apply(a.bind,arguments)}function g(a,l,f){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var w=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(w,p),a.apply(l,w)}}return function(){return a.apply(l,arguments)}}function m(a,l,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,m.apply(null,arguments)}function y(a,l){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function S(a,l){function f(){}f.prototype=l.prototype,a.aa=l.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(p,w,b){for(var x=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)x[pe-2]=arguments[pe];return l.prototype[w].apply(p,x)}}function M(a){let l=a.length;if(0<l){let f=Array(l);for(let p=0;p<l;p++)f[p]=a[p];return f}return[]}function A(a,l){for(let f=1;f<arguments.length;f++){let p=arguments[f];if(u(p)){let w=a.length||0,b=p.length||0;a.length=w+b;for(let x=0;x<b;x++)a[w+x]=p[x]}else a.push(p)}}class O{constructor(l,f){this.i=l,this.j=f,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function X(a){return/^[\s\xa0]*$/.test(a)}function te(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Pe(a){return Pe[" "](a),a}Pe[" "]=function(){};var Pt=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function Le(a,l,f){for(let p in a)l.call(f,a[p],p,a)}function C(a,l){for(let f in a)l.call(void 0,a[f],f,a)}function v(a){let l={};for(let f in a)l[f]=a[f];return l}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,l){let f,p;for(let w=1;w<arguments.length;w++){p=arguments[w];for(f in p)a[f]=p[f];for(let b=0;b<E.length;b++)f=E[b],Object.prototype.hasOwnProperty.call(p,f)&&(a[f]=p[f])}}function D(a){var l=1;a=a.split(":");let f=[];for(;0<l&&a.length;)f.push(a.shift()),l--;return a.length&&f.push(a.join(":")),f}function T(a){c.setTimeout(()=>{throw a},0)}function _(){var a=ql;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Zt{constructor(){this.h=this.g=null}add(l,f){let p=ho.get();p.set(l,f),this.h?this.h.next=p:this.g=p,this.h=p}}var ho=new O(()=>new RS,a=>a.reset());class RS{constructor(){this.next=this.g=this.h=null}set(l,f){this.h=l,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let po,go=!1,ql=new Zt,Ty=()=>{let a=c.Promise.resolve(void 0);po=()=>{a.then(xS)}};var xS=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(f){T(f)}var l=ho;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}go=!1};function Tn(){this.s=this.s,this.C=this.C}Tn.prototype.s=!1,Tn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var PS=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,l),c.removeEventListener("test",f,l)}catch{}return a})();function mo(a,l){if(je.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(Pt){e:{try{Pe(l.nodeName);var w=!0;break e}catch{}w=!1}w||(l=null)}}else f=="mouseover"?l=a.fromElement:f=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:OS[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&mo.aa.h.call(this)}}S(mo,je);var OS={2:"touch",3:"pen",4:"mouse"};mo.prototype.h=function(){mo.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var yo="closure_listenable_"+(1e6*Math.random()|0),kS=0;function FS(a,l,f,p,w){this.listener=a,this.proxy=null,this.src=l,this.type=f,this.capture=!!p,this.ha=w,this.key=++kS,this.da=this.fa=!1}function ua(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function la(a){this.src=a,this.g={},this.h=0}la.prototype.add=function(a,l,f,p,w){var b=a.toString();a=this.g[b],a||(a=this.g[b]=[],this.h++);var x=Wl(a,l,p,w);return-1<x?(l=a[x],f||(l.fa=!1)):(l=new FS(l,this.src,b,!!p,w),l.fa=f,a.push(l)),l};function zl(a,l){var f=l.type;if(f in a.g){var p=a.g[f],w=Array.prototype.indexOf.call(p,l,void 0),b;(b=0<=w)&&Array.prototype.splice.call(p,w,1),b&&(ua(l),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Wl(a,l,f,p){for(var w=0;w<a.length;++w){var b=a[w];if(!b.da&&b.listener==l&&b.capture==!!f&&b.ha==p)return w}return-1}var Kl="closure_lm_"+(1e6*Math.random()|0),Ql={};function by(a,l,f,p,w){if(p&&p.once)return Ay(a,l,f,p,w);if(Array.isArray(l)){for(var b=0;b<l.length;b++)by(a,l[b],f,p,w);return null}return f=Xl(f),a&&a[yo]?a.K(l,f,d(p)?!!p.capture:!!p,w):Sy(a,l,f,!1,p,w)}function Sy(a,l,f,p,w,b){if(!l)throw Error("Invalid event type");var x=d(w)?!!w.capture:!!w,pe=Zl(a);if(pe||(a[Kl]=pe=new la(a)),f=pe.add(l,f,p,x,b),f.proxy)return f;if(p=VS(),f.proxy=p,p.src=a,p.listener=f,a.addEventListener)PS||(w=x),w===void 0&&(w=!1),a.addEventListener(l.toString(),p,w);else if(a.attachEvent)a.attachEvent(My(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function VS(){function a(f){return l.call(a.src,a.listener,f)}let l=LS;return a}function Ay(a,l,f,p,w){if(Array.isArray(l)){for(var b=0;b<l.length;b++)Ay(a,l[b],f,p,w);return null}return f=Xl(f),a&&a[yo]?a.L(l,f,d(p)?!!p.capture:!!p,w):Sy(a,l,f,!0,p,w)}function Ny(a,l,f,p,w){if(Array.isArray(l))for(var b=0;b<l.length;b++)Ny(a,l[b],f,p,w);else p=d(p)?!!p.capture:!!p,f=Xl(f),a&&a[yo]?(a=a.i,l=String(l).toString(),l in a.g&&(b=a.g[l],f=Wl(b,f,p,w),-1<f&&(ua(b[f]),Array.prototype.splice.call(b,f,1),b.length==0&&(delete a.g[l],a.h--)))):a&&(a=Zl(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Wl(l,f,p,w)),(f=-1<a?l[a]:null)&&Yl(f))}function Yl(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[yo])zl(l.i,a);else{var f=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(f,p,a.capture):l.detachEvent?l.detachEvent(My(f),p):l.addListener&&l.removeListener&&l.removeListener(p),(f=Zl(l))?(zl(f,a),f.h==0&&(f.src=null,l[Kl]=null)):ua(a)}}}function My(a){return a in Ql?Ql[a]:Ql[a]="on"+a}function LS(a,l){if(a.da)a=!0;else{l=new mo(l,this);var f=a.listener,p=a.ha||a.src;a.fa&&Yl(a),a=f.call(p,l)}return a}function Zl(a){return a=a[Kl],a instanceof la?a:null}var Jl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xl(a){return typeof a=="function"?a:(a[Jl]||(a[Jl]=function(l){return a.handleEvent(l)}),a[Jl])}function Be(){Tn.call(this),this.i=new la(this),this.M=this,this.F=null}S(Be,Tn),Be.prototype[yo]=!0,Be.prototype.removeEventListener=function(a,l,f,p){Ny(this,a,l,f,p)};function Ye(a,l){var f,p=a.F;if(p)for(f=[];p;p=p.F)f.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new je(l,a);else if(l instanceof je)l.target=l.target||a;else{var w=l;l=new je(p,a),I(l,w)}if(w=!0,f)for(var b=f.length-1;0<=b;b--){var x=l.g=f[b];w=da(x,p,!0,l)&&w}if(x=l.g=a,w=da(x,p,!0,l)&&w,w=da(x,p,!1,l)&&w,f)for(b=0;b<f.length;b++)x=l.g=f[b],w=da(x,p,!1,l)&&w}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var f=a.g[l],p=0;p<f.length;p++)ua(f[p]);delete a.g[l],a.h--}}this.F=null},Be.prototype.K=function(a,l,f,p){return this.i.add(String(a),l,!1,f,p)},Be.prototype.L=function(a,l,f,p){return this.i.add(String(a),l,!0,f,p)};function da(a,l,f,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var w=!0,b=0;b<l.length;++b){var x=l[b];if(x&&!x.da&&x.capture==f){var pe=x.listener,Oe=x.ha||x.src;x.fa&&zl(a.i,x),w=pe.call(Oe,p)!==!1&&w}}return w&&!p.defaultPrevented}function Ry(a,l,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function xy(a){a.g=Ry(()=>{a.g=null,a.i&&(a.i=!1,xy(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class jS extends Tn{constructor(l,f){super(),this.m=l,this.l=f,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:xy(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vo(a){Tn.call(this),this.h=a,this.g={}}S(vo,Tn);var Py=[];function Oy(a){Le(a.g,function(l,f){this.g.hasOwnProperty(f)&&Yl(l)},a),a.g={}}vo.prototype.N=function(){vo.aa.N.call(this),Oy(this)},vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ed=c.JSON.stringify,BS=c.JSON.parse,US=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function td(){}td.prototype.h=null;function ky(a){return a.h||(a.h=a.i())}function Fy(){}var _o={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nd(){je.call(this,"d")}S(nd,je);function rd(){je.call(this,"c")}S(rd,je);var Yn={},Vy=null;function fa(){return Vy=Vy||new Be}Yn.La="serverreachability";function Ly(a){je.call(this,Yn.La,a)}S(Ly,je);function Eo(a){let l=fa();Ye(l,new Ly(l))}Yn.STAT_EVENT="statevent";function jy(a,l){je.call(this,Yn.STAT_EVENT,a),this.stat=l}S(jy,je);function Ze(a){let l=fa();Ye(l,new jy(l,a))}Yn.Ma="timingevent";function By(a,l){je.call(this,Yn.Ma,a),this.size=l}S(By,je);function Io(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function Do(){this.g=!0}Do.prototype.xa=function(){this.g=!1};function HS(a,l,f,p,w,b){a.info(function(){if(a.g)if(b)for(var x="",pe=b.split("&"),Oe=0;Oe<pe.length;Oe++){var se=pe[Oe].split("=");if(1<se.length){var Ue=se[0];se=se[1];var He=Ue.split("_");x=2<=He.length&&He[1]=="type"?x+(Ue+"="+se+"&"):x+(Ue+"=redacted&")}}else x=null;else x=b;return"XMLHTTP REQ ("+p+") [attempt "+w+"]: "+l+`
`+f+`
`+x})}function $S(a,l,f,p,w,b,x){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+w+"]: "+l+`
`+f+`
`+b+" "+x})}function Gr(a,l,f,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+qS(a,f)+(p?" "+p:"")})}function GS(a,l){a.info(function(){return"TIMEOUT: "+l})}Do.prototype.info=function(){};function qS(a,l){if(!a.g)return l;if(!l)return null;try{var f=JSON.parse(l);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var p=f[a];if(!(2>p.length)){var w=p[1];if(Array.isArray(w)&&!(1>w.length)){var b=w[0];if(b!="noop"&&b!="stop"&&b!="close")for(var x=1;x<w.length;x++)w[x]=""}}}}return ed(f)}catch{return l}}var ha={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Uy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},id;function pa(){}S(pa,td),pa.prototype.g=function(){return new XMLHttpRequest},pa.prototype.i=function(){return{}},id=new pa;function bn(a,l,f,p){this.j=a,this.i=l,this.l=f,this.R=p||1,this.U=new vo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hy}function Hy(){this.i=null,this.g="",this.h=!1}var $y={},od={};function sd(a,l,f){a.L=1,a.v=va(Jt(l)),a.m=f,a.P=!0,Gy(a,null)}function Gy(a,l){a.F=Date.now(),ga(a),a.A=Jt(a.v);var f=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),iv(f.i,"t",p),a.C=0,f=a.j.J,a.h=new Hy,a.g=Dv(a.j,f?l:null,!a.m),0<a.O&&(a.M=new jS(m(a.Y,a,a.g),a.O)),l=a.U,f=a.g,p=a.ca;var w="readystatechange";Array.isArray(w)||(w&&(Py[0]=w.toString()),w=Py);for(var b=0;b<w.length;b++){var x=by(f,w[b],p||l.handleEvent,!1,l.h||l);if(!x)break;l.g[x.key]=x}l=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),Eo(),HS(a.i,a.u,a.A,a.l,a.R,a.m)}bn.prototype.ca=function(a){a=a.target;let l=this.M;l&&Xt(a)==3?l.j():this.Y(a)},bn.prototype.Y=function(a){try{if(a==this.g)e:{let He=Xt(this.g);var l=this.g.Ba();let Wr=this.g.Z();if(!(3>He)&&(He!=3||this.g&&(this.h.h||this.g.oa()||dv(this.g)))){this.J||He!=4||l==7||(l==8||0>=Wr?Eo(3):Eo(2)),ad(this);var f=this.g.Z();this.X=f;t:if(qy(this)){var p=dv(this.g);a="";var w=p.length,b=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zn(this),wo(this);var x="";break t}this.h.i=new c.TextDecoder}for(l=0;l<w;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(b&&l==w-1)});p.length=0,this.h.g+=a,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,$S(this.i,this.u,this.A,this.l,this.R,He,f),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,Oe=this.g;if((pe=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(pe)){var se=pe;break t}}se=null}if(f=se)Gr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cd(this,f);else{this.o=!1,this.s=3,Ze(12),Zn(this),wo(this);break e}}if(this.P){f=!0;let wt;for(;!this.J&&this.C<x.length;)if(wt=zS(this,x),wt==od){He==4&&(this.s=4,Ze(14),f=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==$y){this.s=4,Ze(15),Gr(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else Gr(this.i,this.l,wt,null),cd(this,wt);if(qy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||x.length!=0||this.h.h||(this.s=1,Ze(16),f=!1),this.o=this.o&&f,!f)Gr(this.i,this.l,x,"[Invalid Chunked Response]"),Zn(this),wo(this);else if(0<x.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),pd(Ue),Ue.M=!0,Ze(11))}}else Gr(this.i,this.l,x,null),cd(this,x);He==4&&Zn(this),this.o&&!this.J&&(He==4?vv(this.j,this):(this.o=!1,ga(this)))}else uA(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),Zn(this),wo(this)}}}catch{}finally{}};function qy(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function zS(a,l){var f=a.C,p=l.indexOf(`
`,f);return p==-1?od:(f=Number(l.substring(f,p)),isNaN(f)?$y:(p+=1,p+f>l.length?od:(l=l.slice(p,p+f),a.C=p+f,l)))}bn.prototype.cancel=function(){this.J=!0,Zn(this)};function ga(a){a.S=Date.now()+a.I,zy(a,a.I)}function zy(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Io(m(a.ba,a),l)}function ad(a){a.B&&(c.clearTimeout(a.B),a.B=null)}bn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(GS(this.i,this.A),this.L!=2&&(Eo(),Ze(17)),Zn(this),this.s=2,wo(this)):zy(this,this.S-a)};function wo(a){a.j.G==0||a.J||vv(a.j,a)}function Zn(a){ad(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,Oy(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function cd(a,l){try{var f=a.j;if(f.G!=0&&(f.g==a||ud(f.h,a))){if(!a.K&&ud(f.h,a)&&f.G==3){try{var p=f.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var w=p;if(w[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)wa(f),Ia(f);else break e;hd(f),Ze(18)}}else f.za=w[1],0<f.za-f.T&&37500>w[2]&&f.F&&f.v==0&&!f.C&&(f.C=Io(m(f.Za,f),6e3));if(1>=Qy(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Xn(f,11)}else if((a.K||f.g==a)&&wa(f),!X(l))for(w=f.Da.g.parse(l),l=0;l<w.length;l++){let se=w[l];if(f.T=se[0],se=se[1],f.G==2)if(se[0]=="c"){f.K=se[1],f.ia=se[2];let Ue=se[3];Ue!=null&&(f.la=Ue,f.j.info("VER="+f.la));let He=se[4];He!=null&&(f.Aa=He,f.j.info("SVER="+f.Aa));let Wr=se[5];Wr!=null&&typeof Wr=="number"&&0<Wr&&(p=1.5*Wr,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;let wt=a.g;if(wt){let Ta=wt.g?wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var b=p.h;b.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(ld(b,b.h),b.h=null))}if(p.D){let gd=wt.g?wt.g.getResponseHeader("X-HTTP-Session-Id"):null;gd&&(p.ya=gd,me(p.I,p.D,gd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var x=a;if(p.qa=Iv(p,p.J?p.ia:null,p.W),x.K){Yy(p.h,x);var pe=x,Oe=p.L;Oe&&(pe.I=Oe),pe.B&&(ad(pe),ga(pe)),p.g=x}else mv(p);0<f.i.length&&Da(f)}else se[0]!="stop"&&se[0]!="close"||Xn(f,7);else f.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?Xn(f,7):fd(f):se[0]!="noop"&&f.l&&f.l.ta(se),f.v=0)}}Eo(4)}catch{}}var WS=class{constructor(a,l){this.g=a,this.map=l}};function Wy(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ky(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Qy(a){return a.h?1:a.g?a.g.size:0}function ud(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function ld(a,l){a.g?a.g.add(l):a.h=l}function Yy(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}Wy.prototype.cancel=function(){if(this.i=Zy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Zy(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let f of a.g.values())l=l.concat(f.D);return l}return M(a.i)}function KS(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],f=a.length,p=0;p<f;p++)l.push(a[p]);return l}l=[],f=0;for(p in a)l[f++]=a[p];return l}function QS(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var f=0;f<a;f++)l.push(f);return l}l=[],f=0;for(let p in a)l[f++]=p;return l}}}function Jy(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var f=QS(a),p=KS(a),w=p.length,b=0;b<w;b++)l.call(void 0,p[b],f&&f[b],a)}var Xy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YS(a,l){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var p=a[f].indexOf("="),w=null;if(0<=p){var b=a[f].substring(0,p);w=a[f].substring(p+1)}else b=a[f];l(b,w?decodeURIComponent(w.replace(/\+/g," ")):"")}}}function Jn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Jn){this.h=a.h,ma(this,a.j),this.o=a.o,this.g=a.g,ya(this,a.s),this.l=a.l;var l=a.i,f=new bo;f.i=l.i,l.g&&(f.g=new Map(l.g),f.h=l.h),ev(this,f),this.m=a.m}else a&&(l=String(a).match(Xy))?(this.h=!1,ma(this,l[1]||"",!0),this.o=Co(l[2]||""),this.g=Co(l[3]||"",!0),ya(this,l[4]),this.l=Co(l[5]||"",!0),ev(this,l[6]||"",!0),this.m=Co(l[7]||"")):(this.h=!1,this.i=new bo(null,this.h))}Jn.prototype.toString=function(){var a=[],l=this.j;l&&a.push(To(l,tv,!0),":");var f=this.g;return(f||l=="file")&&(a.push("//"),(l=this.o)&&a.push(To(l,tv,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(To(f,f.charAt(0)=="/"?XS:JS,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",To(f,tA)),a.join("")};function Jt(a){return new Jn(a)}function ma(a,l,f){a.j=f?Co(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function ya(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function ev(a,l,f){l instanceof bo?(a.i=l,nA(a.i,a.h)):(f||(l=To(l,eA)),a.i=new bo(l,a.h))}function me(a,l,f){a.i.set(l,f)}function va(a){return me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Co(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function To(a,l,f){return typeof a=="string"?(a=encodeURI(a).replace(l,ZS),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ZS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var tv=/[#\/\?@]/g,JS=/[#\?:]/g,XS=/[#\?]/g,eA=/[#\?@]/g,tA=/#/g;function bo(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function Sn(a){a.g||(a.g=new Map,a.h=0,a.i&&YS(a.i,function(l,f){a.add(decodeURIComponent(l.replace(/\+/g," ")),f)}))}t=bo.prototype,t.add=function(a,l){Sn(this),this.i=null,a=qr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(l),this.h+=1,this};function nv(a,l){Sn(a),l=qr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function rv(a,l){return Sn(a),l=qr(a,l),a.g.has(l)}t.forEach=function(a,l){Sn(this),this.g.forEach(function(f,p){f.forEach(function(w){a.call(l,w,p,this)},this)},this)},t.na=function(){Sn(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),f=[];for(let p=0;p<l.length;p++){let w=a[p];for(let b=0;b<w.length;b++)f.push(l[p])}return f},t.V=function(a){Sn(this);let l=[];if(typeof a=="string")rv(this,a)&&(l=l.concat(this.g.get(qr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)l=l.concat(a[f])}return l},t.set=function(a,l){return Sn(this),this.i=null,a=qr(this,a),rv(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},t.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function iv(a,l,f){nv(a,l),0<f.length&&(a.i=null,a.g.set(qr(a,l),M(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var f=0;f<l.length;f++){var p=l[f];let b=encodeURIComponent(String(p)),x=this.V(p);for(p=0;p<x.length;p++){var w=b;x[p]!==""&&(w+="="+encodeURIComponent(String(x[p]))),a.push(w)}}return this.i=a.join("&")};function qr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function nA(a,l){l&&!a.j&&(Sn(a),a.i=null,a.g.forEach(function(f,p){var w=p.toLowerCase();p!=w&&(nv(this,p),iv(this,w,f))},a)),a.j=l}function rA(a,l){let f=new Do;if(c.Image){let p=new Image;p.onload=y(An,f,"TestLoadImage: loaded",!0,l,p),p.onerror=y(An,f,"TestLoadImage: error",!1,l,p),p.onabort=y(An,f,"TestLoadImage: abort",!1,l,p),p.ontimeout=y(An,f,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function iA(a,l){let f=new Do,p=new AbortController,w=setTimeout(()=>{p.abort(),An(f,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(b=>{clearTimeout(w),b.ok?An(f,"TestPingServer: ok",!0,l):An(f,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(w),An(f,"TestPingServer: error",!1,l)})}function An(a,l,f,p,w){try{w&&(w.onload=null,w.onerror=null,w.onabort=null,w.ontimeout=null),p(f)}catch{}}function oA(){this.g=new US}function sA(a,l,f){let p=f||"";try{Jy(a,function(w,b){let x=w;d(w)&&(x=ed(w)),l.push(p+b+"="+encodeURIComponent(x))})}catch(w){throw l.push(p+"type="+encodeURIComponent("_badmap")),w}}function So(a){this.l=a.Ub||null,this.j=a.eb||!1}S(So,td),So.prototype.g=function(){return new _a(this.l,this.j)},So.prototype.i=(function(a){return function(){return a}})({});function _a(a,l){Be.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(_a,Be),t=_a.prototype,t.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,No(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ao(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,No(this)),this.g&&(this.readyState=3,No(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ov(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ov(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?Ao(this):No(this),this.readyState==3&&ov(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ao(this))},t.Qa=function(a){this.g&&(this.response=a,Ao(this))},t.ga=function(){this.g&&Ao(this)};function Ao(a){a.readyState=4,a.l=null,a.j=null,a.v=null,No(a)}t.setRequestHeader=function(a,l){this.u.append(a,l)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var f=l.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=l.next();return a.join(`\r
`)};function No(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function sv(a){let l="";return Le(a,function(f,p){l+=p,l+=":",l+=f,l+=`\r
`}),l}function dd(a,l,f){e:{for(p in f){var p=!1;break e}p=!0}p||(f=sv(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):me(a,l,f))}function _e(a){Be.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(_e,Be);var aA=/^https?$/i,cA=["POST","PUT"];t=_e.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,l,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():id.g(),this.v=this.o?ky(this.o):ky(id),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(b){av(this,b);return}if(a=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var w in p)f.set(w,p[w]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let b of p.keys())f.set(b,p.get(b));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),w=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(cA,l,void 0))||p||w||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[b,x]of f)this.g.setRequestHeader(b,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lv(this),this.u=!0,this.g.send(a),this.u=!1}catch(b){av(this,b)}};function av(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,cv(a),Ea(a)}function cv(a){a.A||(a.A=!0,Ye(a,"complete"),Ye(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ye(this,"complete"),Ye(this,"abort"),Ea(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ea(this,!0)),_e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?uv(this):this.bb())},t.bb=function(){uv(this)};function uv(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Xt(a)!=4||a.Z()!=2)){if(a.u&&Xt(a)==4)Ry(a.Ea,0,a);else if(Ye(a,"readystatechange"),Xt(a)==4){a.h=!1;try{let x=a.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var f;if(!(f=l)){var p;if(p=x===0){var w=String(a.D).match(Xy)[1]||null;!w&&c.self&&c.self.location&&(w=c.self.location.protocol.slice(0,-1)),p=!aA.test(w?w.toLowerCase():"")}f=p}if(f)Ye(a,"complete"),Ye(a,"success");else{a.m=6;try{var b=2<Xt(a)?a.g.statusText:""}catch{b=""}a.l=b+" ["+a.Z()+"]",cv(a)}}finally{Ea(a)}}}}function Ea(a,l){if(a.g){lv(a);let f=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||Ye(a,"ready");try{f.onreadystatechange=p}catch{}}}function lv(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Xt(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),BS(l)}};function dv(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function uA(a){let l={};a=(a.g&&2<=Xt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(X(a[p]))continue;var f=D(a[p]);let w=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let b=l[w]||[];l[w]=b,b.push(f)}C(l,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(a,l,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||l}function fv(a){this.Aa=0,this.i=[],this.j=new Do,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mo("baseRetryDelayMs",5e3,a),this.cb=Mo("retryDelaySeedMs",1e4,a),this.Wa=Mo("forwardChannelMaxRetries",2,a),this.wa=Mo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Wy(a&&a.concurrentRequestLimit),this.Da=new oA,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=fv.prototype,t.la=8,t.G=1,t.connect=function(a,l,f,p){Ze(0),this.W=a,this.H=l||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Iv(this,null,this.W),Da(this)};function fd(a){if(hv(a),a.G==3){var l=a.U++,f=Jt(a.I);if(me(f,"SID",a.K),me(f,"RID",l),me(f,"TYPE","terminate"),Ro(a,f),l=new bn(a,a.j,l),l.L=2,l.v=va(Jt(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=l.v,f=!0),f||(l.g=Dv(l.j,null),l.g.ea(l.v)),l.F=Date.now(),ga(l)}Ev(a)}function Ia(a){a.g&&(pd(a),a.g.cancel(),a.g=null)}function hv(a){Ia(a),a.u&&(c.clearTimeout(a.u),a.u=null),wa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Da(a){if(!Ky(a.h)&&!a.s){a.s=!0;var l=a.Ga;po||Ty(),go||(po(),go=!0),ql.add(l,a),a.B=0}}function lA(a,l){return Qy(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Io(m(a.Ga,a,l),_v(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let w=new bn(this,this.j,a),b=this.o;if(this.S&&(b?(b=v(b),I(b,this.S)):b=this.S),this.m!==null||this.O||(w.H=b,b=null),this.P)e:{for(var l=0,f=0;f<this.i.length;f++){t:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=f;break e}if(l===4096||f===this.i.length-1){l=f+1;break e}}l=1e3}else l=1e3;l=gv(this,w,l),f=Jt(this.I),me(f,"RID",a),me(f,"CVER",22),this.D&&me(f,"X-HTTP-Session-Id",this.D),Ro(this,f),b&&(this.O?l="headers="+encodeURIComponent(String(sv(b)))+"&"+l:this.m&&dd(f,this.m,b)),ld(this.h,w),this.Ua&&me(f,"TYPE","init"),this.P?(me(f,"$req",l),me(f,"SID","null"),w.T=!0,sd(w,f,null)):sd(w,f,l),this.G=2}}else this.G==3&&(a?pv(this,a):this.i.length==0||Ky(this.h)||pv(this))};function pv(a,l){var f;l?f=l.l:f=a.U++;let p=Jt(a.I);me(p,"SID",a.K),me(p,"RID",f),me(p,"AID",a.T),Ro(a,p),a.m&&a.o&&dd(p,a.m,a.o),f=new bn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),l&&(a.i=l.D.concat(a.i)),l=gv(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ld(a.h,f),sd(f,p,l)}function Ro(a,l){a.H&&Le(a.H,function(f,p){me(l,p,f)}),a.l&&Jy({},function(f,p){me(l,p,f)})}function gv(a,l,f){f=Math.min(a.i.length,f);var p=a.l?m(a.l.Na,a.l,a):null;e:{var w=a.i;let b=-1;for(;;){let x=["count="+f];b==-1?0<f?(b=w[0].g,x.push("ofs="+b)):b=0:x.push("ofs="+b);let pe=!0;for(let Oe=0;Oe<f;Oe++){let se=w[Oe].g,Ue=w[Oe].map;if(se-=b,0>se)b=Math.max(0,w[Oe].g-100),pe=!1;else try{sA(Ue,x,"req"+se+"_")}catch{p&&p(Ue)}}if(pe){p=x.join("&");break e}}}return a=a.i.splice(0,f),l.D=a,p}function mv(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;po||Ty(),go||(po(),go=!0),ql.add(l,a),a.v=0}}function hd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Io(m(a.Fa,a),_v(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,yv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Io(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),Ia(this),yv(this))};function pd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function yv(a){a.g=new bn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=Jt(a.qa);me(l,"RID","rpc"),me(l,"SID",a.K),me(l,"AID",a.T),me(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&me(l,"TO",a.ja),me(l,"TYPE","xmlhttp"),Ro(a,l),a.m&&a.o&&dd(l,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=va(Jt(l)),f.m=null,f.P=!0,Gy(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Ia(this),hd(this),Ze(19))};function wa(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function vv(a,l){var f=null;if(a.g==l){wa(a),pd(a),a.g=null;var p=2}else if(ud(a.h,l))f=l.D,Yy(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){f=l.m?l.m.length:0,l=Date.now()-l.F;var w=a.B;p=fa(),Ye(p,new By(p,f)),Da(a)}else mv(a);else if(w=l.s,w==3||w==0&&0<l.X||!(p==1&&lA(a,l)||p==2&&hd(a)))switch(f&&0<f.length&&(l=a.h,l.i=l.i.concat(f)),w){case 1:Xn(a,5);break;case 4:Xn(a,10);break;case 3:Xn(a,6);break;default:Xn(a,2)}}}function _v(a,l){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*l}function Xn(a,l){if(a.j.info("Error code "+l),l==2){var f=m(a.fb,a),p=a.Xa;let w=!p;p=new Jn(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ma(p,"https"),va(p),w?rA(p.toString(),f):iA(p.toString(),f)}else Ze(2);a.G=0,a.l&&a.l.sa(l),Ev(a),hv(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function Ev(a){if(a.G=0,a.ka=[],a.l){let l=Zy(a.h);(l.length!=0||a.i.length!=0)&&(A(a.ka,l),A(a.ka,a.i),a.h.i.length=0,M(a.i),a.i.length=0),a.l.ra()}}function Iv(a,l,f){var p=f instanceof Jn?Jt(f):new Jn(f);if(p.g!="")l&&(p.g=l+"."+p.g),ya(p,p.s);else{var w=c.location;p=w.protocol,l=l?l+"."+w.hostname:w.hostname,w=+w.port;var b=new Jn(null);p&&ma(b,p),l&&(b.g=l),w&&ya(b,w),f&&(b.l=f),p=b}return f=a.D,l=a.ya,f&&l&&me(p,f,l),me(p,"VER",a.la),Ro(a,p),p}function Dv(a,l,f){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new _e(new So({eb:f})):new _e(a.pa),l.Ha(a.J),l}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wv(){}t=wv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ca(){}Ca.prototype.g=function(a,l){return new it(a,l)};function it(a,l){Be.call(this),this.g=new fv(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!X(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!X(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new zr(this)}S(it,Be),it.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},it.prototype.close=function(){fd(this.g)},it.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=ed(a),a=f);l.i.push(new WS(l.Ya++,a)),l.G==3&&Da(l)},it.prototype.N=function(){this.g.l=null,delete this.j,fd(this.g),delete this.g,it.aa.N.call(this)};function Cv(a){nd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let f in l){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}S(Cv,nd);function Tv(){rd.call(this),this.status=1}S(Tv,rd);function zr(a){this.g=a}S(zr,wv),zr.prototype.ua=function(){Ye(this.g,"a")},zr.prototype.ta=function(a){Ye(this.g,new Cv(a))},zr.prototype.sa=function(a){Ye(this.g,new Tv)},zr.prototype.ra=function(){Ye(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,it.prototype.send=it.prototype.o,it.prototype.open=it.prototype.m,it.prototype.close=it.prototype.close,mg=vn.createWebChannelTransport=function(){return new Ca},gg=vn.getStatEventTarget=function(){return fa()},pg=vn.Event=Yn,Ju=vn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ha.NO_ERROR=0,ha.TIMEOUT=8,ha.HTTP_ERROR=6,$s=vn.ErrorCode=ha,Uy.COMPLETE="complete",hg=vn.EventType=Uy,Fy.EventType=_o,_o.OPEN="a",_o.CLOSE="b",_o.ERROR="c",_o.MESSAGE="d",Be.prototype.listen=Be.prototype.K,Vi=vn.WebChannel=Fy,Lk=vn.FetchXmlHttpFactory=So,_e.prototype.listenOnce=_e.prototype.L,_e.prototype.getLastError=_e.prototype.Ka,_e.prototype.getLastErrorCode=_e.prototype.Ba,_e.prototype.getStatus=_e.prototype.Z,_e.prototype.getResponseJson=_e.prototype.Oa,_e.prototype.getResponseText=_e.prototype.oa,_e.prototype.send=_e.prototype.ea,_e.prototype.setWithCredentials=_e.prototype.Ha,fg=vn.XhrIo=_e}).apply(typeof Zu<"u"?Zu:typeof self<"u"?self:typeof window<"u"?window:{});var _T="@firebase/firestore",ET="4.9.1";var Re=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Re.UNAUTHENTICATED=new Re(null),Re.GOOGLE_CREDENTIALS=new Re("google-credentials-uid"),Re.FIRST_PARTY=new Re("first-party-uid"),Re.MOCK_USER=new Re("mock-user");var co="12.2.0";var Fr=new Fi("@firebase/firestore");function Li(){return Fr.logLevel}function P(t,...e){if(Fr.logLevel<=re.DEBUG){let n=e.map(iy);Fr.debug(`Firestore (${co}): ${t}`,...n)}}function _n(t,...e){if(Fr.logLevel<=re.ERROR){let n=e.map(iy);Fr.error(`Firestore (${co}): ${t}`,...n)}}function Ki(t,...e){if(Fr.logLevel<=re.WARN){let n=e.map(iy);Fr.warn(`Firestore (${co}): ${t}`,...n)}}function iy(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function B(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,sb(t,r,n)}function sb(t,e,n){let r=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _n(r),new Error(r)}function fe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||sb(e,i,r)}function G(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var qt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var ol=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Re.UNAUTHENTICATED))}shutdown(){}},wg=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Cg=class{constructor(e){this.t=e,this.currentUser=Re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new qt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new ol(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new Re(e)}},Tg=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Re.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},bg=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Tg(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Re.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Sg=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);let r=o=>{o.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,P("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sl(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sl(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function jk(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Qs=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=jk(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function Z(t,e){return t<e?-1:t>e?1:0}function Ag(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return yg(i)===yg(o)?Z(i,o):yg(i)?1:-1}return Z(t.length,e.length)}var Bk=55296,Uk=57343;function yg(t){let e=t.charCodeAt(0);return e>=Bk&&e<=Uk}function Qi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var IT="__name__",al=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&B(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Z(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Ag(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yn.fromString(e.substring(4,e.length-2))}},ve=class t extends al{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Hk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mt=class t extends al{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Hk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IT}static keyField(){return new t([IT])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new F(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new F(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var j=class t{constructor(e){this.path=e}static fromPath(e){return new t(ve.fromString(e))}static fromName(e){return new t(ve.fromString(e).popFirst(5))}static empty(){return new t(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ve(e.slice()))}};function ab(t,e,n){if(!n)throw new F(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $k(t,e,n,r){if(e===!0&&r===!0)throw new F(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function DT(t){if(!j.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wT(t){if(j.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function oy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B(12329,{type:typeof t})}function cl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=oy(t);throw new F(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function be(t,e){let n={typeString:t};return e&&(n.value=e),n}function sa(t,e){if(!cb(t))throw new F(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new F(N.INVALID_ARGUMENT,n);return!0}var CT=-62135596800,TT=1e6,Se=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*TT);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<CT)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TT}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sa(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-CT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:be("string",Se._jsonSchemaVersion),seconds:be("number"),nanoseconds:be("number")};var W=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Se(0,0))}static max(){return new t(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ys=-1,Ng=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Ng.UNKNOWN_ID=-1;function Gk(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=W.fromTimestamp(r===1e9?new Se(n+1,0):new Se(n,r));return new Vr(i,j.empty(),e)}function qk(t){return new Vr(t.readTime,t.key,Ys)}var Vr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(W.min(),j.empty(),Ys)}static max(){return new t(W.max(),j.empty(),Ys)}};function zk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:Z(t.largestBatchId,e.largestBatchId))}var Wk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Mg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function uo(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==Wk)throw t;P("LocalStore","Unexpectedly lost primary lease")}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let d=u;n(e[d]).next(h=>{s[d]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function Kk(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lo(t){return t.name==="IndexedDbTransactionError"}var sy=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),ay=-1;function Ll(t){return t==null}function Zs(t){return t===0&&1/t==-1/0}function Qk(t){return typeof t=="number"&&Number.isInteger(t)&&!Zs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ub="";function Yk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bT(e)),e=Zk(t.get(n),e);return bT(e)}function Zk(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case ub:n+="";break;default:n+=o}}return n}function bT(t){return t+ub+""}var Jk="remoteDocuments",lb="owner";var db="mutationQueues";var fb="mutations";var hb="documentMutations",Xk="remoteDocumentsV14";var pb="remoteDocumentGlobal";var gb="targets";var mb="targetDocuments";var yb="targetGlobal",vb="collectionParents";var _b="clientMetadata";var Eb="bundles";var Ib="namedQueries";var eF="indexConfiguration";var tF="indexState";var nF="indexEntries";var Db="documentOverlays";var rF="globals";var iF=[db,fb,hb,Jk,gb,lb,yb,mb,_b,pb,vb,Eb,Ib],fW=[...iF,Db],oF=[db,fb,hb,Xk,gb,lb,yb,mb,_b,pb,vb,Eb,Ib,Db],sF=oF,aF=[...sF,eF,tF,nF];var hW=[...aF,rF];function ST(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ee=class t{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hi(this.root,e,this.comparator,!0)}},Hi=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},zt=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xe=class t{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ul(this.data.getIterator())}getIteratorFrom(e){return new ul(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ul=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gt=class t{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new t([])}unionWith(e){let n=new xe(mt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qi(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ll=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Qe=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ll("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var cF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function En(t){if(fe(!!t,39018),typeof t=="string"){let e=0,n=cF.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ye(t.seconds),nanos:ye(t.nanos)}}function ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function In(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}var Cb="server_timestamp",Tb="__type__",bb="__previous_value__",Sb="__local_write_time__";function cy(t){return(t?.mapValue?.fields||{})[Tb]?.stringValue===Cb}function jl(t){let e=t.mapValue.fields[bb];return cy(e)?jl(e):e}function Js(t){let e=En(t.mapValue.fields[Sb].timestampValue);return new Se(e.seconds,e.nanos)}var Rg=class{constructor(e,n,r,i,o,s,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}},dl="(default)",fl=class t{constructor(e,n){this.projectId=e,this.database=n||dl}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===dl}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var uy="__type__",Ab="__max__",Xu={mapValue:{fields:{__type__:{stringValue:Ab}}}},ly="__vector__",Yi="value";function Wn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cy(t)?4:Mb(t)?9007199254740991:Nb(t)?10:11:B(28295,{value:t})}function Qt(t,e){if(t===e)return!0;let n=Wn(t);if(n!==Wn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Js(t).isEqual(Js(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=En(i.timestampValue),c=En(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return In(i.bytesValue).isEqual(In(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return ye(i.geoPointValue.latitude)===ye(o.geoPointValue.latitude)&&ye(i.geoPointValue.longitude)===ye(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return ye(i.integerValue)===ye(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ye(i.doubleValue),c=ye(o.doubleValue);return s===c?Zs(s)===Zs(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return Qi(t.arrayValue.values||[],e.arrayValue.values||[],Qt);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(ST(s)!==ST(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Qt(s[u],c[u])))return!1;return!0})(t,e);default:return B(52216,{left:t})}}function Xs(t,e){return(t.values||[]).find(n=>Qt(n,e))!==void 0}function Zi(t,e){if(t===e)return 0;let n=Wn(t),r=Wn(e);if(n!==r)return Z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=ye(o.integerValue||o.doubleValue),u=ye(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return AT(t.timestampValue,e.timestampValue);case 4:return AT(Js(t),Js(e));case 5:return Ag(t.stringValue,e.stringValue);case 6:return(function(o,s){let c=In(o),u=In(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let d=0;d<c.length&&d<u.length;d++){let h=Z(c[d],u[d]);if(h!==0)return h}return Z(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=Z(ye(o.latitude),ye(s.latitude));return c!==0?c:Z(ye(o.longitude),ye(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return NT(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},d=c[Yi]?.arrayValue,h=u[Yi]?.arrayValue,g=Z(d?.values?.length||0,h?.values?.length||0);return g!==0?g:NT(d,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Xu.mapValue&&s===Xu.mapValue)return 0;if(o===Xu.mapValue)return 1;if(s===Xu.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),d=s.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){let m=Ag(u[g],h[g]);if(m!==0)return m;let y=Zi(c[u[g]],d[h[g]]);if(y!==0)return y}return Z(u.length,h.length)})(t.mapValue,e.mapValue);default:throw B(23264,{he:n})}}function AT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);let n=En(t),r=En(e),i=Z(n.seconds,r.seconds);return i!==0?i:Z(n.nanos,r.nanos)}function NT(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Zi(n[i],r[i]);if(o)return o}return Z(n.length,r.length)}function Ji(t){return xg(t)}function xg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=En(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return In(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return j.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=xg(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${xg(n.fields[s])}`;return i+"}"})(t.mapValue):B(61005,{value:t})}function nl(t){switch(Wn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=jl(t);return e?16+nl(e):16;case 5:return 2*t.stringValue.length;case 6:return In(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+nl(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Hr(r.fields,(o,s)=>{i+=o.length+nl(s)}),i})(t.mapValue);default:throw B(13486,{value:t})}}function Pg(t){return!!t&&"integerValue"in t}function dy(t){return!!t&&"arrayValue"in t}function MT(t){return!!t&&"nullValue"in t}function RT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rl(t){return!!t&&"mapValue"in t}function Nb(t){return(t?.mapValue?.fields||{})[uy]?.stringValue===ly}function qs(t){if(t.geoPointValue)return{geoPointValue:H({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:H({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Hr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qs(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qs(t.arrayValue.values[n]);return e}return H({},t)}function Mb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Ab}var gW={mapValue:{fields:{[uy]:{stringValue:ly},[Yi]:{arrayValue:{}}}}};var Rt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qs(n)}setAll(e){let n=mt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=qs(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());rl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];rl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Hr(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(qs(this.value))}};function Rb(t){let e=[];return Hr(t.fields,(n,r)=>{let i=new mt([n]);if(rl(r)){let o=Rb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gt(e)}var xt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,W.min(),W.min(),W.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,W.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,W.min(),W.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,W.min(),W.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Xi=class{constructor(e,n){this.position=e,this.inclusive=n}};function xT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=j.comparator(j.fromName(s.referenceValue),n.key):r=Zi(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function PT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qt(t.position[n],e.position[n]))return!1;return!0}var eo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function uF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var hl=class{},Ae=class t extends hl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kg(e,n,r):n==="array-contains"?new Lg(e,r):n==="in"?new jg(e,r):n==="not-in"?new Bg(e,r):n==="array-contains-any"?new Ug(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Fg(e,r):new Vg(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zi(n,this.value)):n!==null&&Wn(this.value)===Wn(n)&&this.matchesComparison(Zi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Yt=class t extends hl{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return xb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function xb(t){return t.op==="and"}function Pb(t){return lF(t)&&xb(t)}function lF(t){for(let e of t.filters)if(e instanceof Yt)return!1;return!0}function Og(t){if(t instanceof Ae)return t.field.canonicalString()+t.op.toString()+Ji(t.value);if(Pb(t))return t.filters.map(e=>Og(e)).join(",");{let e=t.filters.map(n=>Og(n)).join(",");return`${t.op}(${e})`}}function Ob(t,e){return t instanceof Ae?(function(r,i){return i instanceof Ae&&r.op===i.op&&r.field.isEqual(i.field)&&Qt(r.value,i.value)})(t,e):t instanceof Yt?(function(r,i){return i instanceof Yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&Ob(s,i.filters[c]),!0):!1})(t,e):void B(19439)}function kb(t){return t instanceof Ae?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ji(n.value)}`})(t):t instanceof Yt?(function(n){return n.op.toString()+" {"+n.getFilters().map(kb).join(" ,")+"}"})(t):"Filter"}var kg=class extends Ae{constructor(e,n,r){super(e,n,r),this.key=j.fromName(r.referenceValue)}matches(e){let n=j.comparator(e.key,this.key);return this.matchesComparison(n)}},Fg=class extends Ae{constructor(e,n){super(e,"in",n),this.keys=Fb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Vg=class extends Ae{constructor(e,n){super(e,"not-in",n),this.keys=Fb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Fb(t,e){return(e.arrayValue?.values||[]).map(n=>j.fromName(n.referenceValue))}var Lg=class extends Ae{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return dy(n)&&Xs(n.arrayValue,this.value)}},jg=class extends Ae{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Xs(this.value.arrayValue,n)}},Bg=class extends Ae{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xs(this.value.arrayValue,n)}},Ug=class extends Ae{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!dy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xs(this.value.arrayValue,r))}};var Hg=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function OT(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Hg(t,e,n,r,i,o,s)}function fy(t){let e=G(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Og(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Ll(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ji(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ji(r)).join(",")),e.Te=n}return e.Te}function hy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ob(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!PT(t.startAt,e.startAt)&&PT(t.endAt,e.endAt)}function $g(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var to=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function dF(t,e,n,r,i,o,s,c){return new to(t,e,n,r,i,o,s,c)}function Vb(t){return new to(t)}function kT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fF(t){return t.collectionGroup!==null}function zs(t){let e=G(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new xe(mt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new eo(o,r))}),n.has(mt.keyField().canonicalString())||e.Ie.push(new eo(mt.keyField(),r))}return e.Ie}function Wt(t){let e=G(t);return e.Ee||(e.Ee=hF(e,zs(t))),e.Ee}function hF(t,e){if(t.limitType==="F")return OT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new eo(i.field,o)});let n=t.endAt?new Xi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xi(t.startAt.position,t.startAt.inclusive):null;return OT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gg(t,e,n){return new to(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bl(t,e){return hy(Wt(t),Wt(e))&&t.limitType===e.limitType}function Lb(t){return`${fy(Wt(t))}|lt:${t.limitType}`}function ji(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kb(i)).join(", ")}]`),Ll(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ji(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ji(i)).join(",")),`Target(${r})`})(Wt(t))}; limitType=${t.limitType})`}function Ul(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):j.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of zs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let d=xT(s,c,u);return s.inclusive?d<=0:d<0})(r.startAt,zs(r),i)||r.endAt&&!(function(s,c,u){let d=xT(s,c,u);return s.inclusive?d>=0:d>0})(r.endAt,zs(r),i))})(t,e)}function pF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jb(t){return(e,n)=>{let r=!1;for(let i of zs(t)){let o=gF(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function gF(t,e,n){let r=t.field.isKeyField()?j.comparator(e.key,n.key):(function(o,s,c){let u=s.data.field(o),d=c.data.field(o);return u!==null&&d!==null?Zi(u,d):B(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B(19790,{direction:t.dir})}}var Dn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return wb(this.inner)}size(){return this.innerSize}};var mF=new Ee(j.comparator);function wn(){return mF}var Bb=new Ee(j.comparator);function Gs(...t){let e=Bb;for(let n of t)e=e.insert(n.key,n);return e}function Ub(t){let e=Bb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pr(){return Ws()}function Hb(){return Ws()}function Ws(){return new Dn(t=>t.toString(),(t,e)=>t.isEqual(e))}var yF=new Ee(j.comparator),vF=new xe(j.comparator);function J(...t){let e=vF;for(let n of t)e=e.add(n);return e}var _F=new xe(Z);function EF(){return _F}function py(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zs(e)?"-0":e}}function $b(t){return{integerValue:""+t}}function IF(t,e){return Qk(e)?$b(e):py(t,e)}var no=class{constructor(){this._=void 0}};function DF(t,e,n){return t instanceof ro?(function(i,o){let s={fields:{[Tb]:{stringValue:Cb},[Sb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&cy(o)&&(o=jl(o)),o&&(s.fields[bb]=o),{mapValue:s}})(n,e):t instanceof Lr?qb(t,e):t instanceof jr?zb(t,e):(function(i,o){let s=Gb(i,o),c=FT(s)+FT(i.Ae);return Pg(s)&&Pg(i.Ae)?$b(c):py(i.serializer,c)})(t,e)}function wF(t,e,n){return t instanceof Lr?qb(t,e):t instanceof jr?zb(t,e):n}function Gb(t,e){return t instanceof io?(function(r){return Pg(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ro=class extends no{},Lr=class extends no{constructor(e){super(),this.elements=e}};function qb(t,e){let n=Wb(e);for(let r of t.elements)n.some(i=>Qt(i,r))||n.push(r);return{arrayValue:{values:n}}}var jr=class extends no{constructor(e){super(),this.elements=e}};function zb(t,e){let n=Wb(e);for(let r of t.elements)n=n.filter(i=>!Qt(i,r));return{arrayValue:{values:n}}}var io=class extends no{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function FT(t){return ye(t.integerValue||t.doubleValue)}function Wb(t){return dy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CF(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Lr&&i instanceof Lr||r instanceof jr&&i instanceof jr?Qi(r.elements,i.elements,Qt):r instanceof io&&i instanceof io?Qt(r.Ae,i.Ae):r instanceof ro&&i instanceof ro})(t.transform,e.transform)}var qg=class{constructor(e,n){this.version=e,this.transformResults=n}},kr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function il(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var oo=class{};function Kb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pl(t.key,kr.none()):new Br(t.key,t.data,kr.none());{let n=t.data,r=Rt.empty(),i=new xe(mt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Cn(t.key,r,new Gt(i.toArray()),kr.none())}}function TF(t,e,n){t instanceof Br?(function(i,o,s){let c=i.value.clone(),u=LT(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Cn?(function(i,o,s){if(!il(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=LT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Qb(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Ks(t,e,n,r){return t instanceof Br?(function(o,s,c,u){if(!il(o.precondition,s))return c;let d=o.value.clone(),h=jT(o.fieldTransforms,u,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof Cn?(function(o,s,c,u){if(!il(o.precondition,s))return c;let d=jT(o.fieldTransforms,u,s),h=s.data;return h.setAll(Qb(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))})(t,e,n,r):(function(o,s,c){return il(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function bF(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=Gb(r.transform,i||null);o!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,o))}return n||null}function VT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qi(r,i,(o,s)=>CF(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Br=class extends oo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Cn=class extends oo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Qb(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function LT(t,e,n){let r=new Map;fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,wF(s,c,n[i]))}return r}function jT(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,DF(o,s,e))}return r}var pl=class extends oo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},zg=class extends oo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Wg=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&TF(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ks(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ks(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Hb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=Kb(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),J())}isEqual(e){return this.batchId===e.batchId&&Qi(this.mutations,e.mutations,(n,r)=>VT(n,r))&&Qi(this.baseMutations,e.baseMutations,(n,r)=>VT(n,r))}},Kg=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return yF})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Qg=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Yg=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ce,ie;function SF(t){switch(t){case N.OK:return B(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return B(15467,{code:t})}}function Yb(t){if(t===void 0)return _n("GRPC error has no .code"),N.UNKNOWN;switch(t){case Ce.OK:return N.OK;case Ce.CANCELLED:return N.CANCELLED;case Ce.UNKNOWN:return N.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return N.INTERNAL;case Ce.UNAVAILABLE:return N.UNAVAILABLE;case Ce.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ce.NOT_FOUND:return N.NOT_FOUND;case Ce.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ce.ABORTED:return N.ABORTED;case Ce.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ce.DATA_LOSS:return N.DATA_LOSS;default:return B(39323,{code:t})}}(ie=Ce||(Ce={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var AF=null;function NF(){return new TextEncoder}var MF=new yn([4294967295,4294967295],0);function BT(t){let e=NF().encode(t),n=new dg;return n.update(e),new Uint8Array(n.digest())}function UT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yn([n,r],0),new yn([i,o],0)]}var Zg=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Or(`Invalid padding: ${n}`);if(r<0)throw new Or(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Or(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Or(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=yn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(yn.fromNumber(r)));return i.compare(MF)===1&&(i=new yn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=BT(e),[r,i]=UT(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let n=BT(e),[r,i]=UT(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Or=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gl=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ea.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(W.min(),i,new Ee(Z),wn(),J())}},ea=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,J(),J(),J())}};var Gi=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},ml=class{constructor(e,n){this.targetId=e,this.Ce=n}},yl=class{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},vl=class{constructor(){this.ve=0,this.Fe=HT(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=J(),n=J(),r=J();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B(38017,{changeType:o})}}),new ea(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=HT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Jg=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=wn(),this.Je=el(),this.He=el(),this.Ye=new Ee(Z)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:B(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if($g(o))if(r===0){let s=new j(o.path);this.et(n,s,xt.newNoDocument(s,W.min()))}else fe(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(n);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}AF?.lt((function(h,g,m,y,S){let M={localCacheCount:h,existenceFilterCount:g.count,databaseId:m.database,projectId:m.projectId},A=g.unchangedNames;return A&&(M.bloomFilter={applied:S===0,hashCount:A?.hashCount??0,bitmapLength:A?.bits?.bitmap?.length??0,padding:A?.bits?.padding??0,mightContain:O=>y?.mightContain(O)??!1}),M})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=In(r).toUint8Array()}catch(u){if(u instanceof ll)return Ki("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Zg(s,i,o)}catch(u){return Ki(u instanceof Or?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&$g(c.target)){let u=new j(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,xt.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=J();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new gl(e,n,this.Ye,this.je,r);return this.je=wn(),this.Je=el(),this.He=el(),this.Ye=new Ee(Z),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new vl,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xe(Z),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xe(Z),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||P("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vl),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function el(){return new Ee(j.comparator)}function HT(){return new Ee(j.comparator)}var RF={asc:"ASCENDING",desc:"DESCENDING"},xF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PF={and:"AND",or:"OR"},Xg=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function em(t,e){return t.useProto3Json||Ll(e)?e:{value:e}}function _l(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OF(t,e){return _l(t,e.toTimestamp())}function Kt(t){return fe(!!t,49232),W.fromTimestamp((function(n){let r=En(n);return new Se(r.seconds,r.nanos)})(t))}function gy(t,e){return tm(t,e).canonicalString()}function tm(t,e){let n=(function(i){return new ve(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Jb(t){let e=ve.fromString(t);return fe(rS(e),10190,{key:e.toString()}),e}function nm(t,e){return gy(t.databaseId,e.path)}function vg(t,e){let n=Jb(e);if(n.get(1)!==t.databaseId.projectId)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(eS(n))}function Xb(t,e){return gy(t.databaseId,e)}function kF(t){let e=Jb(t);return e.length===4?ve.emptyPath():eS(e)}function rm(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eS(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $T(t,e,n){return{name:nm(t,e),fields:n.value.mapValue.fields}}function FF(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:B(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(d,h){return d.useProto3Json?(fe(h===void 0||typeof h=="string",58123),Qe.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Qe.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(d){let h=d.code===void 0?N.UNKNOWN:Yb(d.code);return new F(h,d.message||"")})(s);n=new yl(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=vg(t,r.document.name),o=Kt(r.document.updateTime),s=r.document.createTime?Kt(r.document.createTime):W.min(),c=new Rt({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(i,o,s,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Gi(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=vg(t,r.document),o=r.readTime?Kt(r.readTime):W.min(),s=xt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Gi([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=vg(t,r.document),o=r.removedTargetIds||[];n=new Gi([],o,i,null)}else{if(!("filter"in e))return B(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Yg(i,o),c=r.targetId;n=new ml(c,s)}}return n}function VF(t,e){let n;if(e instanceof Br)n={update:$T(t,e.key,e.value)};else if(e instanceof pl)n={delete:nm(t,e.key)};else if(e instanceof Cn)n={update:$T(t,e.key,e.data),updateMask:zF(e.fieldMask)};else{if(!(e instanceof zg))return B(16599,{Vt:e.type});n={verify:nm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof ro)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Lr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof jr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof io)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw B(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:OF(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B(27497)})(t,e.precondition)),n}function LF(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Kt(i.updateTime):Kt(o);return s.isEqual(W.min())&&(s=Kt(o)),new qg(s,i.transformResults||[])})(n,e))):[]}function jF(t,e){return{documents:[Xb(t,e.path)]}}function BF(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Xb(t,i);let o=(function(d){if(d.length!==0)return nS(Yt.create(d,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(d){if(d.length!==0)return d.map(h=>(function(m){return{field:Bi(m.field),direction:$F(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=em(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function UF(t){let e=kF(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){fe(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(g){let m=tS(g);return m instanceof Yt&&Pb(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(g){return g.map(m=>(function(S){return new eo(Ui(S.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(n.orderBy));let c=null;n.limit&&(c=(function(g){let m;return m=typeof g=="object"?g.value:g,Ll(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(g){let m=!!g.before,y=g.values||[];return new Xi(y,m)})(n.startAt));let d=null;return n.endAt&&(d=(function(g){let m=!g.before,y=g.values||[];return new Xi(y,m)})(n.endAt)),dF(e,i,s,o,c,"F",u,d)}function HF(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ui(n.unaryFilter.field);return Ae.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ui(n.unaryFilter.field);return Ae.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ui(n.unaryFilter.field);return Ae.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ui(n.unaryFilter.field);return Ae.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return B(61313);default:return B(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ae.create(Ui(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return B(58110);default:return B(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Yt.create(n.compositeFilter.filters.map(r=>tS(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B(1026)}})(n.compositeFilter.op))})(t):B(30097,{filter:t})}function $F(t){return RF[t]}function GF(t){return xF[t]}function qF(t){return PF[t]}function Bi(t){return{fieldPath:t.canonicalString()}}function Ui(t){return mt.fromServerFormat(t.fieldPath)}function nS(t){return t instanceof Ae?(function(n){if(n.op==="=="){if(RT(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NAN"}};if(MT(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(RT(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NAN"}};if(MT(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bi(n.field),op:GF(n.op),value:n.value}}})(t):t instanceof Yt?(function(n){let r=n.getFilters().map(i=>nS(i));return r.length===1?r[0]:{compositeFilter:{op:qF(n.op),filters:r}}})(t):B(54877,{filter:t})}function zF(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ta=class t{constructor(e,n,r,i,o=W.min(),s=W.min(),c=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var im=class{constructor(e){this.yt=e}};function WF(t){let e=UF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gg(e,e.limit,"L"):e}var El=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(ye(e.integerValue));else if("doubleValue"in e){let r=ye(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Zs(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=En(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(In(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Mb(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Nb(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):B(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=Yi,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(ye(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),j.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};El.Kt=new El;var om=class{constructor(){this.Cn=new sm}addToCollectionParentIndex(e,n){return this.Cn.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(Vr.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(Vr.min())}updateCollectionGroup(e,n,r){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},sm=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xe(ve.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(ve.comparator)).toArray()}};var mW=new Uint8Array(0);var GT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iS=41943040,Dt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Dt.DEFAULT_COLLECTION_PERCENTILE=10,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dt.DEFAULT=new Dt(iS,Dt.DEFAULT_COLLECTION_PERCENTILE,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dt.DISABLED=new Dt(-1,0,0);var na=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var qT="LruGarbageCollector",KF=1048576;function zT([t,e],[n,r]){let i=Z(t,n);return i===0?Z(e,r):i}var am=class{constructor(e){this.Ir=e,this.buffer=new xe(zT),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();zT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},cm=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){P(qT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?P(qT,"Ignoring IndexedDB error during garbage collection: ",n):await uo(n)}await this.Vr(3e5)})}},um=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return R.resolve(sy.ce);let r=new am(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(GT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,c,u,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Li()<=re.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function QF(t,e){return new um(t,e)}var lm=class{constructor(){this.changes=new Dn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var dm=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var fm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ks(r.mutation,i,Gt.empty(),Se.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,J()).next(()=>r))}getLocalViewOfDocuments(e,n,r=J()){let i=Pr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Gs();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Pr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,J()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=wn(),s=Ws(),c=(function(){return Ws()})();return n.forEach((u,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Cn)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),Ks(h.mutation,d,h.mutation.getFieldMask(),Se.now())):s.set(d.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,h)=>s.set(d,h)),n.forEach((d,h)=>c.set(d,new dm(h,s.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){let r=Ws(),i=new Ee((s,c)=>s-c),o=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let d=n.get(u);if(d===null)return;let h=r.get(u)||Gt.empty();h=c.applyToLocalView(d,h),r.set(u,h);let g=(i.get(c.batchId)||J()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,h=u.value,g=Hb();h.forEach(m=>{if(!o.has(m)){let y=Kb(n.get(m),r.get(m));y!==null&&g.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return R.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):R.resolve(Pr()),c=Ys,u=o;return s.next(d=>R.forEach(d,(h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(h)?R.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,J())).next(h=>({batchId:c,changes:Ub(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(r=>{let i=Gs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Gs();return this.indexManager.getCollectionParents(e,o).next(c=>R.forEach(c,u=>{let d=(function(g,m){return new to(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,d)=>{let h=d.getKey();s.get(h)===null&&(s=s.insert(h,xt.newInvalidDocument(h)))});let c=Gs();return s.forEach((u,d)=>{let h=o.get(u);h!==void 0&&Ks(h.mutation,d,Gt.empty(),Se.now()),Ul(n,d)&&(c=c.insert(u,d))}),c})}};var hm=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return R.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Kt(i.createTime)}})(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:WF(i.bundledQuery),readTime:Kt(i.readTime)}})(n)),R.resolve()}};var pm=class{constructor(){this.overlays=new Ee(j.comparator),this.qr=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Pr();return R.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),R.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),R.resolve()}getOverlaysForCollection(e,n,r){let i=Pr(),o=n.length+1,s=new j(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ee((d,h)=>d-h),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=Pr(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let c=Pr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=i)););return R.resolve(c)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Qg(n,r));let o=this.qr.get(n);o===void 0&&(o=J(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var gm=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,R.resolve()}};var ra=class{constructor(){this.Qr=new xe(Te.$r),this.Ur=new xe(Te.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new Te(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Te(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new j(new ve([])),r=new Te(n,e),i=new Te(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new j(new ve([])),r=new Te(n,e),i=new Te(n,e+1),o=J();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Te(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Te=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return j.comparator(e.key,n.key)||Z(e.Yr,n.Yr)}static Kr(e,n){return Z(e.Yr,n.Yr)||j.comparator(e.key,n.key)}};var mm=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xe(Te.$r)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Wg(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new Te(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return R.resolve(s)}lookupMutationBatch(e,n){return R.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?ay:this.tr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Te(n,0),i=new Te(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xe(Z);return n.forEach(i=>{let o=new Te(i,0),s=new Te(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),R.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;j.isDocumentKey(o)||(o=o.child(""));let s=new Te(new j(o),0),c=new xe(Z);return this.Zr.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)},s),R.resolve(this.ti(c))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return R.forEach(n.mutations,i=>{let o=new Te(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new Te(n,0),i=this.Zr.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ym=class{constructor(e){this.ri=e,this.docs=(function(){return new Ee(j.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=wn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():xt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=wn(),s=n.path,c=new j(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:h}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||zk(qk(h),r)<=0||(i.has(h.key)||Ul(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,n,r,i){B(9500)}ii(e,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vm(this)}getSize(e){return R.resolve(this.size)}},vm=class extends lm{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),R.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var _m=class{constructor(e){this.persistence=e,this.si=new Dn(n=>fy(n),hy),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.oi=0,this._i=new ra,this.targetCount=0,this.ai=na.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),R.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new na(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.Pr(n),R.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return R.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),R.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return R.resolve(r)}containsKey(e,n){return R.resolve(this._i.containsKey(n))}};var Il=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new sy(0),this.li=!1,this.li=!0,this.hi=new gm,this.referenceDelegate=e(this),this.Pi=new _m(this),this.indexManager=new om,this.remoteDocumentCache=(function(i){return new ym(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new im(n),this.Ii=new hm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new mm(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){P("MemoryPersistence","Starting transaction:",e);let i=new Em(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return R.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},Em=class extends Mg{constructor(e){super(),this.currentSequenceNumber=e}},Im=class t{constructor(e){this.persistence=e,this.Ri=new ra,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw B(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),R.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),R.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.fi,r=>{let i=j.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,W.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return R.or([()=>R.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},Dl=class t{constructor(e,n){this.persistence=e,this.pi=new Dn(r=>Yk(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=QF(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return R.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return R.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?R.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(c=>{c||(r++,o.removeEntry(s,W.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),R.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),R.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),R.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),R.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nl(e.data.value)),n}br(e,n,r){return R.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return R.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Dm=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=J(),i=J();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var wm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Cm=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ZC()?8:Kk(YC())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new wm;return this.Ss(e,n,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,n,s,c.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Li()<=re.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",ji(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),R.resolve()):(Li()<=re.DEBUG&&P("QueryEngine","Query:",ji(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Li()<=re.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",ji(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wt(n))):R.resolve())}ys(e,n){if(kT(n))return R.resolve(null);let r=Wt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gg(n,null,"F"),r=Wt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=J(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.Ds(n,c);return this.Cs(n,d,s,u.readTime)?this.ys(e,Gg(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,i){return kT(n)||i.isEqual(W.min())?R.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?R.resolve(null):(Li()<=re.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ji(n)),this.vs(e,s,n,Gk(i,Ys)).next(c=>c))})}Ds(e,n){let r=new xe(jb(e));return n.forEach((i,o)=>{Ul(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Li()<=re.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",ji(n)),this.ps.getDocumentsMatchingQuery(e,n,Vr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var my="LocalStore",YF=3e8,Tm=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ee(Z),this.xs=new Dn(o=>fy(o),hy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fm(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function ZF(t,e,n,r){return new Tm(t,e,n,r)}async function oS(t,e){let n=G(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=J();for(let d of i){s.push(d.batchId);for(let h of d.mutations)u=u.add(h.key)}for(let d of o){c.push(d.batchId);for(let h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:s,addedBatchIds:c}))})})}function JF(t,e){let n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){let g=d.batch,m=g.keys(),y=R.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(M=>{let A=d.docVersions.get(S);fe(A!==null,48541),M.version.compareTo(A)<0&&(g.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),h.addEntry(M)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,g))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=J();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function sS(t){let e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function XF(t,e){let n=G(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let c=[];e.targetChanges.forEach((h,g)=>{let m=i.get(g);if(!m)return;c.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,g).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,g)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?y=y.withResumeToken(Qe.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(g,y),(function(M,A,O){return M.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=YF?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(m,y,h)&&c.push(n.Pi.updateTargetData(o,y))});let u=wn(),d=J();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(eV(o,s,e.documentUpdates).next(h=>{u=h.ks,d=h.qs})),!r.isEqual(W.min())){let h=n.Pi.getLastRemoteSnapshotVersion(o).next(g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return R.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.Ms=i,o))}function eV(t,e,n){let r=J(),i=J();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=wn();return n.forEach((c,u)=>{let d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(W.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):P(my,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:s,qs:i}})}function tV(t,e){let n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ay),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nV(t,e){let n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,R.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new ta(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function bm(t,e,n){let r=G(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!lo(s))throw s;P(my,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function WT(t,e,n){let r=G(t),i=W.min(),o=J();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,d,h){let g=G(u),m=g.xs.get(h);return m!==void 0?R.resolve(g.Ms.get(m)):g.Pi.getTargetData(d,h)})(r,s,Wt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:W.min(),n?o:J())).next(c=>(rV(r,pF(e),c),{documents:c,Qs:o})))}function rV(t,e,n){let r=t.Os.get(e)||W.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var wl=class{constructor(){this.activeTargetIds=EF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Sm=class{constructor(){this.Mo=new wl,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Am=class{Oo(e){}shutdown(){}};var KT="ConnectivityMonitor",Cl=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){P(KT,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){P(KT,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var tl=null;function Nm(){return tl===null?tl=(function(){return 268435456+Math.round(2147483648*Math.random())})():tl++,"0x"+tl.toString(16)}var _g="RestConnection",iV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Mm=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===dl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=Nm(),c=this.zo(e,n.toUriEncodedString());P(_g,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:d}=new URL(c),h=Wu(d);return this.Jo(e,c,u,r,h).then(g=>(P(_g,`Received RPC '${e}' ${s}: `,g),g),g=>{throw Ki(_g,`RPC '${e}' ${s} failed with error: `,g,"url: ",c,"request:",r),g})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+co})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=iV[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var Rm=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Ke="WebChannelConnection",xm=class extends Mm{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=Nm();return new Promise((c,u)=>{let d=new fg;d.setWithCredentials(!0),d.listenOnce(hg.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case $s.NO_ERROR:let g=d.getResponseJson();P(Ke,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),c(g);break;case $s.TIMEOUT:P(Ke,`RPC '${e}' ${s} timed out`),u(new F(N.DEADLINE_EXCEEDED,"Request time out"));break;case $s.HTTP_ERROR:let m=d.getStatus();if(P(Ke,`RPC '${e}' ${s} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let M=(function(O){let X=O.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(X)>=0?X:N.UNKNOWN})(S.status);u(new F(M,S.message))}else u(new F(N.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new F(N.UNAVAILABLE,"Connection failed."));break;default:B(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{P(Ke,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);P(Ke,`RPC '${e}' ${s} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){let i=Nm(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=mg(),c=gg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");P(Ke,`Creating RPC '${e}' stream ${i}: ${h}`,u);let g=s.createWebChannel(h,u);this.I_(g);let m=!1,y=!1,S=new Rm({Yo:A=>{y?P(Ke,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(P(Ke,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),P(Ke,`RPC '${e}' stream ${i} sending:`,A),g.send(A))},Zo:()=>g.close()}),M=(A,O,X)=>{A.listen(O,te=>{try{X(te)}catch(Pe){setTimeout(()=>{throw Pe},0)}})};return M(g,Vi.EventType.OPEN,()=>{y||(P(Ke,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),M(g,Vi.EventType.CLOSE,()=>{y||(y=!0,P(Ke,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(g))}),M(g,Vi.EventType.ERROR,A=>{y||(y=!0,Ki(Ke,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),S.a_(new F(N.UNAVAILABLE,"The operation could not be completed")))}),M(g,Vi.EventType.MESSAGE,A=>{if(!y){let O=A.data[0];fe(!!O,16349);let X=O,te=X?.error||X[0]?.error;if(te){P(Ke,`RPC '${e}' stream ${i} received error:`,te);let Pe=te.status,Pt=(function(v){let E=Ce[v];if(E!==void 0)return Yb(E)})(Pe),Le=te.message;Pt===void 0&&(Pt=N.INTERNAL,Le="Unknown error status: "+Pe+" with message "+te.message),y=!0,S.a_(new F(Pt,Le)),g.close()}else P(Ke,`RPC '${e}' stream ${i} received:`,O),S.u_(O)}}),M(c,pg.STAT_EVENT,A=>{A.stat===Ju.PROXY?P(Ke,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Ju.NOPROXY&&P(Ke,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function Eg(){return typeof document<"u"?document:null}function Hl(t){return new Xg(t,!0)}var Tl=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var QT="PersistentStream",bl=class{constructor(e,n,r,i,o,s,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tl(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(_n(n.toString()),_n("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new F(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return P(QT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(P(QT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Pm=class extends bl{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=FF(this.serializer,e),r=(function(o){if(!("targetChange"in o))return W.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?W.min():s.readTime?Kt(s.readTime):W.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=rm(this.serializer),n.addTarget=(function(o,s){let c,u=s.target;if(c=$g(u)?{documents:jF(o,u)}:{query:BF(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=Zb(o,s.resumeToken);let d=em(o,s.expectedCount);d!==null&&(c.expectedCount=d)}else if(s.snapshotVersion.compareTo(W.min())>0){c.readTime=_l(o,s.snapshotVersion.toTimestamp());let d=em(o,s.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);let r=HF(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=rm(this.serializer),n.removeTarget=e,this.q_(n)}},Om=class extends bl{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=LF(e.writeResults,e.commitTime),r=Kt(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=rm(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>VF(this.serializer,r))};this.q_(n)}};var km=class{},Fm=class extends km{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,tm(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(N.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,tm(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(N.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Vm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_n(n),this.aa=!1):P("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Ur="RemoteStore",Lm=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{$r(this)&&(P(Ur,"Restarting streams for network reachability change."),await(async function(u){let d=G(u);d.Ea.add(4),await aa(d),d.Ra.set("Unknown"),d.Ea.delete(4),await $l(d)})(this))})}),this.Ra=new Vm(r,i)}};async function $l(t){if($r(t))for(let e of t.da)await e(!0)}async function aa(t){for(let e of t.da)await e(!1)}function aS(t,e){let n=G(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ey(n)?_y(n):fo(n).O_()&&vy(n,e))}function yy(t,e){let n=G(t),r=fo(n);n.Ia.delete(e),r.O_()&&cS(n,e),n.Ia.size===0&&(r.O_()?r.L_():$r(n)&&n.Ra.set("Unknown"))}function vy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fo(t).Y_(e)}function cS(t,e){t.Va.Ue(e),fo(t).Z_(e)}function _y(t){t.Va=new Jg({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),fo(t).start(),t.Ra.ua()}function Ey(t){return $r(t)&&!fo(t).x_()&&t.Ia.size>0}function $r(t){return G(t).Ea.size===0}function uS(t){t.Va=void 0}async function oV(t){t.Ra.set("Online")}async function sV(t){t.Ia.forEach((e,n)=>{vy(t,e)})}async function aV(t,e){uS(t),Ey(t)?(t.Ra.ha(e),_y(t)):t.Ra.set("Unknown")}async function cV(t,e,n){if(t.Ra.set("Online"),e instanceof yl&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){P(Ur,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sl(t,r)}else if(e instanceof Gi?t.Va.Ze(e):e instanceof ml?t.Va.st(e):t.Va.tt(e),!n.isEqual(W.min()))try{let r=await sS(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(d);h&&o.Ia.set(d,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,d)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(Qe.EMPTY_BYTE_STRING,h.snapshotVersion)),cS(o,u);let g=new ta(h.target,u,d,h.sequenceNumber);vy(o,g)}),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){P(Ur,"Failed to raise snapshot:",r),await Sl(t,r)}}async function Sl(t,e,n){if(!lo(e))throw e;t.Ea.add(1),await aa(t),t.Ra.set("Offline"),n||(n=()=>sS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{P(Ur,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await $l(t)})}function lS(t,e){return e().catch(n=>Sl(t,n,e))}async function Gl(t){let e=G(t),n=Kn(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ay;for(;uV(e);)try{let i=await tV(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,lV(e,i)}catch(i){await Sl(e,i)}dS(e)&&fS(e)}function uV(t){return $r(t)&&t.Ta.length<10}function lV(t,e){t.Ta.push(e);let n=Kn(t);n.O_()&&n.X_&&n.ea(e.mutations)}function dS(t){return $r(t)&&!Kn(t).x_()&&t.Ta.length>0}function fS(t){Kn(t).start()}async function dV(t){Kn(t).ra()}async function fV(t){let e=Kn(t);for(let n of t.Ta)e.ea(n.mutations)}async function hV(t,e,n){let r=t.Ta.shift(),i=Kg.from(r,e,n);await lS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gl(t)}async function pV(t,e){e&&Kn(t).X_&&await(async function(r,i){if((function(s){return SF(s)&&s!==N.ABORTED})(i.code)){let o=r.Ta.shift();Kn(r).B_(),await lS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Gl(r)}})(t,e),dS(t)&&fS(t)}async function YT(t,e){let n=G(t);n.asyncQueue.verifyOperationInProgress(),P(Ur,"RemoteStore received new credentials");let r=$r(n);n.Ea.add(3),await aa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $l(n)}async function gV(t,e){let n=G(t);e?(n.Ea.delete(2),await $l(n)):e||(n.Ea.add(2),await aa(n),n.Ra.set("Unknown"))}function fo(t){return t.ma||(t.ma=(function(n,r,i){let o=G(n);return o.sa(),new Pm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:oV.bind(null,t),t_:sV.bind(null,t),r_:aV.bind(null,t),H_:cV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Ey(t)?_y(t):t.Ra.set("Unknown")):(await t.ma.stop(),uS(t))})),t.ma}function Kn(t){return t.fa||(t.fa=(function(n,r,i){let o=G(n);return o.sa(),new Om(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:dV.bind(null,t),r_:pV.bind(null,t),ta:fV.bind(null,t),na:hV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Gl(t)):(await t.fa.stop(),t.Ta.length>0&&(P(Ur,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var jm=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Iy(t,e){if(_n("AsyncQueue",`${e}: ${t}`),lo(t))return new F(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Al=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=Gs(),this.sortedSet=new Ee(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Nl=class{constructor(){this.ga=new Ee(j.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):B(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},so=class t{constructor(e,n,r,i,o,s,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Al.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Bm=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Um=class{constructor(){this.queries=ZT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=G(n),o=i.queries;i.queries=ZT(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new F(N.ABORTED,"Firestore shutting down"))}};function ZT(){return new Dn(t=>Lb(t),Bl)}async function mV(t,e){let n=G(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Bm,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let c=Iy(s,`Initialization of query '${ji(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Dy(n)}async function yV(t,e){let n=G(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vV(t,e){let n=G(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&Dy(n)}function _V(t,e,n){let r=G(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function Dy(t){t.Ca.forEach(e=>{e.next()})}var Hm,JT;(JT=Hm||(Hm={})).Ma="default",JT.Cache="cache";var $m=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new so(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=so.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hm.Cache}};var Ml=class{constructor(e){this.key=e}},Rl=class{constructor(e){this.key=e}},Gm=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=J(),this.mutatedKeys=J(),this.eu=jb(e),this.tu=new Al(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new Nl,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let m=i.get(h),y=Ul(this.query,g)?g:null,S=!!m&&this.mutatedKeys.has(m.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;m&&y?m.data.isEqual(y.data)?S!==M&&(r.track({type:3,doc:y}),A=!0):this.su(m,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.eu(y,u)>0||d&&this.eu(y,d)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),A=!0):m&&!y&&(r.track({type:1,doc:m}),A=!0,(u||d)&&(c=!0)),A&&(y?(s=s.add(y),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,g)=>(function(y,S){let M=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{Rt:A})}};return M(y)-M(S)})(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,s.length!==0||d?{snapshot:new so(this.query,e.tu,o,s,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Nl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=J(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Rl(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Ml(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=J();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return so.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},wy="SyncEngine",qm=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},zm=class{constructor(e){this.key=e,this.hu=!1}},Wm=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Dn(c=>Lb(c),Bl),this.Iu=new Map,this.Eu=new Set,this.du=new Ee(j.comparator),this.Au=new Map,this.Ru=new ra,this.Vu={},this.mu=new Map,this.fu=na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function EV(t,e,n=!0){let r=vS(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await hS(r,e,n,!0),i}async function IV(t,e){let n=vS(t);await hS(n,e,!0,!1)}async function hS(t,e,n,r){let i=await nV(t.localStore,Wt(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=await DV(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&aS(t.remoteStore,i),c}async function DV(t,e,n,r,i){t.pu=(g,m,y)=>(async function(M,A,O,X){let te=A.view.ru(O);te.Cs&&(te=await WT(M.localStore,A.query,!1).then(({documents:C})=>A.view.ru(C,te)));let Pe=X&&X.targetChanges.get(A.targetId),Pt=X&&X.targetMismatches.get(A.targetId)!=null,Le=A.view.applyChanges(te,M.isPrimaryClient,Pe,Pt);return eb(M,A.targetId,Le.au),Le.snapshot})(t,g,m,y);let o=await WT(t.localStore,e,!0),s=new Gm(e,o.Qs),c=s.ru(o.documents),u=ea.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(c,t.isPrimaryClient,u);eb(t,n,d.au);let h=new qm(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function wV(t,e,n){let r=G(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Bl(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yy(r.remoteStore,i.targetId),Km(r,i.targetId)}).catch(uo)):(Km(r,i.targetId),await bm(r.localStore,i.targetId,!0))}async function CV(t,e){let n=G(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yy(n.remoteStore,r.targetId))}async function TV(t,e,n){let r=xV(t);try{let i=await(function(s,c){let u=G(s),d=Se.now(),h=c.reduce((y,S)=>y.add(S.key),J()),g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=wn(),M=J();return u.Ns.getEntries(y,h).next(A=>{S=A,S.forEach((O,X)=>{X.isValidDocument()||(M=M.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(A=>{g=A;let O=[];for(let X of c){let te=bF(X,g.get(X.key).overlayedDocument);te!=null&&O.push(new Cn(X.key,te,Rb(te.value.mapValue),kr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,O,c)}).next(A=>{m=A;let O=A.applyToLocalDocumentSet(g,M);return u.documentOverlayCache.saveOverlays(y,A.batchId,O)})}).then(()=>({batchId:m.batchId,changes:Ub(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let d=s.Vu[s.currentUser.toKey()];d||(d=new Ee(Z)),d=d.insert(c,u),s.Vu[s.currentUser.toKey()]=d})(r,i.batchId,n),await ca(r,i.changes),await Gl(r.remoteStore)}catch(i){let o=Iy(i,"Failed to persist write");n.reject(o)}}async function pS(t,e){let n=G(t);try{let r=await XF(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?fe(s.hu,14607):i.removedDocuments.size>0&&(fe(s.hu,42227),s.hu=!1))}),await ca(n,r,e)}catch(r){await uo(r)}}function XT(t,e,n){let r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=G(s);u.onlineState=c;let d=!1;u.queries.forEach((h,g)=>{for(let m of g.Sa)m.va(c)&&(d=!0)}),d&&Dy(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bV(t,e,n){let r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ee(j.comparator);s=s.insert(o,xt.newNoDocument(o,W.min()));let c=J().add(o),u=new gl(W.min(),new Map,new Ee(Z),s,c);await pS(r,u),r.du=r.du.remove(o),r.Au.delete(e),Cy(r)}else await bm(r.localStore,e,!1).then(()=>Km(r,e,n)).catch(uo)}async function SV(t,e){let n=G(t),r=e.batch.batchId;try{let i=await JF(n.localStore,e);mS(n,r,null),gS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ca(n,i)}catch(i){await uo(i)}}async function AV(t,e,n){let r=G(t);try{let i=await(function(s,c){let u=G(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(fe(g!==null,37113),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})})(r.localStore,e);mS(r,e,n),gS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ca(r,i)}catch(i){await uo(i)}}function gS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function mS(t,e,n){let r=G(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Km(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||yS(t,r)})}function yS(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(yy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Cy(t))}function eb(t,e,n){for(let r of n)r instanceof Ml?(t.Ru.addReference(r.key,e),NV(t,r)):r instanceof Rl?(P(wy,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||yS(t,r.key)):B(19791,{wu:r})}function NV(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(P(wy,"New document in limbo: "+n),t.Eu.add(r),Cy(t))}function Cy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new j(ve.fromString(e)),r=t.fu.next();t.Au.set(r,new zm(n)),t.du=t.du.insert(n,r),aS(t.remoteStore,new ta(Wt(Vb(n.path)),r,"TargetPurposeLimboResolution",sy.ce))}}async function ca(t,e,n){let r=G(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient){let h=d?!d.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);let h=Dm.As(u.targetId,d);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,d){let h=G(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>R.forEach(d,m=>R.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(g,m.targetId,y)).next(()=>R.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(g,m.targetId,y)))))}catch(g){if(!lo(g))throw g;P(my,"Failed to update sequence numbers: "+g)}for(let g of d){let m=g.targetId;if(!g.fromCache){let y=h.Ms.get(m),S=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(m,M)}}})(r.localStore,o))}async function MV(t,e){let n=G(t);if(!n.currentUser.isEqual(e)){P(wy,"User change. New user:",e.toKey());let r=await oS(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new F(N.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ca(n,r.Ls)}}function RV(t,e){let n=G(t),r=n.Au.get(e);if(r&&r.hu)return J().add(r.key);{let i=J(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let c=n.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function vS(t){let e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bV.bind(null,e),e.Pu.H_=vV.bind(null,e.eventManager),e.Pu.yu=_V.bind(null,e.eventManager),e}function xV(t){let e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AV.bind(null,e),e}var _S=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=Hl(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return ZF(this.persistence,new Cm,n.initialUser,this.serializer)}Cu(n){return new Il(Im.mi,this.serializer)}Du(n){return new Sm}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),Qm=class extends _S{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){fe(this.persistence.referenceDelegate instanceof Dl,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new cm(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?Dt.withCacheSize(this.cacheSizeBytes):Dt.DEFAULT;return new Il(r=>Dl.mi(r,n),this.serializer)}};var PV=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>XT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=MV.bind(null,this.syncEngine),await gV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new Um})()}createDatastore(n){let r=Hl(n.databaseInfo.databaseId),i=(function(s){return new xm(s)})(n.databaseInfo);return(function(s,c,u,d){return new Fm(s,c,u,d)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,c,u){return new Lm(i,o,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>XT(this.syncEngine,r,0),(function(){return Cl.v()?new Cl:new Am})())}createSyncEngine(n,r){return(function(o,s,c,u,d,h,g){let m=new Wm(o,s,c,u,d,h);return g&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=G(r);P(Ur,"RemoteStore shutting down."),i.Ea.add(5),await aa(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var Ym=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_n("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Qn="FirestoreClient",Zm=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Re.UNAUTHENTICATED,this.clientId=Qs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{P(Qn,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(P(Qn,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Iy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function Ig(t,e){t.asyncQueue.verifyOperationInProgress(),P(Qn,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function tb(t,e){t.asyncQueue.verifyOperationInProgress();let n=await OV(t);P(Qn,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>YT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>YT(e.remoteStore,i)),t._onlineComponents=e}async function OV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){P(Qn,"Using user provided OfflineComponentProvider");try{await Ig(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Ki("Error using user provided cache. Falling back to memory cache: "+n),await Ig(t,new _S)}}else P(Qn,"Using default OfflineComponentProvider"),await Ig(t,new Qm(void 0));return t._offlineComponents}async function ES(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(P(Qn,"Using user provided OnlineComponentProvider"),await tb(t,t._uninitializedComponentsProvider._online)):(P(Qn,"Using default OnlineComponentProvider"),await tb(t,new PV))),t._onlineComponents}function kV(t){return ES(t).then(e=>e.syncEngine)}async function FV(t){let e=await ES(t),n=e.eventManager;return n.onListen=EV.bind(null,e.syncEngine),n.onUnlisten=wV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CV.bind(null,e.syncEngine),n}function VV(t,e,n={}){let r=new qt;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,d){let h=new Ym({next:m=>{h.Nu(),s.enqueueAndForget(()=>yV(o,g)),m.fromCache&&u.source==="server"?d.reject(new F(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new $m(c,h,{includeMetadataChanges:!0,qa:!0});return mV(o,g)})(await FV(t),t.asyncQueue,e,n,r)),r.promise}function IS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var nb=new Map;var DS="firestore.googleapis.com",rb=!0,xl=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new F(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DS,this.ssl=rb}else this.host=e.host,this.ssl=e.ssl??rb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KF)throw new F(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$k("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ao=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Dg;switch(r.type){case"firstParty":return new bg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=nb.get(n);r&&(P("ComponentProvider","Removing Datastore"),nb.delete(n),r.terminate())})(this),Promise.resolve()}};function LV(t,e,n,r={}){t=cl(t,ao);let i=Wu(e),o=t._getSettings(),s=ce(H({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(WC(`https://${c}`),QC("Firestore",!0)),o.host!==DS&&o.host!==c&&Ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=ce(H({},o),{host:c,ssl:i,emulatorOptions:r});if(!Oi(u,s)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Re.MOCK_USER;else{d=KC(r.mockUserToken,t._app?.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new F(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Re(g)}t._authCredentials=new wg(new ol(d,h))}}var Pl=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},rt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sa(n,t._jsonSchema))return new t(e,r||null,new j(ve.fromString(n.referencePath)))}};rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:be("string",rt._jsonSchemaVersion),referencePath:be("string")};var $n=class t extends Pl{constructor(e,n,r){super(e,n,Vb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new j(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function yW(t,e,...n){if(t=ki(t),ab("collection","path",e),t instanceof ao){let r=ve.fromString(e,...n);return wT(r),new $n(t,null,r)}{if(!(t instanceof rt||t instanceof $n))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ve.fromString(e,...n));return wT(r),new $n(t.firestore,null,r)}}function jV(t,e,...n){if(t=ki(t),arguments.length===1&&(e=Qs.newId()),ab("doc","path",e),t instanceof ao){let r=ve.fromString(e,...n);return DT(r),new rt(t,null,new j(r))}{if(!(t instanceof rt||t instanceof $n))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ve.fromString(e,...n));return DT(r),new rt(t.firestore,t instanceof $n?t.converter:null,new j(r))}}var ib="AsyncQueue",Ol=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tl(this,"async_queue_retry"),this._c=()=>{let r=Eg();r&&P(ib,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=Eg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=Eg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new qt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lo(e))throw e;P(ib,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_n("INTERNAL UNHANDLED ERROR: ",ob(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=jm.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&B(47125,{Pc:ob(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function ob(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var ia=class extends ao{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ol,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ol(e),this._firestoreClient=void 0,await e}}};function vW(t,e){let n=typeof t=="object"?t:pT(),r=typeof t=="string"?t:e||dl,i=dT(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=zC("firestore");o&&LV(i,...o)}return i}function wS(t){if(t._terminated)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BV(t),t._firestoreClient}function BV(t){let e=t._freezeSettings(),n=(function(i,o,s,c){return new Rg(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,IS(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Zm(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var Gn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Qe.fromBase64String(e))}catch(n){throw new F(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sa(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:be("string",Gn._jsonSchemaVersion),bytes:be("string")};var oa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var kl=class{constructor(e){this._methodName=e}};var qn=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(sa(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};qn._jsonSchemaVersion="firestore/geoPoint/1.0",qn._jsonSchema={type:be("string",qn._jsonSchemaVersion),latitude:be("number"),longitude:be("number")};var zn=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sa(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new F(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};zn._jsonSchemaVersion="firestore/vectorValue/1.0",zn._jsonSchema={type:be("string",zn._jsonSchemaVersion),vectorValues:be("object")};var UV=/^__.*__$/,Jm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Cn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Br(e,this.data,n,this.fieldTransforms)}};function CS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{Ac:t})}}var Xm=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(H(H({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(CS(this.Ac)&&UV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},ey=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hl(e)}Cc(e,n,r,i=!1){return new Xm({Ac:e,methodName:n,Dc:r,path:mt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function HV(t){let e=t._freezeSettings(),n=Hl(t._databaseId);return new ey(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $V(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);AS("Data must be an object, but it was:",s,r);let c=bS(r,s),u,d;if(o.merge)u=new Gt(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let m=GV(e,g,n);if(!s.contains(m))throw new F(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zV(h,m)||h.push(m)}u=new Gt(h),d=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=s.fieldTransforms;return new Jm(new Rt(c),u,d)}function TS(t,e){if(SS(t=ki(t)))return AS("Unsupported field value:",e,t),bS(t,e);if(t instanceof kl)return(function(r,i){if(!CS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=TS(c,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=ki(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Se.fromDate(r);return{timestampValue:_l(i.serializer,o)}}if(r instanceof Se){let o=new Se(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_l(i.serializer,o)}}if(r instanceof qn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gn)return{bytesValue:Zb(i.serializer,r._byteString)};if(r instanceof rt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof zn)return(function(s,c){return{mapValue:{fields:{[uy]:{stringValue:ly},[Yi]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return py(c.serializer,d)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${oy(r)}`)})(t,e)}function bS(t,e){let n={};return wb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(t,(r,i)=>{let o=TS(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function SS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Se||t instanceof qn||t instanceof Gn||t instanceof rt||t instanceof kl||t instanceof zn)}function AS(t,e,n){if(!SS(n)||!cb(n)){let r=oy(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function GV(t,e,n){if((e=ki(e))instanceof oa)return e._internalPath;if(typeof e=="string")return NS(t,e);throw Fl("Field path arguments must be of type string or ",t,!1,void 0,n)}var qV=new RegExp("[~\\*/\\[\\]]");function NS(t,e,n){if(e.search(qV)>=0)throw Fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new oa(...e.split("."))._internalPath}catch{throw Fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fl(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(N.INVALID_ARGUMENT,c+t+u)}function zV(t,e){return t.some(n=>n.isEqual(e))}var Vl=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ty(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(MS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},ty=class extends Vl{data(){return super.data()}};function MS(t,e){return typeof e=="string"?NS(t,e):e instanceof oa?e._internalPath:e._delegate._internalPath}function WV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ny=class{convertValue(e,n="none"){switch(Wn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(In(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Hr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[Yi].arrayValue?.values?.map(r=>ye(r.doubleValue));return new zn(n)}convertGeoPoint(e){return new qn(ye(e.latitude),ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=jl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Js(e));default:return null}}convertTimestamp(e){let n=En(e);return new Se(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ve.fromString(e);fe(rS(r),9688,{name:e});let i=new fl(r.get(1),r.get(3)),o=new j(r.popFirst(5));return i.isEqual(n)||_n(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function KV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var $i=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},qi=class t extends Vl{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new zi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(MS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",qi._jsonSchema={type:be("string",qi._jsonSchemaVersion),bundleSource:be("string","DocumentSnapshot"),bundleName:be("string"),bundle:be("string")};var zi=class extends qi{data(e={}){return super.data(e)}},Wi=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $i(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zi(this._firestore,this._userDataWriter,r.key,r,new $i(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new zi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new $i(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new zi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new $i(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return c.type!==0&&(d=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:QV(c.type),doc:u,oldIndex:d,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qs.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function QV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B(61501,{type:t})}}Wi._jsonSchemaVersion="firestore/querySnapshot/1.0",Wi._jsonSchema={type:be("string",Wi._jsonSchemaVersion),bundleSource:be("string","QuerySnapshot"),bundleName:be("string"),bundle:be("string")};var ry=class extends ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}};function _W(t){t=cl(t,Pl);let e=cl(t.firestore,ia),n=wS(e),r=new ry(e);return WV(t._query),VV(n,t._query).then(i=>new Wi(e,r,t,i))}function EW(t,e){let n=cl(t.firestore,ia),r=jV(t),i=KV(t.converter,e);return YV(n,[$V(HV(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}function YV(t,e){return(function(r,i){let o=new qt;return r.asyncQueue.enqueueAndForget(async()=>TV(await kV(r),i,o)),o.promise})(wS(t),e)}(function(e,n=!0){(function(i){co=i})(hT),Us(new gn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new ia(new Cg(r.getProvider("auth-internal")),new Sg(s,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new F(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(d.options.projectId,h)})(s,i),s);return o=H({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Hn(_T,ET,e),Hn(_T,ET,"esm2020")})();var TW={production:!1,firebaseConfig:{apiKey:"AIzaSyBga623ULNDTfLSee4rBo1mvRtmrpqEBjY",authDomain:"astro-site-5f426.firebaseapp.com",projectId:"astro-site-5f426",storageBucket:"astro-site-5f426.firebasestorage.app",messagingSenderId:"263641164662",appId:"1:263641164662:web:3cbca6c215ada4de122857",measurementId:"G-F2VDCYLTEB"}};export{H as a,ce as b,ZV as c,Ne as d,CA as e,oe as f,xd as g,Pd as h,Tt as i,Lo as j,jo as k,y2 as l,kt as m,OA as n,kA as o,FA as p,rr as q,en as r,GA as s,ir as t,oc as u,zA as v,Bo as w,o_ as x,WA as y,Uo as z,kd as A,QA as B,YA as C,Fd as D,ZA as E,JA as F,XA as G,e0 as H,t0 as I,n0 as J,K,le as L,o0 as M,U as N,Fe as O,k as P,ai as Q,pf as R,ct as S,vc as T,F_ as U,V_ as V,J_ as W,rn as X,hi as Y,_r as Z,Rn as _,At as $,M0 as aa,Fn as ba,un as ca,Uf as da,G0 as ea,Tr as fa,ps as ga,mN as ha,br as ia,aI as ja,vN as ka,_N as la,EN as ma,ms as na,Ei as oa,tM as pa,cs as qa,ls as ra,ee as sa,ws as ta,dn as ua,LD as va,tp as wa,HR as xa,Me as ya,$D as za,Ts as Aa,We as Ba,et as Ca,Tx as Da,Si as Ea,yu as Fa,Ht as Ga,kx as Ha,Fx as Ia,Lx as Ja,jx as Ka,sw as La,lp as Ma,dp as Na,aw as Oa,cw as Pa,uw as Qa,Gx as Ra,Ai as Sa,zx as Ta,Wx as Ua,Ns as Va,l1 as Wa,mw as Xa,hp as Ya,yw as Za,p1 as _a,vw as $a,_1 as ab,D1 as bb,Mt as cb,pq as db,Su as eb,gq as fb,Np as gb,mq as hb,yq as ib,vq as jb,Mr as kb,xP as lb,Pp as mb,nC as nb,oC as ob,FP as pb,VP as qb,LP as rb,kp as sb,jP as tb,Q5 as ub,mC as vb,sC as wb,vz as xb,_z as yb,uO as zb,fO as Ab,Iz as Bb,pO as Cb,mO as Db,_O as Eb,IO as Fb,Dz as Gb,wz as Hb,Cz as Ib,oT as Jb,Sk as Kb,yW as Lb,vW as Mb,_W as Nb,EW as Ob,TW as Pb};
